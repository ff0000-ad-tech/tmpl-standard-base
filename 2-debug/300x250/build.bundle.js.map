{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./1-build/300x250/Ad.js","webpack:///./1-build/300x250/components/Build/index.jsx","webpack:///./1-build/common/fonts/template_font.woff","webpack:///./1-build/common/js/AdData.js","webpack:///./1-build/common/js/Control.js","webpack:///./1-build/common/js/Preflight.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-control/index.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-control/lib/Core.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-control/lib/CssManager.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-control/lib/Expandable.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-control/lib/ExpandableDcs.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-control/lib/ImageManager.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-control/lib/SheetManager.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-events/index.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-events/lib/FrameRate.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-events/lib/FrameRateBase.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-events/lib/Gesture.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-events/lib/GestureBase.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-events/lib/GestureEvent.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-events/lib/UIEvent.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-external/index.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-external/lib/Device.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-geom/index.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-geom/lib/Matrix2D.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-geom/lib/Matrix3D.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-geom/lib/ParentTransform.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-geom/lib/SimpleNoise2D.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-geom/lib/Vector2D.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-geom/lib/matrixUtils.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-load/index.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-load/lib/mixin/LoaderBase.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-load/lib/mixin/LoaderSourceMixin.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-load/lib/mixin/LoaderTickerMixin.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-load/lib/mixin/LoaderUtils.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-load/lib/single/DataLoader.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-load/lib/single/FontLoader.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-load/lib/single/ImageLoader.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-load/lib/single/InlineLoader.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-polyfills/lib/request-animation-frame.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-utils/index.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-utils/lib/ArrayUtils.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-utils/lib/ColorUtils.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-utils/lib/DcsUtils.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-utils/lib/ImageUtils.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-utils/lib/LocationUtils.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-utils/lib/MathUtils.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-utils/lib/MonetUtils.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-utils/lib/MotionUtils.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-utils/lib/ObjectUtils.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-utils/lib/TextUtils.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-view/index.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-view/lib/Align.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-view/lib/Clamp.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-view/lib/Effects.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-view/lib/FullScreen.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-view/lib/Markup.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-view/lib/Ratio.js","webpack:///./1-build/node_modules/@ff0000-ad-tech/ad-view/lib/Styles.js","webpack:///../src/constants.js","webpack:///../src/options.js","webpack:///../src/create-element.js","webpack:///../src/component.js","webpack:///../src/render.js","webpack:///../src/create-context.js","webpack:///../src/util.js","webpack:///../src/diff/children.js","webpack:///../src/diff/props.js","webpack:///../src/diff/index.js","webpack:///../src/clone-element.js","webpack:///../src/diff/catch-error.js","webpack:///(webpack)/buildin/global.js","webpack:///external \"window\""],"names":["Ad","launch","binaryAssets","console","log","Core","init","then","Preflight","loadDynamic","prepare","err","Control","preMarkup","render","document","getElementById","postMarkup","window","Build","setInterval","setState","time","Date","toLocaleTimeString","state","Component","AdData","self","fonts","primary","colors","svg","addEventListener","handleClick","global","removePreloader","event","Network","exit","clickTag","Promise","resolve","reject","promises","all","addPreloadedImages","prepareAdData","ImageManager","addToDictionary","assets","preloadedImages","adData","loadDynamicJS","id","Device","CssManager","failAd","undefined","generateBrowserKeyDictionary","level","C","parseInt","debug_level1","debug_level2","filter","debugLevel","passDebugFilter","debug_element","indexOf","debug_css_list","i","String","deviceKeyDict","styles","createElement","style","key","prefix","getPrefix","standardKey","standardizeKey","browser","prependPrefix","mozKey","webkitKey","camelateKey","element","cssList","ifDebug","transformList","match","getDeviceKey","applyTransforms","cssObject","debugElement","declarations","conformKeyValue","cssString","split","declarationParts","conformedDeclarations","value","conformCssObject","matrix2D","Matrix2D","existingTransform","matrixMatch","setFromCss","data","transforms","tx","ty","rz","sx","sy","changed","transformMethod","reverse","rotate","Math","PI","scale","translate","getCss","trim","keyAsStandard","conformValue","search","matchPrefixRegex","replace","toLowerCase","keyless","charAt","slice","str","toUpperCase","stripPrefix","keyFormatExceptions","x","translateX","y","translateY","rotation","scaleX","scaleY","conformedValues","conformedValue","hasMultipleValues","numericValue","matchNumberRegex","Number","unitMatch","functionRegex","params","exec","args","map","index","array","push","splitKeys","length","_arg","_afterInitExpanded","_hasUserInteracted","extend","collapse","gestureEvent","handle","collapseStart","expand","expandStart","collapseComplete","expandComplete","fireCallback","animateExpand","animateCollapse","arg","defaultFalsey","adParams","expandable","expanded","obj","GestureEvent","stop","hasUserInteracted","param","TweenLite","to","target","expandTime","expandedX","expandedY","width","adWidth","height","adHeight","onComplete","isInit","collapseTime","collapsedX","collapsedY","collapsedWidth","collapsedHeight","name","call","Enabler","studio","events","StudioEvent","EXPAND_START","EXPAND_FINISH","COLLAPSE_START","COLLAPSE_FINISH","setStartExpanded","requestCollapse","reportManualClose","requestExpand","finishCollapse","finishExpand","_pendingImages","_pendingCanvasImages","_pendingLoaders","_nextLoadCallback","_imageManagerLoader","_dict","_isLoading","_loaderCount","_onComplete","_onFail","addToLoad","file","LoaderUtils","getFileName","available","forCanvas","addLoader","loader","get","imageId","Error","internal","exists","load","callback","onFail","concat","currentPendingImages","imgLoads","img","ImageLoader","dataRaw","currentPendingCanvasImages","canvasImgLoads","canvasImg","crossOrigin","addedLoaderPromises","imgDataArr","addFbaImages","getAllContentRaw","content","Image","SVGElement","createGlobalNode","nodeId","type","arguments","names","innerHTML","getElementsByTagName","appendChild","addClass","className","Markup","getElement","classList","add","removeClass","remove","FrameRate","from","handler","fps","F","_sets","FrameRateBase","pool","_isActive","resume","splice","Object","keys","pause","fpsTarget","_paused","_isPaused","d","cancelAnimationFrame","_RAF","_currentlyRunning","requestAnimationFrame","tick","sec","h","_frameTime","floor","_prevTime","_startTime","_nextTime","_maxLag","_shiftLag","_prevCallTime","now","diffTime","prototype","elapsedTime","future","dispatch","Gesture","G","_targets","_disableList","_eventPass","createEventObject","_eventLooping","_kills","_gestureBase","getGestureBase","register","Styles","setCss","removeEventListener","unregister","eventList","disable","gestureBase","CLICK","handlePassThroughClick","disableChildren","setActiveChildren","enable","enableChildren","elem","createGestureBase","GestureBase","active","hasActiveChildren","children","parentNode","getNextLayerElement","list","visibility","elementFromPoint","getForwardedTarget","hiddenList","el","clientX","clientY","stopImmediatePropagation","evt","createEvent","initEvent","dispatchEvent","debug","_isDragEnabled","_isDragging","_give","_oX","_oY","_p1X","_p1Y","_p2X","_p2Y","_sX","_sY","_vX","_vY","_cursor","_start","_end","_handleTouchStart","bind","_handleDown","_handleDrag","_handleUp","_elemAdd","_elemRemove","_reset","_checkDragEnabled","os","hasDragEventIndex","join","_getEventScope","changedTouches","_add","_remove","touch","mouseX","pageX","mouseY","pageY","elemRect","getBoundingClientRect","localOffsetX","left","localOffsetY","top","localX","localY","globalOffsetX","globalOffsetY","elemPositionX","elemPositionY","localCreateEvent","newEvent","bypass","eventName","offsetTop","pageYOffset","offsetBottom","offsetLeft","pageXOffset","offsetRight","_dragEndOrSwipe","preventDefault","diffx1","diffx2","diffy1","diffy2","abs","mouseGlobalX","mouseGlobalY","mouseLocalX","mouseLocalY","elementX","elementY","distanceX","distanceY","velocityX","velocityY","E","CustomEvent","mouse","local","distance","velocity","direction","Event","stopBubble","isStopped","stopped","startPoint","endPoint","OVER","OUT","MOVE","PRESS","RELEASE","DRAG","DRAG_START","DRAG_STOP","SWIPE","_componentEnabled","_sliderUpdate","UIEvent","ENABLED","RESIZE","SLIDER_UPDATE","componentEnabled","sliderUpdate","innerWidth","innerHeight","devicePixelRatio","D","agentString","navigator","userAgent","_getType","_getBrandAndOS","_getBrowser","osVersion","browserVersion","line","Array","property","hasOwnProperty","hasMobile","hasTablet","hasIPad","apple","brand","product","appleOS","android","_checkForSpecial","microsoft","blackberry","browserMatches","versionMatch","targetParam","focus","RegExp","M","identity","Float32Array","clear","radians","_m","c","cos","toFixed","s","sin","multiply","skew","ax","ay","tan","m","invert","_copy","a","b","k","q","getX","getY","matrixString","matrixArray","cssToData","setFromArray","Matrix3D","set","rotateX","rotateY","rotateZ","z","_c","t","getZ","apply","ParentTransform","originX","originY","points","calculatedPoints","_matrix","addPoint","toAdd","addPoints","concate","update","MathUtils","toRadians","newPt","transformPoint","point","_offSetX","_offSetY","_newX","_newY","SimpleNoise2D","Vector2D","_getVal","MAX_VERTICES","rx","ry","random","axis","_init","vals","step","min","MAX_VERTICES_MASK","max","_lerp","v","sub","dist","sqrt","mult","div","limit","normalize","ratio","clone","degreeToVector","theta","degreeIncrement","inc","Loader","L","_queue","_total","_active","_startedCount","prepend","platformGetUrl","fileType","_addSingleLoad","_addFbaSubLoads","_addSubLoad","_has","_output","l","fileName","extension","extensionIndex","fileAndExtension","_startSingleLoad","getAllContent","_found","searchSubLoader","_content","getLoader","url","fileTypeOverwrite","Utils","loaderType","FontLoader","DataLoader","InlineLoader","urlChoice","singleLoader","scope","_handleSingleLoadComplete","_handleFail","cacheBuster","queueIndex","onProgress","_handleProgress","blobs","fbaDataToBlobs","forEach","blob","src","path","_inst","_handleComplete","_startLoadTimeOut","setTimeout","_length","_count","_consecutive","_subProgress","progress","rawProgress","LoaderBase","_failCalled","LoaderSourceMixin","superclass","matchProtocolTo","LoaderTickerMixin","_setTicker","setTicker","css","font","handleFail","handleTickerComplete","_handleTickerComplete","_removeTickerNode","node","removeChild","cssText","body","_width","offsetWidth","fontFamily","_timeOut","clearInterval","_interval","clearTimeout","createXMLHttpRequest","XMLHttpRequest","e","ActiveXObject","warn","lastIndexOf","directory","substring","getFontName","getFileType","_index","substr","_split","_base64","_type","getFullUrl","_prepend","getUrlPrepend","_url","_file","getParamsFromData","query","queryString","prop","method","responseType","isPost","req","encodeURIComponent","getTime","onreadystatechange","_handleStateChange","open","overrideMimeType","setRequestHeader","send","readyState","status","response","responseText","FontFace","error","format","assembledFontRule","getSheet","styleScript","media","createTextNode","renderOnly","I","onload","onerror","_createCssLink","_createHtmlLink","_createScript","charset","href","rel","_isiOS6","test","_prefix","combine","arr1","arr2","copy","insertAt","values","removeAt","item","_returnArray","shuffle","sort","contains","toRgba","color","alpha","r","g","result","toRgbaString","hue","_convert","hsl","rgbToHSL","amount","returnColors","_hslToRGB","saturation","val","_fromVal","_high","_low","round","contrast","tint","transform","rgb","cMax","cMin","delta","_normalizeRgbValue","counterWithVars","impression","reportCustomVariableCount1","reportCustomVariableCount2","addVideoMetrics","player","message","loadModule","module","ModuleId","VIDEO","video","Reporter","attach","screen","addYouTubeVideoMetrics","p","isReplay","trackVideoReplay","trackVideoPlay","complete","trackVideoPause","trackVideoComplete","fitImageAtCoordinate","source","child","backgroundPosition","placement","backgroundImage","backgroundSize","backgroundRepeat","parent","offsetHeight","parentAspectRatio","childAspectRatio","fit","childSize","scalePercent","coord","childMove","maxMove","fitCanvasImageAtCoordinate","fitParams","imgSourceWidth","imgSourceHeight","_widerSource","_widerSpace","_makeRatios","_args","paramsW","paramsH","origin","_setupOrientation","checkParam","fitParamsSquare","_fitOrigin","_orientToOrigin","_scale","_sourcePropPos","_modifyOutOfBounds","_subArgs","_arg1","_arg2","_fitSquare","_sourcePropSize","sourceX","sourceY","transformOrigin","debugClass","stage","fill","_tall","_wide","_targetrc","stroke","LocationUtils","gpsSuccessCallback","gpsFailCallback","getGPSData","callbackSuccess","callbackFail","geolocation","getCurrentPosition","onLocationRetrieved","onLocationFailed","position","coords","code","degree","toDegrees","radian","increment","ceil","_num","randomBoolean","weight","randomWeightedKey","rand","isIn","inRange","a0","a1","b0","b1","bX","isNumber","num","isNaN","toNumber","restrict","getAnglePoint","angle","getAngle","x1","y1","x2","y2","atan2","getDistance","_data","_monetTypes","setData","integrator","promise","getMonetData","getDataByKey","output","outputType","rootAssets","MotionUtils","_zeroX","_zeroY","_isInit","_negX","_posX","_negY","_posY","_multi","_callback","setSpeedLimits","negX","posX","negY","posY","setSpeedMultiplier","multi","activate","onOrientation","deactivate","callibrate","orientation","gamma","beta","objectifier","ctxObj","splits","_getSplits","_getProperty","splitData","lastKey","popLast","pop","toString","constructor","defaults","defaultObj","recursive","addSpaces","numberOfSpaces","spacingString","getSpecialCharacter","requestedCharacter","isCapital","proxyStringToLowerCase","specialCharacters","currentLabel","label","upperCase","lowerCase","trimStartAndEnd","removeSpaces","pad","_target","_sign","injectBreakTags","indexes","before","median","after","_rect","BOTTOM","CENTER","LEFT","RIGHT","TOP","BOTTOM_LEFT","BOTTOM_RIGHT","TOP_LEFT","TOP_RIGHT","canvas","snap","sourceRect","isDomElement","calculate","topAgainst","against","typeToObj","xy","againstDimension","againstX","againstNumber","offset","outer","againstRect","widthOrHeight","alignText","pos","_sources","isArray","first","mode","isConvert","HTMLElement","X","Y","XY","buffer","move","childNodes","childCoordinates","xyValue","whValue","xyDirection","_buffer","bottom","right","blur","dropShadow","boxShadow","createShadow","size","spread","inner","textDropShadow","textShadow","glow","linearGradient","background","radialGradient","deg","rad","ColorUtils","FullScreen","isFullScreen","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","enter","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","selector","getElementsByClassName","removeChildren","firstChild","addiFrame","_containerData","setAttribute","applyContainerCss","addSvg","nameSpace","createElementNS","strokeWidth","applyToElements","elements","methodArg","EXACT","FILL","FIT","STRETCH","resize","returnObj","conformCssKeyValue","conformCssString","cssValue","matrix","getComputedStyle","getPropertyValue","injectStylesheet","options","isValidElement","rerenderQueue","defer","prevDebounce","IS_HYDRATE","EMPTY_OBJ","EMPTY_ARR","IS_NON_DIMENSIONAL","assign","props","removeNode","ref","normalizedProps","defaultProps","createVNode","original","vnode","createRef","current","Fragment","context","getDomSibling","childIndex","sibling","updateParentDomPointers","base","enqueueRender","process","debounceRendering","queue","some","component","commitQueue","oldVNode","newDom","oldDom","parentDom","diff","ownerSVGElement","commitRoot","diffChildren","renderResult","newParentVNode","oldParentVNode","globalContext","isSvg","excessDomChildren","isHydrating","j","childVNode","firstChildDom","refs","oldChildren","oldChildrenLength","placeChild","unmount","applyRef","toChildArray","out","nextDom","sibDom","nextSibling","insertBefore","diffProps","dom","newProps","oldProps","hydrate","setProperty","setStyle","oldValue","useCapture","nameLower","proxy","_listeners","eventProxyCapture","eventProxy","removeAttributeNS","setAttributeNS","removeAttribute","reorderChildren","newVNode","tmp","isNew","oldState","snapshot","clearProcessingException","provider","componentContext","newType","contextType","doRender","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","diffElementNodes","diffed","root","cb","oldHtml","newHtml","nodeType","localName","is","dangerouslySetInnerHTML","attributes","checked","parentVNode","skipRemove","componentWillUnmount","this","replaceNode","cloneElement","createContext","defaultValue","contextId","Consumer","contextValue","Provider","subs","ctx","_props","old","ctor","handled","wasHydrating","getDerivedStateFromError","componentDidCatch","forceUpdate","Function","exports"],"mappings":"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;AACO,IAAMC,OAAO,GAAG,WAAhB;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACO,IAAMzH,KAAK,GAAG,UAAd;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACO,IAAM0H,IAAI,GAAG,QAAb;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACO,IAAMC,UAAU,GAAG,aAAnB;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACO,IAAMC,SAAS,GAAG,YAAlB;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACO,IAAMC,KAAK,GAAG,SAAd,C;;;;;;;;;;;;AClSP;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIC,iBAAJ,EAAuBC,aAAvB;;AACA,IAAIC,OAAO,GAAG;AACb;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACCC,SAAO,EAAE,oBATI;;AAWb;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACCC,QAAM,EAAE,UAnBK;;AAqBb;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACCC,eAAa,EAAE,gBA7BF;;AA+Bb,MAAIC,gBAAJ,GAAuB;AACtB,QAAI,CAACN,iBAAL,EAAwB;AACvBA,uBAAiB,GAAG,IAAIrB,WAAJ,CAAgB,oBAAhB,CAApB;AACA;;AACD,WAAOqB,iBAAP;AACA,GApCY;;AAqCb,MAAIO,YAAJ,GAAmB;AAClB,QAAI,CAACN,aAAL,EAAoB;AACnBA,mBAAa,GAAG,IAAItB,WAAJ,CAAgB,gBAAhB,CAAhB;AACA;;AACD,WAAOsB,aAAP;AACA;;AA1CY,CAAd;AA6CeC,sEAAf,E;;;;;;;;;;;;AC5DA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAEM1Z,M;;;;;;AAGL;AACD;AACA;AACA;AACA;;AAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEC;AACD;AACA;AACA;AACA;;AAEC;AACD;AACA;AACA;AACA;;AAEC;AACD;AACA;AACA;AACA;;AAEC;AACD;AACA;AACA;AACA;AACA;;AAEC;AACD;AACA;AACA;AACA;AACA;;AAEC;AACA;;AAEA;AACD;AACA;AACA;AACA;AACA;wBAC0B;AACxB,aAAOrC,MAAM,CAACqc,UAAP,GAAoBrc,MAAM,CAACsc,WAA3B,GAAyC,WAAzC,GAAuD,UAA9D;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;wBACyB;AACvB,aAAO;AACNtR,aAAK,EAAEhL,MAAM,CAACqc,UADR;AAENnR,cAAM,EAAElL,MAAM,CAACsc;AAFT,OAAP;AAIA;AAED;AACA;;AAEA;AACD;AACA;AACA;AACA;AACA;;;;;;;gBAvHMja,M,gBACerC,MAAM,CAACuc,gBAAP,IAA2B,S;;gBAD1Cla,M,UAwHS,YAAW;AACxBpD,SAAO,CAACC,GAAR,CAAY,eAAZ;AACA,MAAMsd,CAAC,GAAG,IAAV;AACAA,GAAC,CAACC,WAAF,GAAgBC,SAAS,CAACC,SAA1B;;AAEAH,GAAC,CAACI,QAAF;;AACAJ,GAAC,CAACK,cAAF;;AACAL,GAAC,CAACM,WAAF;;AAEA,MAAIN,CAAC,CAAChN,IAAF,KAAW,SAAX,IAAwBgN,CAAC,CAACpF,EAAF,KAAS,SAAjC,IAA8CoF,CAAC,CAACO,SAAF,IAAe,CAA7D,IAAkEP,CAAC,CAACxY,OAAF,KAAc,IAAhF,IAAwFwY,CAAC,CAACQ,cAAF,GAAmB,EAA/G,EAAmH;AAClH/d,WAAO,CAACC,GAAR,CACC,yRADD;AAGAsd,KAAC,CAAChN,IAAF,GAAS,SAAT;AACA;;AAED,MAAIyN,IAAI,GAAGC,KAAK,CAAC,EAAD,CAAL,CAAU5F,IAAV,CAAe,GAAf,CAAX;AACA,MAAIjQ,GAAG,GAAG,OAAO4V,IAAjB,CAjBwB,CAkBxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAK,IAAIE,QAAT,IAAqBX,CAArB,EAAwB;AACvB,QAAIA,CAAC,CAACY,cAAF,CAAiBD,QAAjB,KAA8B,OAAOX,CAAC,CAACW,QAAD,CAAR,KAAuB,UAAzD,EAAqE;AACpE9V,SAAG,IAAI,OAAO8V,QAAP,GAAkB,IAAlB,GAAyBX,CAAC,CAACW,QAAD,CAAjC;AACA;AACD;;AACD9V,KAAG,IAAI,OAAO4V,IAAd;AACAhe,SAAO,CAACC,GAAR,CAAYmI,GAAZ;AACA,C;;gBA1JIhF,M,cA8Ja,YAAW;AAC5B,MAAMma,CAAC,GAAG,IAAV;AACA,MAAIa,SAAS,GAAG,qBAAqB5U,IAArB,CAA0B+T,CAAC,CAACC,WAA5B,CAAhB;AACA,MAAIa,SAAS,GAAG,mBAAmB7U,IAAnB,CAAwB+T,CAAC,CAACC,WAA1B,CAAhB;AACA,MAAIc,OAAO,GAAG,WAAW9U,IAAX,CAAgB+T,CAAC,CAACC,WAAlB,CAAd;AACAD,GAAC,CAAChN,IAAF,GAAS,SAAT;AACA,MAAI6N,SAAJ,EAAeb,CAAC,CAAChN,IAAF,GAAS,QAAT;AACf,MAAI8N,SAAJ,EAAed,CAAC,CAAChN,IAAF,GAAS,QAAT;AACf,MAAI+N,OAAJ,EAAaf,CAAC,CAAChN,IAAF,GAAS,QAAT;AACb,C;;gBAvKInN,M,oBAyKmB,YAAW;AAClC,MAAIma,CAAC,GAAG,IAAR;AACA,MAAIgB,KAAK,GAAGhB,CAAC,CAACC,WAAF,CAAchY,KAAd,CAAoB,sBAApB,CAAZ;;AACA,MAAI+Y,KAAJ,EAAW;AACVhB,KAAC,CAACiB,KAAF,GAAU,OAAV;AACAjB,KAAC,CAACkB,OAAF,GAAYF,KAAK,CAAC,CAAD,CAAL,CAASvW,WAAT,EAAZ;AACA,QAAI0W,OAAO,GAAG,6BAA6BlV,IAA7B,CAAkC+T,CAAC,CAACC,WAApC,CAAd;AACAD,KAAC,CAACpF,EAAF,GAAOuG,OAAO,CAAC,CAAD,CAAP,IAAc,EAAd,GAAmB,KAAnB,GAA2B,KAAlC;AACAnB,KAAC,CAACO,SAAF,GAAcY,OAAO,CAAC,CAAD,CAAP,CAAW3W,OAAX,CAAmB,KAAnB,EAA0B,GAA1B,CAAd;AACA;AACA;;AAED,MAAI4W,OAAO,GAAG,8BAA8BnV,IAA9B,CAAmC+T,CAAC,CAACC,WAArC,CAAd;;AACA,MAAImB,OAAJ,EAAa;AACZpB,KAAC,CAACiB,KAAF,GAAUjB,CAAC,CAACkB,OAAF,GAAYlB,CAAC,CAACpF,EAAF,GAAOwG,OAAO,CAAC,CAAD,CAAP,CAAW3W,WAAX,EAA7B;;AACAuV,KAAC,CAACqB,gBAAF,CAAmB,SAAnB,EAA8B,CAAC,SAAD,CAA9B,EAA2CrB,CAAC,CAACC,WAAF,CAAcxX,KAAd,CAAoB,GAApB,EAAyB,CAAzB,EAA4BA,KAA5B,CAAkC,GAAlC,EAAuC,CAAvC,CAA3C;;AACAuX,KAAC,CAACO,SAAF,GAAca,OAAO,CAAC,CAAD,CAArB;AACA;AACA;;AAED,MAAIE,SAAS,GAAG,mDAAmDrV,IAAnD,CAAwD+T,CAAC,CAACC,WAA1D,CAAhB;;AACA,MAAIqB,SAAJ,EAAe;AACdtB,KAAC,CAACiB,KAAF,GAAU,WAAV;AACAjB,KAAC,CAACpF,EAAF,GAAO,SAAP;;AAEA,YAAQ0G,SAAS,CAAC,CAAD,CAAjB;AACC,WAAK,KAAL;AACCtB,SAAC,CAACO,SAAF,GAAc,IAAd;AACA;;AACD,WAAK,KAAL;AACCP,SAAC,CAACO,SAAF,GAAc,OAAd;AACA;;AACD,WAAK,KAAL;AACCP,SAAC,CAACO,SAAF,GAAc,GAAd;AACA;;AACD,WAAK,KAAL;AACCP,SAAC,CAACO,SAAF,GAAc,GAAd;AACA;;AACD,WAAK,KAAL;AACCP,SAAC,CAACO,SAAF,GAAc,KAAd;AACA;;AACD,WAAK,MAAL;AACCP,SAAC,CAACO,SAAF,GAAc,IAAd;AACA;;AACD;AACCP,SAAC,CAACO,SAAF,GAAce,SAAS,CAAC,CAAD,CAAvB;AApBF;;AAuBAtB,KAAC,CAACkB,OAAF,GAAYI,SAAS,CAAC,CAAD,CAAT,CAAa7W,WAAb,EAAZ;;AACA,QAAIuV,CAAC,CAACkB,OAAF,CAAUjZ,KAAV,CAAgB,OAAhB,CAAJ,EAA8B;AAC7B+X,OAAC,CAACkB,OAAF,GAAY,IAAZ;AACA;;AACD;AACA,GArDiC,CAuDlC;;;AACA,MAAIK,UAAU,GAAGvB,CAAC,CAACC,WAAF,CAAchY,KAAd,CAAoB,6BAApB,CAAjB;;AACA,MAAIsZ,UAAJ,EAAgB;AACfvB,KAAC,CAACiB,KAAF,GAAUjB,CAAC,CAACkB,OAAF,GAAYlB,CAAC,CAACpF,EAAF,GAAO,YAA7B;AACAoF,KAAC,CAACO,SAAF,GAAc,8BAA8BtU,IAA9B,CAAmC+T,CAAC,CAACC,WAArC,EAAkD,CAAlD,CAAd;AACA;AACD,C;;gBAtOIpa,M,iBAwOgB,YAAW;AAC/B,MAAMma,CAAC,GAAG,IAAV;AACA,MAAIwB,cAAc,GAAG,gCAAgCvV,IAAhC,CAAqC+T,CAAC,CAACC,WAAvC,CAArB,CAF+B,CAE0C;AAEzE;;AACA,MAAI,CAACuB,cAAL,EAAqB;AACpBA,kBAAc,GAAGxB,CAAC,CAACC,WAAF,CAAchY,KAAd,CAAoB,mFAApB,CAAjB;AACA,GAP8B,CAS/B;;;AACA,MAAI,CAACuZ,cAAD,IAAmBA,cAAc,CAAChV,MAAf,GAAwB,CAA/C,EAAkD;AACjD/J,WAAO,CAACC,GAAR,CAAY,gFAAZ;;AACA,YAAQsd,CAAC,CAACpF,EAAV;AACC,WAAK,KAAL;AACCoF,SAAC,CAACxY,OAAF,GAAY,QAAZ;AACA;;AACD,WAAK,SAAL;AACCwY,SAAC,CAACxY,OAAF,GAAY,SAAZ;AACA;;AACD;AACCwY,SAAC,CAACxY,OAAF,GAAY,QAAZ;AACA;AATF;;AAWAwY,KAAC,CAACQ,cAAF,GAAmB,YAAnB;AACA;AACA;;AAED/d,SAAO,CAACC,GAAR,CAAY,0BAAZ;AACAsd,GAAC,CAACxY,OAAF,GAAYga,cAAc,CAAC,CAAD,CAAd,CAAkB/W,WAAlB,EAAZ;AACAuV,GAAC,CAACQ,cAAF,GAAmBgB,cAAc,CAAC,CAAD,CAAjC;;AAEA,UAAQxB,CAAC,CAACxY,OAAV;AACC,SAAK,SAAL;AACC;AACA,UAAIia,YAAY,GAAG,eAAexV,IAAf,CAAoB+T,CAAC,CAACC,WAAtB,CAAnB;AACA,UAAIwB,YAAJ,EAAkBzB,CAAC,CAACQ,cAAF,GAAmBiB,YAAY,CAAC,CAAD,CAA/B;;AACnB,SAAK,MAAL;AACCzB,OAAC,CAACxY,OAAF,GAAY,IAAZ;AACA;;AACD,SAAK,OAAL;AACCwY,OAAC,CAACxY,OAAF,GAAY,QAAZ;AACA;;AACD,SAAK,QAAL;AACC,UAAIia,YAAY,GAAGzB,CAAC,CAACC,WAAF,CAAchY,KAAd,CAAoB,0BAApB,CAAnB;AACA,UAAIwZ,YAAJ,EAAkBzB,CAAC,CAACQ,cAAF,GAAmBiB,YAAY,CAAC,CAAD,CAA/B;AAClB;;AACD,SAAK,QAAL;AACC;AACA,UAAIA,YAAY,GAAGzB,CAAC,CAACC,WAAF,CAAchY,KAAd,CAAoB,sBAApB,CAAnB;;AACA,UAAIwZ,YAAJ,EAAkB;AACjBzB,SAAC,CAACxY,OAAF,GAAY,OAAZ;AACAwY,SAAC,CAACQ,cAAF,GAAmBiB,YAAY,CAAC,CAAD,CAA/B;AACA;;AACD;AAtBF;AAwBA,C;;gBA/RI5b,M,sBAiSqB,UAAS6b,WAAT,EAAsBrV,KAAtB,EAA6BsV,KAA7B,EAAoC;AAC7D,MAAM3B,CAAC,GAAG,IAAV;AACA,MAAI/R,KAAJ;;AACA,OAAK,IAAIpH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwF,KAAK,CAACG,MAA1B,EAAkC3F,CAAC,EAAnC,EAAuC;AACtCoH,SAAK,GAAG5B,KAAK,CAACxF,CAAD,CAAL,CAAS4D,WAAT,EAAR;;AACA,QAAIkX,KAAK,CAAC1Z,KAAN,CAAY,IAAI2Z,MAAJ,CAAW3T,KAAX,EAAkB,GAAlB,CAAZ,CAAJ,EAAyC;AACxC+R,OAAC,CAAC0B,WAAD,CAAD,GAAiBzT,KAAjB;AACA;AACA;AACD;AACD,C;;AAGapI,qEAAf,E;;;;;;;;;;;;AC7TA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACJA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMkD,QAAQ,GAAG,SAAXA,QAAW,GAAW;AAC3B,MAAM8Y,CAAC,GAAG,IAAV,CAD2B,CAE3B;;AACAA,GAAC,CAACC,QAAF,GAAa,IAAIC,YAAJ,CAAiB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,CAAjB,CAAb;AACAF,GAAC,CAAC1Y,IAAF,GAAS,IAAI4Y,YAAJ,CAAiBF,CAAC,CAACC,QAAnB,CAAT;AACA,CALD;;AAOA/Y,QAAQ,CAACkN,SAAT,GAAqB;AACpB+L,OAAK,EAAE,iBAAW;AACjB,QAAIH,CAAC,GAAG,IAAR,CADiB,CAEjB;AACA;;AACAA,KAAC,CAAC1Y,IAAF,GAAS,IAAI4Y,YAAJ,CAAiBF,CAAC,CAACC,QAAnB,CAAT;AACA,GANmB;AAQpBjY,QAAM,EAAE,gBAASoY,OAAT,EAAkB;AACzB,QAAIJ,CAAC,GAAG,IAAR,CADyB,CAEzB;;AACA,QAAIK,EAAE,GAAG,IAAIH,YAAJ,CAAiBF,CAAC,CAACC,QAAnB,CAAT;;AAEA,QAAIK,CAAC,GAAGrY,IAAI,CAACsY,GAAL,CAASH,OAAT,EAAkBI,OAAlB,CAA0B,EAA1B,CAAR;AACA,QAAIC,CAAC,GAAGxY,IAAI,CAACyY,GAAL,CAASN,OAAT,EAAkBI,OAAlB,CAA0B,EAA1B,CAAR;AAEAH,MAAE,CAAC,CAAD,CAAF,GAAQC,CAAR;AACAD,MAAE,CAAC,CAAD,CAAF,GAAQI,CAAR;AACAJ,MAAE,CAAC,CAAD,CAAF,GAAQ,CAACI,CAAT;AACAJ,MAAE,CAAC,CAAD,CAAF,GAAQC,CAAR,CAXyB,CAYzB;AACA;AACA;;AAEAN,KAAC,CAACW,QAAF,CAAWN,EAAX,EAAe,KAAf;AACA,WAAOL,CAAP;AACA,GA1BmB;AA4BpB7X,OAAK,EAAE,eAASiB,CAAT,EAAYE,CAAZ,EAAe;AACrB,QAAI0W,CAAC,GAAG,IAAR,CADqB,CAErB;;AACA,QAAIK,EAAE,GAAG,IAAIH,YAAJ,CAAiBF,CAAC,CAACC,QAAnB,CAAT;;AAEAI,MAAE,CAAC,CAAD,CAAF,GAAQjX,CAAR;AACAiX,MAAE,CAAC,CAAD,CAAF,GAAQ/W,CAAR,CANqB,CAOrB;AACA;AACA;;AAEA0W,KAAC,CAACW,QAAF,CAAWN,EAAX,EAAe,KAAf;AACA,WAAOL,CAAP;AACA,GAzCmB;AA2CpBY,MAAI,EAAE,cAASC,EAAT,EAAaC,EAAb,EAAiB;AACtB,QAAId,CAAC,GAAG,IAAR,CADsB,CAEtB;;AACA,QAAIK,EAAE,GAAG,IAAIH,YAAJ,CAAiBF,CAAC,CAACC,QAAnB,CAAT;;AAEAI,MAAE,CAAC,CAAD,CAAF,GAAQpY,IAAI,CAAC8Y,GAAL,CAASF,EAAT,CAAR;AACAR,MAAE,CAAC,CAAD,CAAF,GAAQpY,IAAI,CAAC8Y,GAAL,CAASD,EAAT,CAAR,CANsB,CAOtB;AACA;AACA;;AAEAd,KAAC,CAACW,QAAF,CAAWN,EAAX;AACA,WAAOL,CAAP;AACA,GAxDmB;AA0DpB5X,WAAS,EAAE,mBAASgB,CAAT,EAAYE,CAAZ,EAAe;AACzB,QAAI0W,CAAC,GAAG,IAAR,CADyB,CAEzB;;AACA,QAAIK,EAAE,GAAG,IAAIH,YAAJ,CAAiBF,CAAC,CAACC,QAAnB,CAAT;;AAEAI,MAAE,CAAC,CAAD,CAAF,GAAQjX,CAAC,IAAI,CAAb;AACAiX,MAAE,CAAC,CAAD,CAAF,GAAQ/W,CAAC,IAAI,CAAb,CANyB,CAOzB;AACA;AACA;;AAEA0W,KAAC,CAACW,QAAF,CAAWN,EAAX,EAAe,IAAf;AACA,WAAOL,CAAP;AACA,GAvEmB;AAyEpBW,UAAQ,EAAE,kBAASK,CAAT,EAAYC,MAAZ,EAAoB;AAC7B,QAAIjB,CAAC,GAAG,IAAR,CAD6B,CAE7B;;AACA,QAAIkB,KAAK,GAAG,IAAIhB,YAAJ,CAAiBF,CAAC,CAAC1Y,IAAnB,CAAZ,CAH6B,CAK7B;;;AACA,QAAI6Z,CAAC,GAAGF,MAAM,GAAGD,CAAH,GAAOE,KAArB;AACA,QAAIE,CAAC,GAAGH,MAAM,GAAGC,KAAH,GAAWF,CAAzB;;AAEA,SAAK,IAAIhc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC3B,UAAIqc,CAAC,GAAGpZ,IAAI,CAAC0L,KAAL,CAAW3O,CAAC,GAAG,CAAf,IAAoB,CAA5B;AACA,UAAIsc,CAAC,GAAGtc,CAAC,GAAG,CAAZ,CAF2B,CAG3B;;AACAgb,OAAC,CAAC1Y,IAAF,CAAOtC,CAAP,IAAYmc,CAAC,CAACE,CAAD,CAAD,GAAOD,CAAC,CAACE,CAAD,CAAR,GAAcH,CAAC,CAACE,CAAC,GAAG,CAAL,CAAD,GAAWD,CAAC,CAACE,CAAC,GAAG,CAAL,CAAtC;AACA;;AACDtB,KAAC,CAAC1Y,IAAF,CAAO,CAAP,KAAa6Z,CAAC,CAAC,CAAD,CAAd;AACAnB,KAAC,CAAC1Y,IAAF,CAAO,CAAP,KAAa6Z,CAAC,CAAC,CAAD,CAAd,CAhB6B,CAkB7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GApGmB;AAsGpB9Y,QAAM,EAAE,kBAAW;AAClB;AACA;AACA;AACA;AACA,QAAM6K,CAAC,GAAG,KAAK5L,IAAf;AACA,uBAAiB4L,CAAC,CAAC,CAAD,CAAlB,SAAyBA,CAAC,CAAC,CAAD,CAA1B,SAAiCA,CAAC,CAAC,CAAD,CAAlC,SAAyCA,CAAC,CAAC,CAAD,CAA1C,SAAiDA,CAAC,CAAC,CAAD,CAAlD,SAAyDA,CAAC,CAAC,CAAD,CAA1D;AACA,GA7GmB;AA+GpBqO,MAAI,EAAE,gBAAW;AAChB,WAAO,KAAKja,IAAL,CAAU,CAAV,CAAP;AACA,GAjHmB;AAmHpBka,MAAI,EAAE,gBAAW;AAChB,WAAO,KAAKla,IAAL,CAAU,CAAV,CAAP;AACA,GArHmB;AAuHpBD,YAAU,EAAE,oBAASoa,YAAT,EAAuB;AAClC;AACA;AACA;AACA;AACA;AACA,QAAMC,WAAW,GAAGC,8DAAS,CAACF,YAAD,CAA7B;AACA,SAAKG,YAAL,CAAkBF,WAAlB;AACA,GA/HmB;AAiIpBE,cAAY,EAAE,sBAASF,WAAT,EAAsB;AACnC,SAAKpa,IAAL,GAAY,CAACoa,WAAW,CAAC,CAAD,CAAZ,EAAiBA,WAAW,CAAC,CAAD,CAA5B,EAAiCA,WAAW,CAAC,CAAD,CAA5C,EAAiDA,WAAW,CAAC,CAAD,CAA5D,EAAiEA,WAAW,CAAC,CAAD,CAA5E,EAAiFA,WAAW,CAAC,CAAD,CAA5F,CAAZ;AACA;AAnImB,CAArB,C,CAsIA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEexa,uEAAf,E;;;;;;;;;;;;AC7NA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAM2a,QAAQ,GAAG,SAAXA,QAAW,GAAW;AAC3B,MAAM7B,CAAC,GAAG,IAAV,CAD2B,CAE3B;;AACAA,GAAC,CAACC,QAAF,GAAa,IAAIC,YAAJ,CAAiB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,CAA3C,EAA8C,CAA9C,CAAjB,CAAb;AACAF,GAAC,CAAC1Y,IAAF,GAAS,IAAI4Y,YAAJ,CAAiBF,CAAC,CAACC,QAAnB,CAAT;AACA,CALD;;AAOA4B,QAAQ,CAACzN,SAAT,GAAqB;AACpB+L,OAAK,EAAE,iBAAW;AACjB,QAAIH,CAAC,GAAG,IAAR;AACAA,KAAC,CAAC1Y,IAAF,CAAOwa,GAAP,CAAW9B,CAAC,CAACC,QAAb;AACA,GAJmB;AAMpB8B,SAAO,EAAE,iBAAS3B,OAAT,EAAkB;AAC1B,QAAIJ,CAAC,GAAG,IAAR;AACA,QAAIM,CAAC,GAAGrY,IAAI,CAACsY,GAAL,CAASH,OAAT,EAAkBI,OAAlB,CAA0B,EAA1B,CAAR;AACA,QAAIC,CAAC,GAAGxY,IAAI,CAACyY,GAAL,CAASN,OAAT,EAAkBI,OAAlB,CAA0B,EAA1B,CAAR,CAH0B,CAK1B;;AACA,QAAIH,EAAE,GAAG,IAAIH,YAAJ,CAAiBF,CAAC,CAACC,QAAnB,CAAT;;AACAI,MAAE,CAAC,CAAD,CAAF,GAAQC,CAAR;AACAD,MAAE,CAAC,CAAD,CAAF,GAAQI,CAAR;AACAJ,MAAE,CAAC,CAAD,CAAF,GAAQ,CAACI,CAAT;AACAJ,MAAE,CAAC,EAAD,CAAF,GAASC,CAAT,CAV0B,CAW1B;AACA;AACA;AACA;;AAEAN,KAAC,CAACW,QAAF,CAAWN,EAAX;AACA,WAAOL,CAAP;AACA,GAxBmB;AA0BpBgC,SAAO,EAAE,iBAAS5B,OAAT,EAAkB;AAC1B,QAAIJ,CAAC,GAAG,IAAR;AACA,QAAIM,CAAC,GAAGrY,IAAI,CAACsY,GAAL,CAASH,OAAT,EAAkBI,OAAlB,CAA0B,EAA1B,CAAR;AACA,QAAIC,CAAC,GAAGxY,IAAI,CAACyY,GAAL,CAASN,OAAT,EAAkBI,OAAlB,CAA0B,EAA1B,CAAR,CAH0B,CAK1B;;AACA,QAAIH,EAAE,GAAG,IAAIH,YAAJ,CAAiBF,CAAC,CAACC,QAAnB,CAAT;;AACAI,MAAE,CAAC,CAAD,CAAF,GAAQC,CAAR;AACAD,MAAE,CAAC,CAAD,CAAF,GAAQ,CAACI,CAAT;AACAJ,MAAE,CAAC,CAAD,CAAF,GAAQI,CAAR;AACAJ,MAAE,CAAC,EAAD,CAAF,GAASC,CAAT,CAV0B,CAW1B;AACA;AACA;AACA;;AAEAN,KAAC,CAACW,QAAF,CAAWN,EAAX;AACA,WAAOL,CAAP;AACA,GA5CmB;AA8CpBiC,SAAO,EAAE,iBAAS7B,OAAT,EAAkB;AAC1B,QAAIJ,CAAC,GAAG,IAAR;AACA,QAAIM,CAAC,GAAGrY,IAAI,CAACsY,GAAL,CAASH,OAAT,EAAkBI,OAAlB,CAA0B,EAA1B,CAAR;AACA,QAAIC,CAAC,GAAGxY,IAAI,CAACyY,GAAL,CAASN,OAAT,EAAkBI,OAAlB,CAA0B,EAA1B,CAAR,CAH0B,CAK1B;;AACA,QAAIH,EAAE,GAAG,IAAIH,YAAJ,CAAiBF,CAAC,CAACC,QAAnB,CAAT;;AACAI,MAAE,CAAC,CAAD,CAAF,GAAQC,CAAR;AACAD,MAAE,CAAC,CAAD,CAAF,GAAQI,CAAR;AACAJ,MAAE,CAAC,CAAD,CAAF,GAAQ,CAACI,CAAT;AACAJ,MAAE,CAAC,CAAD,CAAF,GAAQC,CAAR,CAV0B,CAW1B;AACA;AACA;AACA;;AAEAN,KAAC,CAACW,QAAF,CAAWN,EAAX;AACA,WAAOL,CAAP;AACA,GAhEmB;AAkEpB7X,OAAK,EAAE,eAASiB,CAAT,EAAYE,CAAZ,EAAe;AACrB,QAAI0W,CAAC,GAAG,IAAR,CADqB,CAErB;;AACA,QAAIK,EAAE,GAAG,IAAIH,YAAJ,CAAiBF,CAAC,CAACC,QAAnB,CAAT;;AACAI,MAAE,CAAC,CAAD,CAAF,GAAQjX,CAAR;AACAiX,MAAE,CAAC,CAAD,CAAF,GAAQ/W,CAAR,CALqB,CAMrB;AACA;AACA;AACA;;AAEA0W,KAAC,CAACW,QAAF,CAAWN,EAAX;AACA,WAAOL,CAAP;AACA,GA/EmB;AAiFpBY,MAAI,EAAE,cAASC,EAAT,EAAaC,EAAb,EAAiB;AACtB,QAAId,CAAC,GAAG,IAAR,CADsB,CAEtB;;AACA,QAAIK,EAAE,GAAG,IAAIH,YAAJ,CAAiBF,CAAC,CAACC,QAAnB,CAAT;;AACAI,MAAE,CAAC,CAAD,CAAF,GAAQpY,IAAI,CAAC8Y,GAAL,CAASD,EAAT,KAAgB,CAAxB;AACAT,MAAE,CAAC,CAAD,CAAF,GAAQpY,IAAI,CAAC8Y,GAAL,CAASF,EAAT,KAAgB,CAAxB,CALsB,CAMtB;AACA;AACA;AACA;;AAEAb,KAAC,CAACW,QAAF,CAAWN,EAAX;AACA,WAAOL,CAAP;AACA,GA9FmB;AAgGpB5X,WAAS,EAAE,mBAASgB,CAAT,EAAYE,CAAZ,EAAe4Y,CAAf,EAAkB;AAC5B,QAAIlC,CAAC,GAAG,IAAR,CAD4B,CAE5B;;AACA,QAAIK,EAAE,GAAG,IAAIH,YAAJ,CAAiBF,CAAC,CAACC,QAAnB,CAAT;;AACAI,MAAE,CAAC,EAAD,CAAF,GAASjX,CAAC,IAAI,CAAd;AACAiX,MAAE,CAAC,EAAD,CAAF,GAAS/W,CAAC,IAAI,CAAd;AACA+W,MAAE,CAAC,EAAD,CAAF,GAAS6B,CAAC,IAAI,CAAd,CAN4B,CAO5B;AACA;AACA;AACA;;AAEAlC,KAAC,CAACW,QAAF,CAAWN,EAAX;AACA,WAAO,IAAP;AACA,GA9GmB;AAgHpBM,UAAQ,EAAE,kBAASK,CAAT,EAAY;AACrB,QAAIhB,CAAC,GAAG,IAAR,CADqB,CAErB;;AACA,QAAImC,EAAE,GAAG,IAAIjC,YAAJ,CAAiBF,CAAC,CAAC1Y,IAAnB,CAAT;;AAEA,SAAK,IAAItC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AAC5B,UAAMsc,CAAC,GAAGrZ,IAAI,CAAC0L,KAAL,CAAW3O,CAAC,GAAG,CAAf,IAAoB,CAA9B;AACA,UAAMod,CAAC,GAAGpd,CAAC,GAAG,CAAd;;AACA,UAAI,CAACA,CAAC,GAAG,CAAL,IAAU,CAAd,EAAiB;AAChBgb,SAAC,CAAC1Y,IAAF,CAAOtC,CAAP,IAAYmd,EAAE,CAACb,CAAD,CAAF,GAAQN,CAAC,CAACoB,CAAD,CAAT,GAAeD,EAAE,CAACb,CAAC,GAAG,CAAL,CAAF,GAAYN,CAAC,CAACoB,CAAC,GAAG,CAAL,CAA5B,GAAsCD,EAAE,CAACb,CAAC,GAAG,CAAL,CAAF,GAAYN,CAAC,CAACoB,CAAC,GAAG,CAAL,CAA/D;;AACA,YAAIpd,CAAC,GAAG,EAAR,EAAY;AACXgb,WAAC,CAAC1Y,IAAF,CAAOtC,CAAP,KAAagc,CAAC,CAAChc,CAAD,CAAd;AACA;AACD,OALD,MAKO;AACNgb,SAAC,CAAC1Y,IAAF,CAAOtC,CAAP,IAAY,CAAZ;AACA;AACD;;AACDgb,KAAC,CAAC1Y,IAAF,CAAO,EAAP,IAAa,CAAb,CAjBqB,CAmBrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAnJmB;AAqJpBe,QAAM,EAAE,kBAAW;AAClB,yBAAmB,KAAKf,IAAL,CAAU2R,IAAV,CAAe,GAAf,CAAnB;AACA,GAvJmB;AAyJpBsI,MAAI,EAAE,gBAAW;AAChB,WAAO,KAAKja,IAAL,CAAU,EAAV,CAAP;AACA,GA3JmB;AA6JpBka,MAAI,EAAE,gBAAW;AAChB,WAAO,KAAKla,IAAL,CAAU,EAAV,CAAP;AACA,GA/JmB;AAiKpB+a,MAAI,EAAE,gBAAW;AAChB,WAAO,KAAK/a,IAAL,CAAU,EAAV,CAAP;AACA,GAnKmB;AAqKpBD,YAAU,EAAE,oBAASoa,YAAT,EAAuB;AAClC,QAAMC,WAAW,GAAGC,8DAAS,CAACF,YAAD,CAA7B;AACA,SAAKG,YAAL,CAAkBF,WAAlB;AACA,GAxKmB;AA0KpBE,cAAY,EAAE,sBAASF,WAAT,EAAsB;AACnC,QAAM1B,CAAC,GAAG,IAAV,CADmC,CAEnC;AACA;;AACA,QAAI0B,WAAW,CAAC/W,MAAZ,KAAuB,CAA3B,EAA8B;AAC7BqV,OAAC,CAAC5X,SAAF,CAAYka,KAAZ,CAAkBtC,CAAlB,EAAqB0B,WAArB;AACA,KAFD,MAEO;AACN1B,OAAC,CAAC1Y,IAAF,GAAS,IAAI4Y,YAAJ,CAAiBwB,WAAjB,CAAT;AACA;AACD;AAnLmB,CAArB;AAsLeG,uEAAf,E;;;;;;;;;;;;AC3MA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAIU,eAAe,GAAG,SAAlBA,eAAkB,CAAS5W,GAAT,EAAc;AACnC,MAAItJ,IAAI,GAAG,IAAX;AAEAsJ,KAAG,GAAGA,GAAG,IAAI;AACb;AACA;AAFA;AAGEtJ,MAAI,CAACmH,QAAL,GAAgBmC,GAAG,CAACnC,QAAJ,IAAgB,CAAjC,EAAqC;AACpCnH,MAAI,CAAC+G,CAAL,GAASuC,GAAG,CAACvC,CAAJ,IAAS,CADnB,EAEC/G,IAAI,CAACiH,CAAL,GAASqC,GAAG,CAACrC,CAAJ,IAAS,CAFnB,EAGCjH,IAAI,CAACoH,MAAL,GAAckC,GAAG,CAAClC,MAAJ,IAAc,CAH7B,EAICpH,IAAI,CAACqH,MAAL,GAAciC,GAAG,CAACjC,MAAJ,IAAc,CAJ7B,EAKCrH,IAAI,CAACmgB,OAAL,GAAe7W,GAAG,CAAC6W,OAAJ,IAAe,CAL/B,EAMCngB,IAAI,CAACogB,OAAL,GAAe9W,GAAG,CAAC8W,OAAJ,IAAe,CAN/B;AAODpgB,MAAI,CAACqgB,MAAL,GAAc/W,GAAG,CAAC+W,MAAJ,IAAc,EAA5B;AAEA;AACA;;AACArgB,MAAI,CAACsgB,gBAAL,GAAwB,EAAxB;AAEA;AACA;;AACA,MAAIC,OAAO,GAAG,IAAI1b,iDAAJ,EAAd;;AACAtG,SAAO,CAACC,GAAR,CAAY+hB,OAAZ;AAEA;AACA;;AACAvgB,MAAI,CAACwgB,QAAL,GAAgB,UAASC,KAAT,EAAgB;AAC/BzgB,QAAI,CAACqgB,MAAL,CAAYjY,IAAZ,CAAiBqY,KAAjB;AACA,GAFD;;AAIAzgB,MAAI,CAAC0gB,SAAL,GAAiB,UAASD,KAAT,EAAgB;AAChCzgB,QAAI,CAACqgB,MAAL,GAAcrgB,IAAI,CAACqgB,MAAL,CAAYM,OAAZ,CAAoBF,KAApB,CAAd;AACA,GAFD;;AAIAzgB,MAAI,CAAC4gB,MAAL,GAAc,UAASnT,QAAT,EAAmB;AAChC8S,WAAO,CAACzC,KAAR;;AACAyC,WAAO,CAACxa,SAAR,CAAkB/F,IAAI,CAAC+G,CAAvB,EAA0B/G,IAAI,CAACiH,CAA/B;;AACAsZ,WAAO,CAACza,KAAR,CAAc9F,IAAI,CAACoH,MAAnB,EAA2BpH,IAAI,CAACqH,MAAhC;;AACAkZ,WAAO,CAAC5a,MAAR,CAAekb,kDAAS,CAACC,SAAV,CAAoB9gB,IAAI,CAACmH,QAAzB,CAAf;;AAEAnH,QAAI,CAACsgB,gBAAL,GAAwB,EAAxB;;AACA,SAAK,IAAI3d,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK0d,MAAL,CAAY/X,MAAhC,EAAwC3F,CAAC,EAAzC,EAA6C;AAC5C,UAAIoe,KAAK,GAAGC,cAAc,CAAChhB,IAAI,CAACqgB,MAAL,CAAY1d,CAAZ,CAAD,CAA1B;AACA3C,UAAI,CAACsgB,gBAAL,CAAsBlY,IAAtB,CAA2B2Y,KAA3B;AACA;;AACD,QAAItT,QAAJ,EAAcA,QAAQ,CAACzN,IAAI,CAACsgB,gBAAN,CAAR;AACd,WAAOtgB,IAAI,CAACsgB,gBAAZ;AACA,GAbD;AAeA;AACA;;;AACA,WAASU,cAAT,CAAwBC,KAAxB,EAA+B;AAC9B;AACF;AACA;AACA;AACA;AACA;AACA;AAEE,QAAIC,QAAQ,GAAGD,KAAK,CAAC,CAAD,CAAL,GAAWjhB,IAAI,CAACmgB,OAA/B;;AACA,QAAIgB,QAAQ,GAAGF,KAAK,CAAC,CAAD,CAAL,GAAWjhB,IAAI,CAACogB,OAA/B;;AAEA,QAAIgB,KAAK,GAAGF,QAAQ,GAAGX,OAAO,CAACtb,IAAR,CAAa,CAAb,CAAX,GAA6Bkc,QAAQ,GAAGZ,OAAO,CAACtb,IAAR,CAAa,CAAb,CAAxC,GAA0Dsb,OAAO,CAACtb,IAAR,CAAa,CAAb,CAAtE;;AACA,QAAIoc,KAAK,GAAGH,QAAQ,GAAGX,OAAO,CAACtb,IAAR,CAAa,CAAb,CAAX,GAA6Bkc,QAAQ,GAAGZ,OAAO,CAACtb,IAAR,CAAa,CAAb,CAAxC,GAA0Dsb,OAAO,CAACtb,IAAR,CAAa,CAAb,CAAtE;;AACAmc,SAAK,IAAIphB,IAAI,CAACmgB,OAAd;AACAkB,SAAK,IAAIrhB,IAAI,CAACogB,OAAd;AAEA,WAAO,CAACgB,KAAD,EAAQC,KAAR,CAAP;AACA;AACD,CAtED;;AAwEenB,8EAAf,E;;;;;;;;;;;;;;;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEMoB,a;;gBAAAA,a,QAEO,E;;gBAFPA,a,QAGO,E;;gBAHPA,a,kBAIiB,G;;gBAJjBA,a,uBAKsB,G;;gBALtBA,a,SAoBQ,UAACva,CAAD,EAAIE,CAAJ,EAAU;AACtB,SAAO,IAAIsa,iDAAJ,CAAaD,aAAa,CAACE,OAAd,CAAsB,GAAtB,EAA2Bza,CAA3B,CAAb,EAA4Cua,aAAa,CAACE,OAAd,CAAsB,GAAtB,EAA2Bva,CAA3B,CAA5C,CAAP;AACA,C;;gBAtBIqa,a,WAwBU,YAAM;AACpB,OAAK,IAAI3e,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2e,aAAa,CAACG,YAAlC,EAAgD,EAAE9e,CAAlD,EAAqD;AACpD,QAAIA,CAAC,KAAK2e,aAAa,CAACG,YAAd,GAA6B,CAAvC,EAA0C;AACzCH,mBAAa,CAACI,EAAd,CAAiBtZ,IAAjB,CAAsBkZ,aAAa,CAACI,EAAd,CAAiB,CAAjB,CAAtB;AACAJ,mBAAa,CAACK,EAAd,CAAiBvZ,IAAjB,CAAsBkZ,aAAa,CAACK,EAAd,CAAiB,CAAjB,CAAtB;AACA;;AACDL,iBAAa,CAACI,EAAd,CAAiBtZ,IAAjB,CAAsBxC,IAAI,CAACgc,MAAL,KAAgB,GAAtC;AACAN,iBAAa,CAACK,EAAd,CAAiBvZ,IAAjB,CAAsBxC,IAAI,CAACgc,MAAL,KAAgB,GAAtC;AACA;AACD,C;;gBAjCIN,a,WAoCU,UAACxC,CAAD,EAAIC,CAAJ,EAAOgB,CAAP,EAAa;AAC3B,SAAOjB,CAAC,IAAI,IAAIiB,CAAR,CAAD,GAAchB,CAAC,GAAGgB,CAAzB;AACA,C;;gBAtCIuB,a,aAwCY,UAACO,IAAD,EAAO3Z,KAAP,EAAiB;AACjC,MAAIoZ,aAAa,CAACI,EAAd,CAAiBpZ,MAAjB,IAA2B,CAA/B,EAAkCgZ,aAAa,CAACQ,KAAd;AAElC,MAAMC,IAAI,GAAGF,IAAI,KAAK,GAAT,GAAeP,aAAa,CAACI,EAA7B,GAAkCJ,aAAa,CAACK,EAA7D;AAEAzZ,OAAK,GAAGA,KAAK,GAAGoZ,aAAa,CAACG,YAA9B;AACA,MAAM1B,CAAC,GAAG7X,KAAK,GAAG,CAAC,CAACA,KAApB;AACA,MAAM8Z,IAAI,GAAGjC,CAAC,GAAGA,CAAJ,IAAS,IAAI,IAAIA,CAAjB,CAAb;AAEA,MAAMkC,GAAG,GAAG,CAAC,CAAC/Z,KAAF,GAAUoZ,aAAa,CAACY,iBAApC;AACA,MAAMC,GAAG,GAAIF,GAAG,GAAG,CAAP,GAAYX,aAAa,CAACY,iBAAtC;AAEA,SAAOZ,aAAa,CAACc,KAAd,CAAoBL,IAAI,CAACE,GAAD,CAAxB,EAA+BF,IAAI,CAACI,GAAD,CAAnC,EAA0CH,IAA1C,CAAP;AACA,C;;AAGaV,4EAAf,E;;;;;;;;;;;;AC1EA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEMC,Q;AACL,oBAAYxa,CAAZ,EAAeE,CAAf,EAAkB;AACjB,SAAKF,CAAL,GAASA,CAAC,IAAI,CAAd;AACA,SAAKE,CAAL,GAASA,CAAC,IAAI,CAAd;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;SACCwI,G,GAAA,aAAI4S,CAAJ,EAAO;AACN,SAAKtb,CAAL,IAAUsb,CAAC,CAACtb,CAAZ;AACA,SAAKE,CAAL,IAAUob,CAAC,CAACpb,CAAZ;AACA,WAAO,IAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;SACCqb,G,GAAA,aAAID,CAAJ,EAAO;AACN,SAAKtb,CAAL,IAAUsb,CAAC,CAACtb,CAAZ;AACA,SAAKE,CAAL,IAAUob,CAAC,CAACpb,CAAZ;AACA,WAAO,IAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;;SACCsb,I,GAAA,cAAKF,CAAL,EAAQ;AACP,QAAItb,CAAC,GAAG,KAAKA,CAAL,GAASsb,CAAC,CAACtb,CAAnB;AACA,QAAIE,CAAC,GAAG,KAAKA,CAAL,GAASob,CAAC,CAACpb,CAAnB;AACA,WAAOrB,IAAI,CAAC4c,IAAL,CAAUzb,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAAtB,CAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;SACCwb,I,GAAA,cAAKrE,CAAL,EAAQ;AACP,SAAKrX,CAAL,IAAUqX,CAAV;AACA,SAAKnX,CAAL,IAAUmX,CAAV;AACA,WAAO,IAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;SACCsE,G,GAAA,aAAItE,CAAJ,EAAO;AACN,SAAKrX,CAAL,IAAUqX,CAAV;AACA,SAAKnX,CAAL,IAAUmX,CAAV;AACA,WAAO,IAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;SACCuE,K,GAAA,eAAMvE,CAAN,EAAS;AACR,QAAIO,CAAC,GAAG,KAAKrW,MAAL,EAAR;;AACA,QAAIqW,CAAC,GAAGP,CAAR,EAAW;AACV,WAAKqE,IAAL,CAAUrE,CAAC,GAAGO,CAAd;AACA;;AACD,WAAO,IAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;;;SACCrW,M,GAAA,kBAAS;AACR,WAAO1C,IAAI,CAAC4c,IAAL,CAAU,KAAKzb,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAKE,CAAL,GAAS,KAAKA,CAA1C,CAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;SACC2b,S,GAAA,qBAAY;AACX,QAAIC,KAAK,GAAG,IAAI,KAAKva,MAAL,EAAhB;AACA,WAAO,KAAKma,IAAL,CAAUI,KAAV,CAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;SACCC,K,GAAA,iBAAQ;AACP,WAAO,IAAIvB,QAAJ,CAAa,KAAKxa,CAAlB,EAAqB,KAAKE,CAA1B,CAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;WACQ8b,c,GAAP,wBAAsBlS,CAAtB,EAAyB;AACxB,QAAImS,KAAK,GAAGnC,kDAAS,CAACC,SAAV,CAAoBjQ,CAApB,CAAZ;AACA,WAAO,IAAI0Q,QAAJ,CAAa3b,IAAI,CAACsY,GAAL,CAAS8E,KAAT,CAAb,EAA8Bpd,IAAI,CAACyY,GAAL,CAAS2E,KAAT,CAA9B,CAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;WACQpB,M,GAAP,gBAAcqB,eAAd,EAA+B;AAC9B,QAAIC,GAAG,GAAGD,eAAe,IAAI,IAA7B;AACA,WAAO1B,QAAQ,CAACwB,cAAT,CAAwBlC,kDAAS,CAACe,MAAV,CAAiB,CAAjB,EAAoB,GAApB,EAAyBsB,GAAzB,CAAxB,CAAP;AACA,G;;;;;AAGa3B,uEAAf,E;;;;;;;;;;;;AChMA;AAAA;AAAO,SAASjC,SAAT,CAAmBF,YAAnB,EAAiC;AACvC;AACA;AACA;AACA,SAAOA,YAAY,CACjBrb,KADK,CACC,cADD,EACiB,CADjB,EAELuC,OAFK,CAEG,QAFH,EAEa,EAFb,EAGL/B,KAHK,CAGC,GAHD,EAIL0D,GAJK,CAIDN,MAJC,CAAP;AAKA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;IAEqBwb,M;;;AACpB,oBAAqB;AAAA;;AAAA,sCAANnb,IAAM;AAANA,UAAM;AAAA;;AACpB,8DAASA,IAAT;AACA,QAAIsB,GAAG,GAAGyF,SAAS,IAAIA,SAAS,CAACzG,MAAV,GAAmB,CAAhC,GAAoCy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K,CAACmC,KAAN,CAAYmnB,GAAZ,EAAiBA,GAAG,GAAG,CAAvB,EAA0BjX,IAA1B,CAA+B,MAA/B,CAAf;AACA,QAAM0jB,KAAK,GAAG/1B,KAAK,CAACmC,KAAN,CAAYmnB,GAAG,GAAG,CAAlB,CAAd;AACAtpB,SAAK,GAAG61B,MAAM,CAACzsB,MAAP,CAAc0sB,MAAd,EAAsBC,KAAtB,CAAR;AACA,GALD;AAMA,SAAO/1B,KAAK,CAACqS,IAAN,CAAW,GAAX,CAAP;AACA,C;;;;;;;;;;;;;AC7JD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;CAGA;;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAI2jB,KAAK,GAAG,CACX;AACCxzB,GAAC,EAAE,aA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","file":"build.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./1-build/300x250/Ad.js\");\n","import { h, render } from 'preact'\n\nimport { Core } from 'ad-control'\nimport { Preflight } from '@common/js/Preflight.js'\nimport { Control } from \"@common/js/Control.js\";\n\nimport Build from './components/Build/index.jsx'\n\n// import { Main, MainBorder } from \"@common/js/Build.js\";\n// import { Animation } from \"@common/js/Animation.js\";\n\nexport class Ad {\n\t// called from index.html onImpression()\n\tstatic launch(binaryAssets) {\n\t\tconsole.log('Ad.launch()')\n\t\tCore.init(binaryAssets)\n\t\t\t.then(() => Preflight.init())\n\t\t\t.then(() => Core.loadDynamic())\n\t\t\t.then(() => Ad.prepare())\n\t\t\t.catch(err => {\n\t\t\t\tthrow err\n\t\t\t})\n\t}\n\n\tstatic prepare() {\n\t\tconsole.log('Ad.prepare()')\n\t\tControl.preMarkup()\n\n\t\trender(<Build />, document.getElementById('main'))\n\t\t// View.main = new Main()\n\t\t// View.mainBorder = new MainBorder()\n\n\t\tControl.postMarkup()\n\n\n\t\t// Animation.start()\n\t}\n}\nwindow.Ad = Ad\n","import { h, render, Component } from \"preact\";\n\nclass Build extends Component {\n\tcomponentDidMount = () => {\n\t\tsetInterval(() => {\n\t\t\tthis.setState({\n\t\t\t\ttime: new Date().toLocaleTimeString()\n\t\t\t})\n\t\t}, 1000)\n\t}\n\trender() {\n\t\treturn <span>{this.state.time}</span>\n\t}\n}\n\nexport default Build","module.exports = 'template_font'","import '@common/fonts/template_font.woff'\nimport { ImageManager } from 'ad-control'\n\nexport default function AdData() {\n\tvar self = this\n\n\t/**\n\t\tEXTRACT JSON DATA\n\t\tPrepare dynamic data here.\n\t */\n\n\t/**\n\t\tDYNAMIC IMAGES\n\t\tDynamically loaded images need to be in their own directory, like \"dynamic_images/\".\n\n\t\tThen, you need to add your dynamic image-paths to the load-queue, so that when\n\t\tthe secondary preload happens, these assets will get loaded. For example:\n\n\t\tself.theImageName = ImageManager.addToLoad(adParams.imagesPath + 'sample.jpg');\n\t */\n\n\tself.fonts = {\n\t\tprimary: 'template_font'\n\t}\n\n\tself.colors = {}\n\n\t// Store svg markup for use in all UISvg instances, reduces duplicate code across builds.  See UISvg.\n\tself.svg = {}\n}\n","// import { Gesture, GestureEvent } from 'ad-events'\n\nexport class Control {\n\tstatic preMarkup() {\n\t\tconsole.log('Control.preMarkup()')\n\t\tdocument.getElementById('main').addEventListener('onclick', this.handleClick)\n\t}\n\n\tstatic postMarkup() {\n\t\tconsole.log('Control.postMarkup()')\n\t\t// listen for default exit\n\t\t// Gesture.add(View.main, GestureEvent.CLICK, Control.handleClick)\n\t\tglobal.removePreloader()\n\t}\n\n\tstatic handleClick(event) {\n\t\tNetwork.exit(clickTag)\n\t}\n}\n","import AdData from '@common/js/AdData.js'\nimport { ImageManager } from 'ad-control'\n/*-- Red.Imports.head.start --*/\n/*-- Red.Imports.head.end --*/\n\n/**\n\tPRE-FLIGHT\t\t\n\n\tResources that are shared by all the sizes should be loaded here. Boilerplate components \n\tlike {@link Velvet} & {@link DateManager} can be configured. Runtime JS loads. Etc.\n\n\tOnce resolved, control moves to AdData.\n*/\nexport class Preflight {\n\tstatic init() {\n\t\tconsole.log('Preflight.init()')\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet promises = [\n\t\t\t\t// this.loadDynamicJS('define-your-case-id')\n\t\t\t]\n\n\t\t\tPromise.all(promises)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.addPreloadedImages()\n\t\t\t\t\tthis.prepareAdData()\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tresolve()\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\treject(err)\n\t\t\t\t})\n\t\t})\n\t}\n\n\tstatic addPreloadedImages() {\n\t\tconsole.log('Preflight.addPreloadedImages()')\n\t\tImageManager.addToDictionary(assets.preloadedImages)\n\t}\n\n\tstatic prepareAdData() {\n\t\tconsole.log('Preflight.prepareAdData()')\n\n\t\tglobal.adData = new AdData()\n\t}\n\n\t/**\n\t\tMethod for loading dynamic, compiled ES6 modules at runtime. This should be threaded into \n\t\tPreflight.init()'s promise chain, as needed.\n\n\t\tYou must:\n\t\t\t- define THIS_CASE__ID\n\t\t\t- replace THIS_CASE__ASSET_PATH with a string\n\t\t\t- handle the implementation of the loaded module.\n\t*/\n\tstatic loadDynamicJS(id) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tswitch (id) {\n\t\t\t\t/*\n\t\t\t\tcase THIS_CASE__ID: // ex: '300x250_Endframe'\n\t\t\t\t\timport('THIS_CASE__ASSET_PATH') // ex: '@common/dynamic_js/300x250_Endframe.js'\n\t\t\t\t\t\t.then(module => {\n\t\t\t\t\t\t\t// example implementation of loaded ES6 module\n\t\t\t\t\t\t\tglobal[module.default.name] = module.default\n\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(err => reject(err))\n\t\t\t\t\tbreak\n\t\t\t\t*/\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log(`Common.loadDynamicJS() has no import case for: ${id}`)\n\t\t\t\t\tresolve()\n\t\t\t}\n\t\t})\n\t}\n}\n","export { default as CssManager } from './lib/CssManager.js'\nexport { default as ExpandableDcs } from './lib/ExpandableDcs.js'\n\nimport * as Core from './lib/Core.js'\nimport * as Expandable from './lib/Expandable.js'\nimport * as ImageManager from './lib/ImageManager.js'\nimport * as SheetManager from './lib/SheetManager.js'\nexport { Core, Expandable, ImageManager, SheetManager }\n","/**\n * @class Core\n * @desc\n * \tBoilerplate logic that is attempted for all ad templates happens here. The build of an ad should not need to affect this scope.\n * <codeblock>\n * import { Core } from 'ad-control'\n * </codeblock>\n */\nimport { Device } from 'ad-external'\nimport CssManager from './CssManager'\nimport * as ImageManager from './ImageManager'\n\n/**\n * @memberOf Core\n * @method init\n * @param {(Image|SVGElement)[]} binaryAssets\n * \tOptionally passed in Images/SVGElements containing src and data on base64 images\n * @desc\n * \tThis is the first step in the build file. The init() returns a Promise, which allows for chaining of .then() methods.\n * \tFor synchronous actions, such as declaring AdData or FtData, simply wrap it in an anonymous function. For asynchronous\n * \tactions, such a inititalizing something with a created callback, this will need to be wrapped in a returned callback.\n * \tThis will ensure that the chain will wait for the previous .then() to be fulfilled before moving on.\n * @example\n * Core.init(binaryAssets)\n * \t.then(function() {\n * \t\tglobal.adData = new AdData();\n * \t})\n * \t.then(function() {\n * \t\treturn new Promise((resolve, reject) => {\n * \t\t\t// pass the resolve as the completed callback\n * \t\t\tSomeCustomClass.init(resolve)\n * \t\t})\n * \t})\n * \t.then(Core.loadDynamic)\n * \t.then(Control.prepareBuild)\n */\nexport function init(binaryAssets) {\n\tconsole.log('Core.init()')\n\treturn new Promise((resolve, reject) => {\n\t\tlet promises = []\n\n\t\t// device\n\t\tDevice.init()\n\n\t\t// css\n\t\tCssManager.init()\n\n\t\t// fba payload\n\t\tImageManager.addToDictionary(binaryAssets)\n\n\t\t// async\n\t\tPromise.all(promises)\n\t\t\t.then(() => {\n\t\t\t\tresolve()\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\treject(err)\n\t\t\t})\n\t})\n}\n\n/**\n * @memberOf Core\n * @method loadDynamic\n * @desc\n * \tThis is the last step before preparing the build. The loadDynamic() loads all of the images that have been added\n * \tto the ImageLoader. After this method is called from the .then() promise chain, Control.prepareBuild can be\n * \tcalled as the entire prepare process is now complete when its Promise is fulfilled.\n * @example\n * Core.init(fbaContent)\n * \t.then(function() {\n * \t\tglobal.adData = new AdData();\n * \t})\n * \t.then(Core.loadDynamic)\n * \t.then(Control.prepareBuild)\n */\nexport function loadDynamic() {\n\tconsole.log('Core.loadDynamic()')\n\treturn new Promise((resolve, reject) => {\n\t\tconsole.log('\\t Core load Image Queue')\n\t\tImageManager.load(resolve, global.failAd)\n\t})\n}\n","/**\n * @class CssManager\n * @desc\n * This is a css-interface class, which is intended to proxy all css applications. The goal is to accept css in any format( see below ),\n * standardize the keys, conform the values, and rapidly apply the style to the target, specific to the {@link Device} running the ad.<br><br>\n * Generally, you should not need to use this class directly. {@link Styles.setCss} will handle it for you.<br><br>\n * However, if your css is not being correctly managed, the first step in debugging is to use {@link CssManager.setDebugFilter}. Pass the id,\n * as a string, of the misbehaving element to see the exact format of the css being applied to it. You can then locate the problem style, try\n * applying it in the browser inspector. Using this approach you should be able to determine what the correction/exception needs to be.<br><br>\n * Additional debugging output can be switched on using {@link CssManager.setDebugLevel}. Pass a level( 0 is off, 1 is less, 2 is more ). There will be\n * a lot of output, but it is organized and consistent. You should be able to see exactly what is happening to your declarations. <br><br>\n * <b>Types:</b><br>\n * <table>\n * \t<tr><td>CssObject</td>\t<td>the literal \"css\" object that is passed to {@link Markup} as containerData.css on the creation of the element</td></tr>\n * \t<tr><td>CssStyleString</td>\t<td>a literal string of any number of css styles, passed to {@link Markup} as containerData.styles on the creation of the element</td></tr>\n * \t<tr><td>CssDeclaration</td>\t<td>either an object like \"{ position: 'absolute' }\" or a string like \"background-color: #ff0000;\"</td></tr>\n * \t<tr><td>CssKey</td>\t<td>ex: in \"position: absolute;\" the css-key would be \"position\"</td></tr>\n * \t<tr><td>CssValue</td>\t<td>ex: in \"position: absolute;\" the css-value would be \"absolute\"</td></tr>\n * \t<tr><td>CssList</td>\t<td>a standardized list of objects with Device-specific keys and corresponding values</td></tr>\n * </table>\n * <br>\n * <b>Formats:</b><br>\n * <table>\n * \t<tr><td>Hyphen</td>\t<td>ex: 'border-left', '-webkit-clip-path', '-moz-filter'</td></tr>\n * \t<tr><td>Camel</td>\t<td>ex: 'borderLeft', 'webkitClipPath', 'moxFilter'</td></tr>\n * \t<tr><td>Alt</td>\t<td>this is to handle arbitrary exceptions, like the \"bgImage\" key on container-data css objects</td></tr>\n * </table>\n * <br>\n * <b>Key Prefixes:</b><br>\n * <table>\n * \t<tr><td>Browser</td>\t<td>ex: \"-webkit-clip-path\" or \"webkitClipPath\"</td></tr>\n * \t<tr><td>Standard</td>\t<td>ex: \"clip-path\" or \"clipPath\"</td></tr>\n * </table>\n * <codeblock>\n * import { CssManager } from 'ad-control'\n * </codeblock>\n */\nimport { Device } from 'ad-external'\nimport { Matrix2D } from 'ad-geom'\n\nclass CssManager {\n\tstatic debug_level1 = false\n\tstatic debug_level2 = false\n\tstatic filter = undefined\n\tstatic debug_element = undefined\n\tstatic debug_css_list = undefined\n\n\t/**\n\t * @memberOf CssManager\n\t * @method init\n\t * @desc\n\t * \tCalled one time per life-cycle. Creates the browser key-dictionary.\n\t */\n\tstatic init = function() {\n\t\tconsole.log('CssManager.init()')\n\t\tthis.generateBrowserKeyDictionary()\n\t}\n\n\t// -- DEBUGGING -------------------------------------------------\n\n\t/**\n\t * @memberOf CssManager\n\t * @method setDebugLevel\n\t * @param {number} level\n\t * \tcontrols debug verbosity for all css processing, default is 0, max is 2\n\t * @desc\n\t * \tUse this to control the degree of logging that happens in this class. Debugging is off by default, or pass 0 or null to disable.\n\t */\n\tstatic setDebugLevel = function(level) {\n\t\tconst C = this\n\t\tswitch (parseInt(level)) {\n\t\t\tcase 1:\n\t\t\t\tC.debug_level1 = true\n\t\t\t\tC.debug_level2 = false\n\t\t\t\tbreak\n\t\t\tcase 2:\n\t\t\t\tC.debug_level1 = true\n\t\t\t\tC.debug_level2 = true\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tC.debug_level1 = false\n\t\t\t\tC.debug_level2 = false\n\t\t\t\tbreak\n\t\t}\n\t}\n\n\t/**\n\t * @memberOf CssManager\n\t * @method setDebugFilter\n\t * @param {string} filter\n\t * \tthe filter string: An element.id, a css-key, or a css-value. For example, if you want to only see css being applied\n\t * \tto particular element, pass its id to this function. Conversely, if you only want to see css with a particular\n\t * \tkey or value, pass that string.\n\t * @desc\n\t * \tUse this control to filter which <CssMananger>.apply() calls get output to the console.\n\t */\n\tstatic setDebugFilter = function(filter) {\n\t\tconst C = this\n\t\tconsole.log('CssManager.setDebugFilter(),', filter)\n\t\tC.filter = filter\n\t\tC.debug_level1 = true\n\t}\n\tstatic ifDebug = function(debugLevel) {\n\t\tconst C = this\n\t\tif (!C.filter) return C[debugLevel]\n\t\telse if (C.passDebugFilter() && C[debugLevel]) return true\n\t}\n\tstatic passDebugFilter = function() {\n\t\tconst C = this\n\t\tif (C.debug_element) if (C.debug_element.id.indexOf(C.filter) > -1) return true\n\t\tif (C.debug_css_list)\n\t\t\tfor (var i in C.debug_css_list) {\n\t\t\t\tif (i.indexOf(C.filter) > -1) return true\n\t\t\t\telse if (String(C.debug_css_list[i]).indexOf(C.filter) > -1) return true\n\t\t\t}\n\t\treturn false\n\t}\n\n\t// -- KEY DICTIONARY -------------------------------------------------\n\t// This is called once and prepares a dictionary with standard,\n\t// browser-agnostic keys which map to device-specific keys.\n\tstatic generateBrowserKeyDictionary = function() {\n\t\tconst C = this\n\t\tconsole.log('CssManager.generateBrowserKeyDictionary()')\n\t\tC.deviceKeyDict = {}\n\n\t\tvar styles = document.createElement('div').style\n\n\t\tfor (var key in styles) {\n\t\t\t// get prefix\n\t\t\tvar prefix = C.getPrefix(key)\n\n\t\t\t// key without prefix\n\t\t\tvar standardKey = C.standardizeKey(key)\n\t\t\t//console.log( 'Device.element.style:', key );\n\t\t\t//console.log( ' - standard key:', standardKey );\n\n\t\t\t// handle exceptions per browser\n\t\t\tswitch (Device.browser) {\n\t\t\t\tcase 'safari':\n\t\t\t\t\t// use \"webkit\" prefix, if that's what was returned\n\t\t\t\t\tif (prefix == 'webkit') {\n\t\t\t\t\t\tC.deviceKeyDict[standardKey] = C.prependPrefix('webkit', standardKey)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// standard\n\t\t\t\t\t\t// exclude keys that have a \"webkit\"-equivalent\n\t\t\t\t\t\tif (!(C.prependPrefix('webkit', standardKey) in styles)) {\n\t\t\t\t\t\t\tC.deviceKeyDict[standardKey] = standardKey\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\tcase 'firefox':\n\t\t\t\t\tvar mozKey = C.prependPrefix('Moz', standardKey)\n\t\t\t\t\tvar webkitKey = C.prependPrefix('Webkit', standardKey)\n\n\t\t\t\t\t// use the no-prefix version, if it exists\n\t\t\t\t\tif (standardKey in styles) {\n\t\t\t\t\t\tC.deviceKeyDict[standardKey] = standardKey\n\t\t\t\t\t} else if (prefix == 'moz') {\n\t\t\t\t\t\t// use \"Moz\" if a \"webkit\"-equivalent exists\n\t\t\t\t\t\tif (C.camelateKey('webkit-' + standardKey) in styles) {\n\t\t\t\t\t\t\tC.deviceKeyDict[standardKey] = mozKey\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (prefix == 'webkit') {\n\t\t\t\t\t\t// note: in FF, there seem to be equivalents for all \"webkit\" vs. \"Webkit\" properites, so we use \"Webkit\" to match \"Moz\" convention....yah, nevermind.\n\t\t\t\t\t\t// use \"webkit\" if no \"Moz\"-equivalent exists\n\t\t\t\t\t\tif (!(mozKey in styles)) {\n\t\t\t\t\t\t\tC.deviceKeyDict[standardKey] = webkitKey\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\tcase 'chrome':\n\t\t\t\tcase 'ie':\n\t\t\t\tdefault:\n\t\t\t\t\t// use the no-prefix version, if it exists\n\t\t\t\t\tif (standardKey in styles) {\n\t\t\t\t\t\tC.deviceKeyDict[standardKey] = standardKey\n\t\t\t\t\t} else if (prefix) {\n\t\t\t\t\t\t// otherwise it's a \"prefix\"-only type of property\n\t\t\t\t\t\tC.deviceKeyDict[standardKey] = C.prependPrefix(prefix, standardKey)\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tconsole.log(' KEY DICTIONARY:', C.deviceKeyDict)\n\t}\n\n\t// -- APPLYING CSS -----------------------------------------------\n\tstatic apply = function(element, cssList) {\n\t\tconst C = this\n\t\tC.debug_element = element\n\t\tC.debug_css_list = cssList\n\t\tif (C.ifDebug('debug_level1')) console.log('  CssManager.apply()', element.id)\n\n\t\t// creates a collection of only the transforms\n\t\tvar transformList = {}\n\n\t\tfor (var key in cssList) {\n\t\t\t// has a non-destructive transform update, as generated by keyFormatExceptions()\n\t\t\tif (key.match(/^transform\\(/)) transformList[key] = cssList[key]\n\t\t\telse {\n\t\t\t\t// standard css-key\n\t\t\t\tif (C.ifDebug('debug_level1')) console.log('   ' + key + ': ' + cssList[key] + ';')\n\t\t\t\telement.style[C.getDeviceKey(key)] = cssList[key]\n\t\t\t}\n\t\t}\n\n\t\t// will apply all transforms at once for correct calculation\n\t\tC.applyTransforms(element, transformList)\n\n\t\tif (C.ifDebug('debug_level1')) console.log('\\n\\n')\n\t\tC.debug_element = null\n\t\tC.debug_css_list = null\n\t}\n\n\t// -- CONFORMING CSS SYNTAX -----------------------------------------------\n\t// These are protected methods, meant to be called by Styles...although\n\t// they could certainly be utilized by other core modules.\n\tstatic conformCssObject = function(cssObject, debugElement) {\n\t\tconst C = this\n\t\tC.debug_element = debugElement\n\t\tif (C.ifDebug('debug_level1')) console.log('CssManager.conformCssObject()', cssObject)\n\t\tvar cssList = {}\n\t\tif (cssObject) {\n\t\t\tfor (var key in cssObject) {\n\t\t\t\tif (C.ifDebug('debug_level2')) console.log('  PARSE( key: ' + key + ', value: ' + cssObject[key] + ' )')\n\t\t\t\tvar declarations = C.conformKeyValue(key, cssObject[key])\n\t\t\t\tfor (var i in declarations) {\n\t\t\t\t\tif (C.ifDebug('debug_level2')) console.log('    CONFORMED DECLARATION:', declarations[i])\n\t\t\t\t\tcssList[declarations[i][0]] = declarations[i][1]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tC.debug_element = null\n\t\treturn cssList\n\t}\n\tstatic conformCssString = function(cssString, debugElement) {\n\t\tconst C = this\n\t\tC.debug_element = debugElement\n\t\tif (C.ifDebug('debug_level1')) console.log(' CssManager.conformCssString()')\n\t\tvar cssList = {}\n\t\tif (cssString) {\n\t\t\tvar declarations = cssString.split(/\\s*;\\s*/)\n\t\t\tfor (var key in declarations) {\n\t\t\t\tif (declarations[key]) {\n\t\t\t\t\tvar declarationParts = declarations[key].split(/:(.+)?/)\n\t\t\t\t\tif (C.ifDebug('debug_level2')) console.log('  PARSE( key: ' + declarationParts[0] + ', value: ' + declarationParts[1] + ' )')\n\t\t\t\t\tvar conformedDeclarations = C.conformKeyValue(declarationParts[0], declarationParts[1])\n\t\t\t\t\tfor (var i in conformedDeclarations) {\n\t\t\t\t\t\tif (C.ifDebug('debug_level2')) console.log('    CONFORMED DECLARATION:', conformedDeclarations[i])\n\t\t\t\t\t\tcssList[conformedDeclarations[i][0]] = conformedDeclarations[i][1]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tC.debug_element = null\n\t\treturn cssList\n\t}\n\tstatic conformCssKeyValue = function(key, value) {\n\t\tconst C = this\n\t\tif (C.ifDebug('debug_level1')) console.log(' CssManager.conformCssKeyValue()')\n\t\tvar cssObject = {}\n\t\tcssObject[key] = value\n\t\treturn C.conformCssObject(cssObject)\n\t}\n\n\t// -- CSS TRANSFORMATIONS -----------------------------------------------\n\tstatic applyTransforms = function(element, value) {\n\t\tconst C = this\n\t\tif (C.ifDebug('debug_level1')) console.log('    - CssManager.applyTransforms(), ', value)\n\t\tvar matrix2D = new Matrix2D()\n\n\t\t// existing transform\n\t\tvar existingTransform = element.style[C.getDeviceKey('transform')]\n\t\tvar matrixMatch = existingTransform.match(/matrix[^\\)]+\\)/)\n\t\tif (matrixMatch) {\n\t\t\tmatrix2D.setFromCss(matrixMatch[0])\n\t\t\tif (C.ifDebug('debug_level2')) console.log('       existing matrix:', matrix2D.data)\n\t\t}\n\n\t\tif ('transforms' in element) var transforms = element.transforms\n\t\telse {\n\t\t\tvar transforms = {\n\t\t\t\ttx: 0,\n\t\t\t\tty: 0,\n\t\t\t\trz: 0,\n\t\t\t\tsx: 1,\n\t\t\t\tsy: 1\n\t\t\t}\n\t\t}\n\n\t\tvar changed = {}\n\t\tfor (var key in value) {\n\t\t\tvar transformMethod = key.match(/\\(\\s([^\\s]+)/)[1]\n\t\t\tchanged[transformMethod] = value[key]\n\t\t}\n\n\t\t// Order matters: rotate, scale, translate\n\n\t\t// first translate the x and y back to zero\n\t\tif (changed.tx != undefined) {\n\t\t\tmatrix2D.data[2] = 0\n\t\t}\n\t\tif (changed.ty != undefined) {\n\t\t\tmatrix2D.data[5] = 0\n\t\t}\n\t\tif (changed.rz != undefined) {\n\t\t\tvar reverse = -transforms.rz\n\t\t\tmatrix2D.rotate(reverse * (Math.PI / 180))\n\t\t\tmatrix2D.rotate(changed.rz * (Math.PI / 180))\n\t\t\ttransforms.rz = changed.rz\n\t\t}\n\t\tif (changed.sx != undefined) {\n\t\t\tvar reverse = 1 / transforms.sx\n\t\t\tmatrix2D.scale(reverse, 1)\n\t\t\tmatrix2D.scale(changed.sx, 1)\n\t\t\ttransforms.sx = changed.sx\n\t\t}\n\t\tif (changed.sy != undefined) {\n\t\t\tvar reverse = 1 / transforms.sy\n\t\t\tmatrix2D.scale(1, reverse)\n\t\t\tmatrix2D.scale(1, changed.sy)\n\t\t\ttransforms.sy = changed.sy\n\t\t}\n\n\t\tif (changed.tx != undefined) {\n\t\t\tmatrix2D.translate(changed.tx, 0)\n\t\t\ttransforms.tx = changed.tx\n\t\t}\n\t\tif (changed.ty != undefined) {\n\t\t\tmatrix2D.translate(0, changed.ty)\n\t\t\ttransforms.ty = changed.ty\n\t\t}\n\n\t\t// store transforms\n\t\telement.transforms = transforms\n\t\tif (C.ifDebug('debug_level2')) console.log('       updated matrix:', matrix2D.data)\n\n\t\t// apply css matrix\n\t\telement.style[C.getDeviceKey('transform')] = matrix2D.getCss()\n\t}\n\n\t// -- KEY MAPPING -----------------------------------------------\n\tstatic conformKeyValue = function(key, value) {\n\t\tconst C = this\n\t\tkey = String(key).trim()\n\t\tvalue = String(value).trim()\n\t\tvar keyAsStandard = C.standardizeKey(key)\n\t\treturn C.conformValue(keyAsStandard, value)\n\t}\n\tstatic hasPrefix = function(key) {\n\t\tconst C = this\n\t\treturn key.search(C.matchPrefixRegex()) > -1\n\t}\n\tstatic getPrefix = function(key) {\n\t\tconst C = this\n\t\tvar match = key.match(C.matchPrefixRegex())\n\t\treturn match ? match[1].replace(/-/g, '').toLowerCase() : null\n\t}\n\tstatic stripPrefix = function(key) {\n\t\tconst C = this\n\t\tvar keyless = key.replace(C.matchPrefixRegex(), '')\n\t\treturn keyless.charAt(0).toLowerCase() + keyless.slice(1)\n\t}\n\tstatic getDeviceKey = function(key) {\n\t\tconst C = this\n\t\treturn key in C.deviceKeyDict ? C.deviceKeyDict[key] : key\n\t}\n\tstatic prependPrefix = function(prefix, key) {\n\t\treturn (\n\t\t\tprefix +\n\t\t\tkey.replace(/^(.)/, function(str) {\n\t\t\t\treturn str.charAt(0).toUpperCase()\n\t\t\t})\n\t\t)\n\t}\n\n\t// converts any syntax of css-key to a consistent camelCase format\n\tstatic standardizeKey = function(key) {\n\t\tconst C = this\n\t\tkey = C.stripPrefix(key)\n\n\t\t// check if key is an exception\n\t\tif (key in C.keyFormatExceptions()) key = C.keyFormatExceptions()[key]\n\t\telse\n\t\t\t// or procedurally convert to camel\n\t\t\tkey = C.camelateKey(key)\n\n\t\tif (C.ifDebug('debug_level2')) console.log('    - result: \"' + key + '\"')\n\t\treturn key\n\t}\n\tstatic camelateKey = function(key) {\n\t\tkey = key.replace(/-(.)/g, function(str) {\n\t\t\treturn str.charAt(1).toUpperCase()\n\t\t})\n\t\treturn key\n\t}\n\t/* This dictionary handles INTERNAL differences between how css-keys are written in the build on the css-objects and how they must be written \n\t\tas valid CSS. Primarily, these exceptions are the arguments of the transform function, translate(), rotate(), and scale(), which need to be further \n\t\thandled during value conformation. The exceptions could also include any semantic differences that might ease production confusion.\n\n\t\t** Do not confuse this with browser-key differences!! ex: transform vs. -ms-transform. Browser-keys are handled by <CssManager>.generateBrowserKeyDictionary() */\n\tstatic keyFormatExceptions = function() {\n\t\treturn {\n\t\t\tx: 'transform( tx )',\n\t\t\ttranslateX: 'transform( tx )',\n\t\t\ty: 'transform( ty )',\n\t\t\ttranslateY: 'transform( ty )',\n\t\t\trotate: 'transform( rz )',\n\t\t\trotation: 'transform( rz )',\n\t\t\tscaleX: 'transform( sx )',\n\t\t\tscaleY: 'transform( sy )',\n\t\t\tscale: 'transform( sx ),transform( sy )'\n\t\t}\n\t}\n\n\t// -- VALUE PARSING -----------------------------------------------\n\t// takes a single css param, arg or func, and conforms it to _adlib standard */\n\tstatic conformValue = function(key, value) {\n\t\tconst C = this\n\t\tvar conformedValues = []\n\t\tvar conformedValue\n\n\t\t// look for numeric values\n\t\tvar hasMultipleValues = value.match(/\\s/)\n\t\tvar numericValue = value.match(C.matchNumberRegex())\n\t\tif (!hasMultipleValues && numericValue) {\n\t\t\tif (C.ifDebug('debug_level2')) console.log('   conform value as number')\n\t\t\tconformedValue = Number(numericValue[0])\n\t\t\t/* get existing unit */\n\t\t\tvar unitMatch = value.match(/[^0-9\\.]+$/)\n\t\t\tif (unitMatch) conformedValue += unitMatch[0]\n\t\t\telse\n\t\t\t\t/* assume default unit */\n\t\t\t\tswitch (key) {\n\t\t\t\t\tcase 'top':\n\t\t\t\t\tcase 'right':\n\t\t\t\t\tcase 'bottom':\n\t\t\t\t\tcase 'left':\n\t\t\t\t\tcase 'width':\n\t\t\t\t\tcase 'height':\n\t\t\t\t\tcase 'fontSize':\n\t\t\t\t\tcase 'lineHeight':\n\t\t\t\t\tcase 'padding':\n\t\t\t\t\tcase 'margin':\n\t\t\t\t\tcase 'marginRight':\n\t\t\t\t\tcase 'marginLeft':\n\t\t\t\t\tcase 'marginTop':\n\t\t\t\t\tcase 'marginBottom':\n\t\t\t\t\tcase 'borderRadius':\n\t\t\t\t\tcase 'borderWidth':\n\t\t\t\t\tcase 'letterSpacing':\n\t\t\t\t\t\tconformedValue += 'px'\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t} else if (key == 'backgroundImage') {\n\t\t\t// background images - allows for either a stand-alone URL, or proper css like 'url( \"http://example.com/image.jpg\" );'\n\t\t\tif (C.ifDebug('debug_level2')) console.log('   conform value as background image')\n\t\t\tvalue = value.replace(/^url\\(\\s*['\"]*/, '').replace(/['\"]*\\s*\\)$/, '')\n\t\t\tconformedValue = 'url( \"' + value + '\" )'\n\t\t} else if (key == 'transform') {\n\t\t\t// transform-functions - should be split apart so a single matrix function can be written\n\t\t\t//\tfaster to just specify the transform exactly via css-object keys: x, y, rotate, scaleX, scaleY\n\t\t\t// && Device.browser == 'ie') {\n\t\t\tif (C.ifDebug('debug_level2')) console.log('   convert \"transform\" functions to individual transforms')\n\t\t\tvar functionRegex = /([a-z0-9]+)\\(([^\\)]+)\\)/gi\n\t\t\tlet params\n\t\t\twhile ((params = functionRegex.exec(value))) {\n\t\t\t\tvar args = params[2]\n\t\t\t\t\t.replace(/\\s/g, '')\n\t\t\t\t\t.split(',')\n\t\t\t\t\t.map(function(value, index, array) {\n\t\t\t\t\t\treturn Number(value.match(C.matchNumberRegex())[0])\n\t\t\t\t\t})\n\t\t\t\tswitch (params[1]) {\n\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\tconformedValues.push(['transform( tx )', args[0]])\n\t\t\t\t\t\tconformedValues.push(['transform( ty )', args[1]])\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'translateX':\n\t\t\t\t\t\tconformedValues.push(['transform( tx )', args[0]])\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'translateY':\n\t\t\t\t\t\tconformedValues.push(['transform( ty )', args[0]])\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\tconformedValues.push(['transform( rz )', args[0]])\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'scale':\n\t\t\t\t\t\tconformedValues.push(['transform( sx )', args[0]])\n\t\t\t\t\t\tconformedValues.push(['transform( sy )', args[1]])\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'scaleX':\n\t\t\t\t\t\tconformedValues.push(['transform( sx )', args[0]])\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'scaleY':\n\t\t\t\t\t\tconformedValues.push(['transform( sy )', args[0]])\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// pass through\n\t\t\tif (C.ifDebug('debug_level2')) console.log('   conform value as string')\n\t\t\tconformedValue = value\n\t\t}\n\n\t\t// create style pair\n\t\tif (conformedValue != undefined) {\n\t\t\tif (C.ifDebug('debug_level2')) console.log('    - result: \"' + conformedValue + '\"')\n\n\t\t\t// split the key will alyways have 1 value, except for scale which has to split to scaleX and scaleY\n\t\t\tvar splitKeys = key.split(/\\,/)\n\n\t\t\tfor (var i = 0; i < splitKeys.length; i++) {\n\t\t\t\tconformedValues.push([splitKeys[i], conformedValue])\n\t\t\t}\n\t\t}\n\n\t\treturn conformedValues\n\t}\n\n\tstatic matchNumberRegex = function() {\n\t\treturn /^[+-]?[0-9]*\\.?[0-9]+/\n\t}\n\tstatic matchPrefixRegex = function() {\n\t\treturn /^-*(moz-*|webkit-*|ms-*|o-)/i\n\t}\n}\n\nexport default CssManager\n","/**\n * @class Expandable\n * @description\n * This class controls the expanding and collapsing of expandable units. The animation relys on the properties\n * set in the index. Therefore, the animation has be removed from the build file and handled internally.\n * This class can be extended with {@link ExpandableDcs} when units are used in DoubleClick.\n * <codeblock>\n * import { Expandable } from 'ad-control'\n * </codeblock>\n */\nimport { GestureEvent } from 'ad-events'\n\nlet _arg\nlet _afterInitExpanded = true\nlet _hasUserInteracted = false\n\nlet extend = {\n\tinit: () => {},\n\tcollapse: gestureEvent => {\n\t\thandle.collapseStart()\n\t},\n\texpand: gestureEvent => {\n\t\thandle.expandStart()\n\t},\n\tcollapseComplete: () => {\n\t\thandle.collapseComplete()\n\t},\n\texpandComplete: () => {\n\t\thandle.expandComplete()\n\t}\n}\n\nconst handle = {\n\texpandStart: event => {\n\t\tfireCallback('expandStart')\n\t\tanimateExpand()\n\t},\n\texpandComplete: event => {\n\t\tfireCallback('expandComplete')\n\t\t_hasUserInteracted = _afterInitExpanded\n\t\t_afterInitExpanded = true\n\t},\n\tcollapseStart: event => {\n\t\tanimateCollapse()\n\t\tfireCallback('collapseStart')\n\t\t_hasUserInteracted = true\n\t},\n\tcollapseComplete: event => {\n\t\tfireCallback('collapseComplete')\n\t\t_hasUserInteracted = true\n\t}\n}\n\n/**\n * @memberOf Expandable\n * @method init\n * @desc\n * \tThis method initializes the class, linking all callbacks and the target being set. This should\n * \tbe called Control.postMarkup\n * @example\n * Expandable.init ({\n * \t// required\n * \ttarget: View.expanded,\n *\n * \t// optional methods called when that event happens\n * \texpandStart: Control.handleExpandStart,\n * \texpandComplete: Control.handleExpandComplete,\n * \tcollapseStart: Control.handleCollapseStart,\n * \tcollapseComplete: Control.handleCollapseFinish,\n *\n * \t// optionally you can add time values for expanding/collapsing\n * \texpandTime: 0.3,\n * \tcollapseTime: 0.3\n * })\n */\nexport function init(arg) {\n\t_arg = arg || {}\n\tdefaultFalsey(_arg, 'expandTime')\n\tdefaultFalsey(_arg, 'collapseTime')\n\n\tif (_arg.extend) {\n\t\textend = _arg.extend\n\t\textend.init(handle)\n\t}\n\n\tif (adParams.expandable.expanded) {\n\t\t_afterInitExpanded = false\n\t\texpand()\n\t} else {\n\t\tanimateCollapse(true)\n\t}\n}\n\nfunction defaultFalsey(obj, key) {\n\tobj[key] = obj[key] >= 0 ? obj[key] : 0.5\n}\n\n/**\n * @memberOf Expandable\n * @method collapse\n * @desc\n * \tCollapses the View.expand container.\n * @example\n * \tExpandable.collapse()\n */\nexport function collapse(gestureEvent) {\n\tGestureEvent.stop(gestureEvent)\n\textend.collapse(gestureEvent)\n}\n\n/**\n * @memberOf Expandable\n * @method expand\n * @desc\n * \tExpands the View.expand container.\n * @example\n * \tExpandable.expand()\n */\nexport function expand(gestureEvent) {\n\tGestureEvent.stop(gestureEvent)\n\textend.expand(gestureEvent)\n}\n\n/**\n * @memberOf Expandable\n * @method hasUserInteracted\n * @returns {boolean}\n * \tIndicates if the ad has been interacted by the user\n * @example\n * \tconsole.log(Expandable.hasUserInteracted())\n */\nexport function hasUserInteracted() {\n\treturn _hasUserInteracted\n}\n\nfunction animateExpand() {\n\tconst param = adParams.expandable\n\tTweenLite.to(_arg.target, _arg.expandTime, {\n\t\tx: param.expandedX,\n\t\ty: param.expandedY,\n\t\twidth: adParams.adWidth,\n\t\theight: adParams.adHeight,\n\t\tonComplete: extend.expandComplete\n\t})\n}\n\nfunction animateCollapse(isInit) {\n\tconst time = isInit ? 0 : _arg.collapseTime\n\tconst param = adParams.expandable\n\tTweenLite.to(_arg.target, time, {\n\t\tx: param.collapsedX,\n\t\ty: param.collapsedY,\n\t\twidth: param.collapsedWidth,\n\t\theight: param.collapsedHeight,\n\t\tonComplete: isInit ? undefined : extend.collapseComplete\n\t})\n}\n\nfunction fireCallback(name) {\n\t;(_arg[name] || function() {}).call()\n}\n","/**\n * @class ExpandableDcs\n * @description\n * This is and extension of {@link Expandable} when units are used in DoubleClick. The only difference in the\n * init() method is to pass in this class to the Expandable.init()\n * <codeblock>\n * import { ExpandableDcs } from 'ad-control'\n *\n * Expandable.init ({\n * \ttarget : View.expanded,\n * \texpandStart: Control.handleExpandStart,\n * \texpandComplete: Control.handleExpandComplete,\n * \tcollapseStart: Control.handleCollapseStart,\n * \tcollapseComplete: Control.handleCollapseFinish,\n *\n * \textend: ExpandableDcs\n * })\n * </codeblock>\n */\n\nexport default {\n\tinit: handle => {\n\t\tEnabler.addEventListener(studio.events.StudioEvent.EXPAND_START, handle.expandStart)\n\t\tEnabler.addEventListener(studio.events.StudioEvent.EXPAND_FINISH, handle.expandComplete)\n\t\tEnabler.addEventListener(studio.events.StudioEvent.COLLAPSE_START, handle.collapseStart)\n\t\tEnabler.addEventListener(studio.events.StudioEvent.COLLAPSE_FINISH, handle.collapseComplete)\n\n\t\tif (adParams.expandable.expanded) {\n\t\t\tEnabler.setStartExpanded(true)\n\t\t}\n\t},\n\tcollapse: gestureEvent => {\n\t\tconsole.log('DCS > collapse()')\n\t\tEnabler.requestCollapse()\n\t\tif (gestureEvent) Enabler.reportManualClose()\n\t},\n\texpand: gestureEvent => {\n\t\tconsole.log('DCS > expand()')\n\t\tEnabler.requestExpand()\n\t},\n\tcollapseComplete: () => {\n\t\tconsole.log('DCS > collapseComplete()')\n\t\tEnabler.finishCollapse()\n\t},\n\texpandComplete: () => {\n\t\tconsole.log('DCS > expandComplete()')\n\t\tEnabler.finishExpand()\n\t}\n}\n","/**\n * @class ImageManager\n * @desc\n * This module is used to add/load/manage all Images.\n * <codeblock>\n * import { ImageManager } from 'ad-control'\n * </codeblock>\n */\nimport { ImageLoader, LoaderUtils } from 'ad-load'\n\nlet _pendingImages = []\nlet _pendingCanvasImages = []\nlet _pendingLoaders = []\nlet _nextLoadCallback = []\nlet _imageManagerLoader\nlet _dict = {}\nlet _isLoading = false\nlet _loaderCount = 0\nlet _onComplete = function() {}\nlet _onFail = function() {}\n\n/* ------------------------------------------------------------------------------------------------------------- */\n// PUBLIC METHODS\n\n/**\n * @memberOf ImageManager\n * @method addToLoad\n * @param {string} file\n * \tA filename or path\n * @param {object} arg\n * \tOptional. Determines if the image should be loaded with a crossOrigin:'anonymous' for images used in a canvas. An object with one boolean key: forCanvas\n * @desc\n * \tAdd an image file-path to be loaded.\n * @example\n * // Add an image from the \"images/\" folder\n * ImageManager.addToLoad(adParams.imagesPath + 'sample.png')\n *\n * // Add an image full path, and get the result key back\n * var sampleImageId = ImageManager.addToLoad('http://some/full/file/path/sample.png')\n *\n * // Add an image for use with CanvasDrawer, and get the result key back\n * // NOTE: The object must be there or images will error when used in Canvas\n * var sampleImageId = ImageManager.addToLoad('http://some/full/file/path/sample.png', { forCanvas:true })\n *\n * @returns {string}\n * \tAn \"imageId\" which can be used to get an image by its id, see: {@link ImageManager.get}\n */\nexport function addToLoad(file, arg) {\n\tvar id = LoaderUtils.getFileName(file)\n\n\tif (!available(id, true)) {\n\t\tvar forCanvas = arg && arg.forCanvas == true\n\t\t//console.log( 'ImageManager.addToLoad(', id, ') forCanvas:', forCanvas )\n\t\tforCanvas ? _pendingCanvasImages.push(file) : _pendingImages.push(file)\n\t}\n\n\treturn id\n}\n\n/**\n * @memberOf ImageManager\n * @method addLoader\n * @param {Loader} loader\n * \tA {@link Loader}.\n * @desc\n * \tAdd a Loader to loaded along with any other queued image requests.\n * @example\n * ImageManager.addLoader(\n * \tnew Loader(\n * \t\tassets.images, {\n * \t\t\tname: 'imageLocalLoader',\n * \t\t\tprepend: adParams.imagesPath\n * \t\t}\n * \t)\n * )\n */\nexport function addLoader(loader) {\n\t_pendingLoaders.push(loader)\n}\n\n/**\n * @memberOf ImageManager\n * @method get\n * @param {string} imageId\n * \tA String id of an Image\n * @returns {Image}\n * \tReturns the <<b></b>img> that was created when the requested image was loaded in.\n * @example\n * \tImageManager.get('sample')\n */\nexport function get(imageId) {\n\tif (_dict[imageId]) return _dict[imageId]\n\telse throw new Error(\"ImageManager : No image named '\" + imageId + \"' has been loaded\")\n}\n\n/**\n * @memberOf ImageManager\n * @method available\n * @param {string} imageId\n * \tA String id of an Image\n * @returns {boolean}\n * \tIf an image by the given imageID has been loaded\n * @example\n * \tImageManager.available('sample')\n */\nexport function available(imageId, internal) {\n\tvar exists = _dict[imageId] != undefined\n\n\t// if the image we are trying to load already exists\n\tif (exists) {\n\t\t// if this is an internal use - as in, called from I.addToLoad() or addToDictionary()\n\t\tif (internal)\n\t\t\tconsole.log(\n\t\t\t\t'ImageManager.available() -->',\n\t\t\t\ttrue,\n\t\t\t\t': Duplicate Image Id \"' + imageId + '\". One or more images loading in have the same name. Each Image needs a unique file name.'\n\t\t\t)\n\t} else {\n\t\t// if the image doesn't already exist, we only want to know that if it is not from an internal ImageManager method\n\t\t// for example: checking to see if an image exists from build.js\n\t\tif (!internal) console.log('ImageManager.available() -->', false, \": No image named '\" + imageId + \"' has been loaded\")\n\t}\n\n\treturn exists\n}\n\n/**\n * @memberOf ImageManager\n * @method load\n * @param {function} callback\n * \tCallback to execute when all images are loaded.\n * @param {function} onFail\n * \tOptional onFail callback - if not specified a failed load will cause the ad to failover.\n * @desc\n * \tExecutes load queue, which, on success, will yield all of the requested images available with {@link ImageManager.get}\n */\n\nexport function load(callback, onFail) {\n\t_onFail = onFail || global.failAd\n\n\tif (_isLoading) {\n\t\t// set up a wait for the first one to finish\n\t\t_nextLoadCallback.push(callback)\n\t} else {\n\t\t_onComplete = [].concat(callback)\n\t\t_nextLoadCallback = []\n\t\tconst currentPendingImages = _pendingImages.slice()\n\t\t_pendingImages = []\n\n\t\tconst imgLoads = currentPendingImages.map(img => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tnew ImageLoader(img, {\n\t\t\t\t\tonComplete: event => {\n\t\t\t\t\t\tresolve(event.dataRaw)\n\t\t\t\t\t},\n\t\t\t\t\tonFail: reject\n\t\t\t\t}).load()\n\t\t\t})\n\t\t})\n\n\t\tconst currentPendingCanvasImages = _pendingCanvasImages.slice()\n\t\t_pendingCanvasImages = []\n\n\t\tconst canvasImgLoads = currentPendingCanvasImages.map(canvasImg => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tnew ImageLoader(canvasImg, {\n\t\t\t\t\tonComplete: event => resolve(event.dataRaw),\n\t\t\t\t\tonFail: reject,\n\t\t\t\t\tcrossOrigin: 'anonymous'\n\t\t\t\t}).load()\n\t\t\t})\n\t\t})\n\n\t\tconst addedLoaderPromises = _pendingLoaders.map(loader => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst _onComplete = loader.onComplete\n\t\t\t\tconst _onFail = loader.onFail\n\n\t\t\t\tloader.onComplete = function(event) {\n\t\t\t\t\t_onComplete && _onComplete(event)\n\t\t\t\t\tresolve(event.dataRaw)\n\t\t\t\t}\n\n\t\t\t\tloader.onFail = function(event) {\n\t\t\t\t\t_onFail && _onFail(event)\n\t\t\t\t\treject(event)\n\t\t\t\t}\n\n\t\t\t\tloader.load()\n\t\t\t})\n\t\t})\n\n\t\t_isLoading = true\n\t\tPromise.all(imgLoads.concat(canvasImgLoads).concat(addedLoaderPromises))\n\t\t\t.then(imgDataArr => {\n\t\t\t\t_isLoading = false\n\t\t\t\taddToDictionary(imgDataArr)\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\t_isLoading = false\n\t\t\t\t_onFail.call()\n\t\t\t})\n\t}\n}\n\nexport function addFbaImages(target) {\n\tif (target) addToDictionary(target.getAllContentRaw())\n}\n\n/**\n * @memberOf ImageManager\n * @method addToDictionary\n * @desc\n * \tAllows images to be added to the ImageManager's dictionary from external classes. <b>This is not part of the load process, and can only add <i>loaded</i> image content.</b>\n */\nexport function addToDictionary(content) {\n\tfor (var i = 0; i < content.length; i++) {\n\t\tif (content[i] instanceof Image || content[i] instanceof SVGElement) {\n\t\t\tvar img = content[i]\n\t\t\tif (!available(content[i].id, true)) _dict[img.id] = img\n\t\t}\n\t}\n\n\tconsole.log('ImageManager:', _dict)\n\n\tfor (var i = 0; i < _onComplete.length; i++) {\n\t\t_onComplete[i].call()\n\t}\n\n\tif (_nextLoadCallback.length > 0) {\n\t\tload(_nextLoadCallback)\n\t}\n}\n","/**\n * @class SheetManager\n * @desc\n * Class manages the creation of &lt;style> tags and the addition/removal of classes.\n * <codeblock>\n * import { SheetManager } from 'ad-control'\n * </codeblock>\n */\nimport { Markup } from 'ad-view'\n\n/**\n * @memberOf SheetManager\n * @method createGlobalNode\n * @param {string} nodeId\n * \tthe id of the &lt;style> node written to the &lt;head>\n * @param {string} styles\n * \tselector/CSS string pair as separate parameters, following 'selector', 'css string' pattern,\n * \tor a self-contained CSS style string including selectors, like '.myClass{ color: blue; }'\n * @desc\n * \tCreate a new CSS node (class, tag, etc) DEFINITION with submitted styles with selector/CSS string\n * \tpair or a self-contained CSS string including selectors. \n\n * @example\n * // selector/CSS string pair\n * SheetManager.createGlobalNode ( 'myFirstStyle', \n * \t'.class-a', 'position:absolute; width:inherit;'\n * )\n *\n * // or add multiple class declarations to the same node\n * SheetManager.createGlobalNode ( 'mySecondStyle', \n * \t'.class-b', 'position:absolute;',\n * \t'.class-b-top', 'width:inherit; height:inherit;'\n * )\n *\n * // or have mulitple classes share the same logic\n * SheetManager.createGlobalNode ( 'myThirdStyle', \n * \t'.class-c, .class-d', 'position:absolute;'\n * )\n * \n * // add style to a tag globally\n * SheetManager.createGlobalNode ( 'myFourthStyle', \n * \t'h1', 'position:absolute;'\n * )\n * \n * // self-contained CSS string\n * var myCssString = '.myClass, h1 { color: blue; margin: 10px; }';\n * SheetManager.createGlobalNode( 'myFifthStyle', myCssString );\n */\nexport function createGlobalNode(nodeId, styles) {\n\tif (document.getElementById(nodeId)) {\n\t\treturn\n\t}\n\n\tvar style = document.createElement('style')\n\tstyle.type = 'text/css'\n\tstyle.id = nodeId\n\n\t// if only two parameters, assuming styles is CSS string\n\t// else process as selector/style pair\n\tvar str = arguments.length === 2 ? styles : ''\n\n\tif (arguments.length > 2) {\n\t\tfor (var i = 0; i < arguments.length - 1; i += 2) {\n\t\t\t// strip out all the white space\n\t\t\tvar names = arguments[i + 1].replace(/\\s*/g, '')\n\n\t\t\tstr += names\n\t\t\tstr += ' { ' + (arguments[i + 2] || '') + ' }\\n'\n\t\t}\n\t}\n\n\tstyle.innerHTML = str\n\tdocument.getElementsByTagName('head')[0].appendChild(style)\n}\n\n/**\n * @memberOf SheetManager\n * @method addClass\n * @param {string|element} target\n * \tid or element to which css style should be added\n * @param {string} className\n * \tcss class association to be added to this target\n * @desc\n * \tAdd a CSS class ASSOCIATION to the targeted element.\n */\nexport function addClass(target, className) {\n\tvar element = Markup.getElement(target)\n\n\t// IE does not support multiple classes being added as arguments, so must loop\n\tfor (var i = 0; i < arguments.length - 1; i++) {\n\t\telement.classList.add(arguments[i + 1])\n\t}\n}\n\n/**\n * @memberOf SheetManager\n * @method removeClass\n * @param {string|element} target\n * \tid or element from which css style should be removed\n * @param {string} className\n * \tcss class association to be removed from this target\n * @desc\n * \tRemoves a CSS class ASSOCIATION from the targeted element.\n */\nexport function removeClass(target, className) {\n\tvar element = Markup.getElement(target)\n\telement.classList.remove(className)\n}\n","export { default as Gesture } from './lib/Gesture'\nexport { default as GestureBase } from './lib/GestureBase'\nexport { default as UIEvent } from './lib/UIEvent'\nexport { default as FrameRate } from './lib/FrameRate'\nexport { default as FrameRateBase } from './lib/FrameRateBase'\n\nimport * as GestureEvent from './lib/GestureEvent'\n\nexport {\n\tGestureEvent,\n}","/**\n\t@npmpackage\n\t@class FrameRate\n\t@desc\n\t\tImport from <a href=\"https://github.com/ff0000-ad-tech/ad-events\">ad-events</a>\n\t\t<br>\n\t\t<codeblock>\n\t\t\t// importing into an ES6 class\n\t\t\timport { FrameRate } from 'ad-events'\n\t\t</codeblock>\n\t\t<br><br>\n\t\t\n\t\tThis module is used for constant consistent updates, akin to ENTER_FRAME in AS3, utilizing requestAnimationFrame at its core. Register a function\n\t\tand it will be called on every tick. Optionally, you can register a function with a frame rate value for specific frequency calls.  This is useful\n\t\twhen working with multiple animation sequences at once.\t\n\t\n\t@example\n\t\t// have any methods\t\t\t\n\t\tfunction myFunctionA () {\n\t\t\tconsole.log( 'myFunctionA' );\n\t\t}\n\n\t\tfunction myFunctionB() {\n\t\t\tconsole.log( 'myFunctionB' );\n\t\t}\n\n\t\tfunction myFunctionC() {\n\t\t\tconsole.log( 'myFunctionC' );\n\t\t}\n\n\t\t// Register any method, anywhere\n\t\tFrameRate.register ( this, myFunctionA );\n\t\tFrameRate.register ( this, myFunctionB );\n\n\t\t// Register with custom time, say only 7 calls per second\n\t\tFrameRate.register ( this, myFunctionC, 7 );\n\n\t\t// Pause the whole engine so no methods are called\n\t\tFrameRate.pause();\n\n\t\t// Then start is back up\n\t\tFrameRate.resume();\n\n\t\t// or remove a method later\n\t\tFrameRate.unregister ( this, myFunctionA );\n\n\t\t// or pause all methods at a specific frame rate\n\t\tFrameRate.pause ( 7 ) // this pauses only myFunctionC, but myFunctionB will continue to be called\n*/\nimport FrameRateBase from './FrameRateBase'\nimport 'ad-polyfills/lib/request-animation-frame'\n\nclass FrameRate {\n\n\tstatic _isPaused = true\n\tstatic _isActive = true\n\tstatic _sets = {}\n\tstatic _RAF = undefined\n\t\n\t/** ----------------------------------------------------------------------------------------------- */\n\t// PUBLIC METHODS\n\n\t/**\n\t\t@memberOf FrameRate\n\t\t@method register\n\t\t@param {string} from\n\t\t\tWhere the handler method exists; the class/module where it is declared\n\t\t@param {function} handler\n\t\t\tA method to be called on every tick of the engine\n\t\t@param {number} fps\n\t\t\tOptional, set the number of times to be called per second\n\t\t@desc\n\t\t\tRegisters a method to be called, by adding it to collection.\n\n\t\t@example\n\t\t\t// Uses the default fps, being called 30 times per second\n\t\t\tFrameRate.register ( this, myFunctionA );\n\n\t\t\t// Set the fps to only be called 12 times per second \n\t\t\tFrameRate.register ( this, myFunctionB, 12 );\n\t*/\n\tstatic register = (from, handler, fps) => {\n\t\tconst F = FrameRate\n\t\tfps = fps || 30\n\t\tif (!F._sets[fps]) {\n\t\t\tF._sets[fps] = new FrameRateBase(fps)\n\t\t}\n\n\t\tvar pool = F._sets[fps].pool\n\t\tfor (var i = 0; i < pool.length; i++) {\n\t\t\tif (pool[i].from === from && pool[i].handler === handler) {\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t\tpool.push({\n\t\t\thandler: handler,\n\t\t\tfrom: from\n\t\t})\n\t\tconsole.log('pool is now:', pool)\n\n\t\tif (F._isActive) F.resume()\n\t}\n\n\t/**\n\t\t@memberOf FrameRate\n\t\t@method unregister\n\t\t@param {string} from\n\t\t\tWhere the handler method exists; the class/module where it is declared\n\t\t@param {function} handler\n\t\t\tA method previously called on every tick of the engine\n\t\t@param {number} fps\n\t\t\tOptional, specifies where the handler was called from\n\t\t@desc\n\t\t\tUnregisters a method from being called, by removing it from collection.\n\n\t\t@example\n\t\t\t// searches all interal pools to unregister the callback\n\t\t\tFrameRate.unregister ( this, myFunctionA );\n\n\t\t\t// if the fps when registered is known, will only look in that pool to unregister\n\t\t\tFrameRate.unregister ( this, myFunctionB, 12 );\n\t*/\n\tstatic unregister = (from, handler, fps) => {\n\t\tconst F = FrameRate\n\t\t//var handlerString = handler.toString();\n\n\t\tfor (var key in F._sets) {\n\t\t\t// if fps is provided, only look in that FrameRateBase for handlers\n\t\t\tif (fps && key != fps) {\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\t// otherwise, remove all references to that handler\n\n\t\t\tvar pool = F._sets[key].pool\n\t\t\tfor (var i = 0; i < pool.length; i++) {\n\t\t\t\t//if ( h[i].toString() === handlerString ){\n\t\t\t\tif (pool[i].from === from && pool[i].handler === handler) {\n\t\t\t\t\tpool.splice(i, 1)\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// removes the FrameRateBase object with no handlers\n\t\t\tif (pool.length == 0) {\n\t\t\t\tdelete F._sets[key]\n\t\t\t}\n\t\t}\n\n\t\tif (Object.keys(F._sets).length === 0) {\n\t\t\tF.pause()\n\t\t\tF._isActive = true\n\t\t}\n\t}\n\n\t/**\n\t\t@memberOf FrameRate\n\t\t@method pause\n\t\t@param {} arguments\n\t\t\tTarget Frames Per Seconds times to pause, can be infinite\n\t\t@desc\n\t\t\tPauses the engine's ticker, deactivating ALL methods listening to FrameRate. \n\t\t\tFrameRate will stay paused when more listeners are added, only activating again when calling resume()\n\t\t\tHowever, by passing in a target Frames Per Second, it will only pause those methods.\n\n\t\t@example\n\t\t\t// Pauses the whole engine\n\t\t\tFrameRate.pause();\n\t\t\t\n\t\t\t// Pauses only methods registered at 12 Frames Per Second\n\t\t\tFrameRate.pause(12);\n\n\t\t\t// Pauses all methods registerd at provided Frames Per Seconds\n\t\t\tFrameRate.pause(18,24,30);\n\t*/\n\n\tstatic pause = (...args) => {\n\t\tconst F = FrameRate\n\t\tif (args.length > 0) {\n\t\t\tfor (var i = 0; i < args.length; i++) {\n\t\t\t\tvar fpsTarget = args[i]\n\t\t\t\tif (F._sets[fpsTarget]) {\n\t\t\t\t\tF._sets[fpsTarget]._paused = true\n\t\t\t\t\tF._isPaused = true\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var d in F._sets) {\n\t\t\t\tif (!F._sets[d]._paused) {\n\t\t\t\t\tF._isPaused = false\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var d in F._sets) F._sets[d]._paused = true\n\t\t\tF._isPaused = true\n\t\t}\n\n\t\tif (F._isPaused) {\n\t\t\tF._isActive = false\n\t\t\twindow.cancelAnimationFrame(F._RAF)\n\t\t}\n\t}\n\n\t/**\n\t\t@memberOf FrameRate\n\t\t@method resume\n\t\t@param {} arguments\n\t\t\tTarget Frames Per Secons times to resume, can be infinite\n\t\t@desc\n\t\t\tResumes the engine's ticker, activating ALL methods listening to FrameRate. \n\t\t\tHowever, by passing in a target Frames Per Second, it will only resume those methods.\n\t\t\n\t\t@example\n\t\t\t// Resumes the whole engine\n\t\t\tFrameRate.resume();\n\t\t\t\n\t\t\t// Resumes only methods registered at 12 Frames Per Second\n\t\t\tFrameRate.resume(12);\n\n\t\t\t// Resumes all methods registerd at provided Frames Per Seconds\n\t\t\tFrameRate.resume(18,24,30);\n\t*/\n\tstatic resume = (...args) => {\n\t\tconst F = FrameRate\n\t\tvar _currentlyRunning = !F._isPaused\n\t\tif (args.length > 0) {\n\t\t\tfor (var i = 0; i < args.length; i++) {\n\t\t\t\tvar fpsTarget = args[i]\n\t\t\t\tif (F._sets[fpsTarget]) {\n\t\t\t\t\tF._sets[fpsTarget]._paused = false\n\t\t\t\t\tF._isPaused = false\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var d in F._sets) F._sets[d]._paused = false\n\t\t\tF._isPaused = false\n\t\t}\n\n\t\tif (!_currentlyRunning) {\n\t\t\tF._isActive = true\n\t\t\tF._RAF = window.requestAnimationFrame(F.tick)\n\t\t}\n\t}\n\n\t/**\n\t\t@memberOf FrameRate\n\t\t@method secondsAsFrames\n\t\t@param {number} sec\n\t\t\tA time in seconds\n\t\t@desc\n\t\t\tConverts a time in seconds to a Frames Per Second decimal value. For use when an interval longer than once per soecond is needed, \n\t\t\tsimilar to setInterval, however, this uses the single internal ticker to combat perfoormance hits.\n\t\t\n\t\t@example\n\t\t\t// You want a callback to happen every 3.2 seconds\n\t\t\tvar time = 3.2;\n\n\t\t\tfunction myFunction(){\n\t\t\t\tconsole.log( \"I get called every 3.2 seconds\" );\n\t\t\t}\n\n\t\t\t// Get the time as an Frames Per Second\n\t\t\tvar fps = FrameRate.secondsAsFrames(time);\n\t\t\t\n\t\t\t// Use it to register\n\t\t\tFrameRate.register(myFunction, fps);\n\t*/\n\tstatic secondsAsFrames = (sec) => {\n\t\treturn 1 / sec\n\t}\n\n\t/** ----------------------------------------------------------------------------------------------- */\n\t// PRIVATE METHODS\n\tstatic tick = () => {\n\t\tconst F = FrameRate\n\t\t//console.log( 'tick' )\n\t\tif (!F._isPaused) {\n\t\t\tfor (var h in F._sets) {\n\t\t\t\tF._sets[h].tick()\n\t\t\t}\n\n\t\t\t// call tick again\n\t\t\twindow.requestAnimationFrame(F.tick)\n\t\t}\n\t}\n}\n\nexport default FrameRate","/* ----------------------------------------------------------------------------------------------------------------------------------------------------------\n\tDescription:\n\t\t-- INTERNAL MODULE --\n\t\tThis module is used exclusively by FrameRate.  When a method is registered, it instantiaties an instance of this module to hold all methods at a \n\t\tspecified frames per second.  Every fps gets a new FrameRateBase instance.\n\t\n\t---------------------------------------------------------------------------------------------------------------------------------------------------------- */\nfunction FrameRateBase(fps) {\n\tvar F = this\n\tF.pool = []\n\tF.fps = fps\n\n\tF._frameTime = Math.floor(1000 / F.fps)\n\tF._prevTime = 0\n\tF._startTime = 0\n\tF._nextTime = 0\n\tF._maxLag = 400\n\tF._shiftLag = 30\n\tF._paused = false\n\tF._prevCallTime = Date.now()\n\n\tF.diffTime = 0\n}\n\nFrameRateBase.prototype = {\n\tresume: function() {\n\t\tvar F = this\n\t\tif (F._isPaused) {\n\t\t\tF._startTime = Date.now()\n\t\t\tF._prevCallTime = F._startTime\n\t\t\tF._prevTime = F._startTime\n\t\t\tF._nextTime = 0\n\t\t\tF._isPaused = false\n\t\t}\n\t},\n\n\ttick: function() {\n\t\tvar F = this\n\t\tif (!F._paused) {\n\t\t\tvar call = false\n\t\t\tvar now = Date.now()\n\t\t\tvar diffTime = now - F._prevTime\n\n\t\t\tif (diffTime > F._maxLag) {\n\t\t\t\tconsole.log('...lag')\n\t\t\t\tF._startTime += diffTime - F._shiftLag\n\t\t\t}\n\t\t\tF._prevTime = now //+= F.diffTime;\n\n\t\t\tvar elapsedTime = F._prevTime - F._startTime\n\t\t\tvar future = elapsedTime - F._nextTime\n\n\t\t\tif (future > 0) {\n\t\t\t\tF._nextTime += future >= F._frameTime ? future : F._frameTime\n\t\t\t\tcall = true\n\n\t\t\t\t// calculates the difference only from last call, not last tick\n\t\t\t\tF.diffTime = now - F._prevCallTime\n\t\t\t\tF._prevCallTime = now\n\t\t\t}\n\n\t\t\t// handle the callbacks\n\t\t\tif (call) F.dispatch()\n\t\t}\n\t},\n\n\tdispatch: function() {\n\t\tvar F = this\n\t\tfor (var i = 0; i < F.pool.length; i++) {\n\t\t\tvar obj = F.pool[i]\n\t\t\tobj.handler.call(obj.from, this)\n\t\t}\n\t}\n}\n\nexport default FrameRateBase\n","// TODO - ? remove gestureBase if no events added\n// \t\t- ? total distance\n\n/**\n\t@npmpackage\n\t@class Gesture\n\t@desc\n\t\tImport from <a href=\"https://github.com/ff0000-ad-tech/ad-events\">ad-events</a>\n\t\t<br>\n\t\t<codeblock>\n\t\t\t// importing into an ES6 class\n\t\t\timport { Gesture } from 'ad-events'\n\t\t</codeblock>\n\t\t<br><br>\n\t\t\n\t\tThis module is used for seamless use of Mouse / Touch Events, such as click vs tap, mousedown vs touch down, etc.  \n\t\tThis class figures which to use and reports custom events.<br><br>\n\t\n\t\tSee {@link GestureEvent} for available events.\n*/\nimport GestureBase from './GestureBase'\nimport { Styles } from 'ad-view'\n\nvar Gesture = new function() {\n\tvar G = this\n\n\tvar _targets = []\n\tvar _disableList = []\n\tvar _eventPass = document.createEventObject != undefined\n\tvar _eventLooping = false\n\n\tG._kills = {}\n\n\t/* ------------------------------------------------------------------------------------------------------------- */\n\t// PUBLIC METHODS\n\n\t/**\n\t\t@memberOf Gesture\n\t\t@method add | addEventListener\n\t\t@param {element} target\n\t\t\tThe DOM element\n\t\t@param {string} name\n\t\t\tThe event's name as a String or GestureEvent constant\n\t\t@param {function} handler\n\t\t\tThe function to be called on event trigger\n\t\t@desc\n\t\t\tRegisters an event so that the listener receives notification of an event.\n\t\t\t\n\t\t@example\n\t\t\tGesture.addEventListener( myDiv, GestureEvent.CLICK, handleClick );\n\t\t\tfunction handleClick( event ) {\n\t\t\t\tconsole.log( 'Click heard' );\n\t\t\t}\t\t\t\t\t\n\t*/\n\tG.add = G.addEventListener = function(target, name, handler) {\n\t\tvar _gestureBase = getGestureBase(target)\n\t\t_gestureBase.register(name, handler)\n\t\tStyles.setCss(target, 'cursor', 'pointer')\n\n\t\t// OVERWRITES mouseChildren(false) of parent\n\t\tStyles.setCss(target, 'pointer-events', 'auto')\n\t}\n\n\t/**\n\t\t@memberOf Gesture\n\t\t@method remove | removeEventListener\n\t\t@param {element} target\n\t\t\tThe DOM element\n\t\t@param {string} name\n\t\t\tThe event's name as a String or GestureEvent constant\n\t\t@param {function} handler\n\t\t\tThe function registered for call on event trigger\n\t\t@desc\n\t\t\tUnregisters an event of notifications.\n\n\t\t@example\n\t\t\tGesture.removeEventListener ( myDiv, GestureEvent.CLICK, handleClick );\t\t\t\t\t\n\t*/\n\tG.remove = G.removeEventListener = function(target, name, handler) {\n\t\tvar _gestureBase = getGestureBase(target)\n\t\tif (_gestureBase) {\n\t\t\t_gestureBase.unregister(name, handler)\n\t\t\tif (_gestureBase.eventList.length <= 0) {\n\t\t\t\tStyles.setCss(target, 'cursor', 'auto')\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t\t@memberOf Gesture\n\t\t@method disable\n\t\t@param {element} target\n\t\t\tThe DOM element\n\t\t@desc\n\t\t\tDisables a DOM element from responding the mouse/touch/gesture events. For bubbling events, such as click, this will disable its children as well.\n\t\t\n\t\t@example\t\n\t\t\tGesture.disable( myDiv );\n\t*/\n\tG.disable = function(target) {\n\t\tvar gestureBase = getGestureBase(target)\n\t\t_disableList.push(gestureBase)\n\n\t\tif (_eventPass) {\n\t\t\tgestureBase.register(GestureEvent.CLICK, handlePassThroughClick)\n\t\t\tStyles.setCss(target, 'cursor', 'auto')\n\t\t} else {\n\t\t\tStyles.setCss(target, 'pointer-events', 'none')\n\t\t}\n\t}\n\n\t/**\n\t\t@memberOf Gesture\n\t\t@method disableChildren\n\t\t@param {element} target\n\t\t\tThe DOM element\n\t\t@desc\n\t\t\tDisables all child DOM elements from responding the mouse/touch/gesture events. For bubbling events, such as click, this is unnecessary\n\n\t\t@example\n\t\t\tGesture.disableChildren ( myDiv );\n\t*/\n\tG.disableChildren = function(target) {\n\t\tsetActiveChildren(target, false)\n\t}\n\n\t/**\n\t\t@memberOf Gesture\n\t\t@method enable\n\t\t@param {element} target\n\t\t\tThe DOM element\n\t\t@desc\n\t\t\tEnables all a DOM element to responding the mouse/touch/gesture events. For bubbling events, such as click, this will enable its children as well.\n\n\t\t@example\n\t\t\tGesture.disable ( myDiv );\n\t*/\n\n\tG.enable = function(target) {\n\t\tvar gestureBase = getGestureBase(target)\n\n\t\tfor (var i = 0; i < _disableList.length; i++) {\n\t\t\tif (gestureBase == _disableList[i]) {\n\t\t\t\tif (_eventPass) {\n\t\t\t\t\tgestureBase.unregister(GestureEvent.CLICK, handlePassThroughClick)\n\t\t\t\t} else {\n\t\t\t\t\tStyles.setCss(target, 'pointer-events', 'auto')\n\t\t\t\t\tStyles.setCss(target, 'cursor', 'pointer')\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t\t@memberOf Gesture\n\t\t@method enableChildren\n\t\t@param {element} target\n\t\t\tThe DOM element\n\t\t@desc\n\t\t\tEnables all child DOM elements to responding the mouse/touch/gesture events. For bubbling events, such as click, this is unnecessary\n\n\t\t@example\n\t\t\tGesture.enableChildren ( myDiv );\n\t*/\n\tG.enableChildren = function(target) {\n\t\tsetActiveChildren(target, true)\n\t}\n\n\t/* ------------------------------------------------------------------------------------------------------------- */\n\t// PRIVATE METHODS\n\tfunction getGestureBase(target) {\n\t\tvar _gestureBase = null\n\t\tfor (var i = 0; i < _targets.length; i++) {\n\t\t\tif (_targets[i].elem === target) {\n\t\t\t\t_gestureBase = _targets[i]\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif (!_gestureBase) {\n\t\t\t_gestureBase = createGestureBase(target)\n\t\t}\n\t\treturn _gestureBase\n\t}\n\n\tfunction createGestureBase(target) {\n\t\tvar _gestureBase = new GestureBase(target)\n\t\t_targets.push(_gestureBase)\n\t\treturn _gestureBase\n\t}\n\n\tfunction setActiveChildren(target, active) {\n\t\tvar gestureBase = getGestureBase(target)\n\t\tif (gestureBase.hasActiveChildren != active) {\n\t\t\tgestureBase.hasActiveChildren = active\n\t\t\tvar children = gestureBase.elem.getElementsByTagName('*')\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t//console.log( typeof children[i], ' ; ', children[i].id )\n\t\t\t\t// gets only the children, not grand-children\n\t\t\t\tif (children[i].parentNode == target) {\n\t\t\t\t\tactive ? G.enable(children[i]) : G.disable(children[i])\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getNextLayerElement(target, x, y, list) {\n\t\ttarget.style.visibility = 'hidden'\n\t\tlist.push(target)\n\n\t\tvar elem = document.elementFromPoint(x, y)\n\t\t//console.log( 'elementFromPoint() : ', elem.id );\n\n\t\tfor (var i = 0; i < _disableList.length; i++) {\n\t\t\t//console.log( ' => disable list: ', i, ' : ', _disableList[i].elem.id )\n\t\t\tif (_disableList[i].elem == elem) {\n\t\t\t\t//console.log( '  -^ match so go again')\n\t\t\t\treturn getNextLayerElement(elem, x, y, list)\n\t\t\t}\n\t\t}\n\n\t\treturn elem\n\t}\n\n\tfunction getForwardedTarget(event) {\n\t\tvar hiddenList = []\n\n\t\tvar el = getNextLayerElement(event.target, event.clientX, event.clientY, hiddenList)\n\t\t//console.log( ' returned element: (', event.clientX, ', ', event.clientY, ') ', el.id )\n\n\t\t//console.log( 'hidden list:')\n\t\tfor (var i = 0; i < hiddenList.length; i++) {\n\t\t\t//console.log( '  -> ', i, ' ', hiddenList[i].id )\n\t\t\thiddenList[i].style.visibility = 'visible'\n\t\t}\n\t\thiddenList = []\n\n\t\tevent.stopImmediatePropagation()\n\t\t//console.log( ' - STOP - ')\n\n\t\treturn el\n\t}\n\n\t/* ------------------------------------------------------------------------------------------------------------- */\n\t// EVENT HANDLERS\n\n\t// IE 9 & 10 needs to have events captured and passed to the next layer dom element\n\tfunction handlePassThroughClick(event) {\n\t\t//console.log( 'pass through:', event )\n\t\tvar el = getForwardedTarget(event)\n\n\t\t// IE 9+\n\t\tvar evt = document.createEvent('HTMLEvents')\n\t\tevt.initEvent(event.type, true, false)\n\t\t//console.log( '     # ', el.id, ' is dispatching ' )\n\t\tel.dispatchEvent(evt)\n\t}\n}()\n\nexport default Gesture\n","/**\n\t@npmpackage\n\t@class GestureBase\n\n\t@desc\n\t\tImport from <a href=\"https://github.com/ff0000-ad-tech/ad-events\">ad-events</a>\n\t\t<br>\n\t\t<codeblock>\n\t\t\t// importing into an ES6 class\n\t\t\timport { GestureBase } from 'ad-events'\n\t\t</codeblock>\n\t\t<br><br>\n\t\t\n\t\t-- INTERNAL MODULE --\n\t\tThis module is used exclusively by Gesture.  When a dom element has an event listener registered, it creates an instance of this module \n\t\tto hold all the event handlers for the dom element.  Every dom element gets a new GestureBase instance. {@link Gesture}\n\t\n*/\nimport { Device } from 'ad-external'\nimport { Styles } from 'ad-view'\nimport * as GestureEvent from './GestureEvent'\n\nclass GestureBase {\n\tconstructor(elem) {\n\t\tvar G = this\n\t\tG.elem = elem\n\t\tG.hasActiveChildren = true\n\t\tG.debug = false\n\t\tG.eventList = []\n\n\t\tG._isDragEnabled = false\n\t\t// isDragging also used for swipe event check\n\t\tG._isDragging = false\n\t\tG._give = 2\n\n\t\t// offset coordinate for element\n\t\tG._oX = 0\n\t\tG._oY = 0\n\n\t\t// previous coordinates for drag/swipe\n\t\tG._p1X = 0\n\t\tG._p1Y = 0\n\t\tG._p2X = 0\n\t\tG._p2Y = 0\n\n\t\t// start coordinate\n\t\tG._sX = 0\n\t\tG._sY = 0\n\n\t\t// velocity\n\t\tG._vX = 0\n\t\tG._vY = 0\n\n\t\tG._cursor = 'mouse'\n\t\tG._start = 'down'\n\t\tG._end = 'up'\n\n\t\tG.init()\n\t}\n\n\tinit() {\n\t\tvar G = this\n\t\tif (G.debug) console.log('GestureBase.init()')\n\n\t\tG._handleTouchStart = G._handleTouchStart.bind(G)\n\t\tG._handleDown = G._handleDown.bind(G)\n\t\tG._handleDrag = G._handleDrag.bind(G)\n\t\tG._handleUp = G._handleUp.bind(G)\n\n\t\tG._elemAdd = G.elem.addEventListener.bind(G.elem)\n\t\tG._elemRemove = G.elem.removeEventListener.bind(G.elem)\n\n\t\tG._reset()\n\t}\n\n\t// replace addEventListener so can flag the event type\n\tregister(name, handler) {\n\t\tvar G = this\n\t\tif (G.debug) console.log('GestureBase.register(', name, ')')\n\n\t\tG.eventList.push(name)\n\t\tG._checkDragEnabled()\n\n\t\t// then actually add the listener\n\t\tG._elemAdd(name, handler)\n\t}\n\n\tunregister(name, handler) {\n\t\tvar G = this\n\t\tif (G.debug) console.log('GestureBase.unregister(', name, ')')\n\n\t\tvar index = G.eventList.indexOf(name)\n\t\tif (index >= 0) {\n\t\t\tG.eventList.splice(index, 1)\n\t\t}\n\t\tG._checkDragEnabled()\n\n\t\tG._elemRemove(name, handler)\n\t}\n\n\t/* ------------------------------------------------------------------------------------------------------------- */\n\t// UTILITY\n\t_reset() {\n\t\tvar G = this\n\t\tG._cursor = 'mouse'\n\t\tG._start = 'down'\n\t\tG._end = 'up'\n\t\tG.elem.addEventListener('touchstart', G._handleTouchStart)\n\n\t\t// listen for both touch and mouse, except on iOS devices\n\t\tif (Device.os != 'ios') G.elem.addEventListener('mousedown', G._handleDown)\n\t}\n\n\t_checkDragEnabled() {\n\t\tvar G = this\n\t\tvar hasDragEventIndex = G.eventList.join('').indexOf('onDrag')\n\n\t\t// check if it is a drag, therefore enabling dragability\n\t\tG._isDragEnabled = hasDragEventIndex > -1\n\t}\n\n\t// Android stores things like pageX in an array. This scopes the internally used event properly\n\t_getEventScope(event) {\n\t\t//if( this.debug ) console.log( 'GestureBase._getEventScope(), event:', event );\n\t\t// check for existence of changedTouches instead\n\t\t//return ( Device.os == 'android' && event instanceof TouchEvent ) ? event.changedTouches[0] : event ;\n\t\treturn event.changedTouches ? event.changedTouches[0] : event\n\t}\n\n\t/* ------------------------------------------------------------------------------------------------------------- */\n\t// WINDOW EVENT ENABLE\n\t_add(type, handler) {\n\t\twindow.addEventListener(this._cursor + type, handler)\n\t}\n\n\t_remove(type, handler) {\n\t\twindow.removeEventListener(this._cursor + type, handler)\n\t}\n\n\t/* ------------------------------------------------------------------------------------------------------------- */\n\t// HANLDERS\n\t_handleDown(event) {\n\t\tvar G = this\n\t\tif (G.debug) console.log('GestureBase._handleDown()')\n\n\t\tGestureEvent.startPoint()\n\n\t\tG.elem.removeEventListener('touchstart', G._handleTouchStart)\n\t\tif (Device.os != 'ios') G.elem.removeEventListener('mousedown', G._handleDown)\n\n\t\tG._isDragging = false\n\n\t\tG._add(G._end, G._handleUp)\n\t\tG._add('move', G._handleDrag)\n\n\t\tvar touch = G._getEventScope(event)\n\t\tvar mouseX = touch.pageX\n\t\tvar mouseY = touch.pageY\n\n\t\tvar elemRect = G.elem.getBoundingClientRect()\n\t\tvar localOffsetX = mouseX - elemRect.left\n\t\tvar localOffsetY = mouseY - elemRect.top\n\n\t\tvar localX = G.elem.x || Styles.getCss(G.elem, 'x')\n\t\tvar localY = G.elem.y || Styles.getCss(G.elem, 'y')\n\t\tvar globalOffsetX = elemRect.left - localX\n\t\tvar globalOffsetY = elemRect.top - localY\n\n\t\tG._oX = globalOffsetX + localOffsetX\n\t\tG._oY = globalOffsetY + localOffsetY\n\n\t\tvar elemPositionX = mouseX - G._oX\n\t\tvar elemPositionY = mouseY - G._oY\n\n\t\t// reset the dragging vars\n\t\tG._sX = G._p1X = G._p2X = mouseX\n\t\tG._sY = G._p1Y = G._p2Y = mouseY\n\n\t\t/*console.log( \n\t\t\t'\\n\\t_handleDown()',\n\t\t\t'| mouse:', mouseX, mouseY, \n\t\t\t'| localOffset:', localOffsetX, localOffsetY,\n\t\t\t'| local:', localX, localY,\n\t\t\t'| globalOffset:', globalOffsetX, globalOffsetY,\n\t\t\t'| totalOffset:', G._oX, G._oY,\n\t\t\t'| elemPosition:', elemPositionX, elemPositionY,\n\t\t\t'\\n\\n'\n\t\t)*/\n\n\t\tlocalCreateEvent('onPress')\n\n\t\tfunction localCreateEvent(name) {\n\t\t\tif (GestureEvent.stopped(name)) return\n\t\t\tvar newEvent = new GestureEvent.Event(name, mouseX, mouseY, localOffsetX, localOffsetY, elemPositionX, elemPositionY)\n\t\t\tif (G.debug) console.log(' -> dispatch', name)\n\t\t\tG.elem.dispatchEvent(newEvent)\n\t\t}\n\t}\n\n\t_handleUp(event, bypass) {\n\t\tvar G = this\n\t\tif (G.debug) console.log('GestureBase._handleUp()')\n\n\t\tG._remove(G._end, G._handleUp)\n\t\tG._remove('move', G._handleDrag)\n\n\t\tvar touch = G._getEventScope(event)\n\t\tvar mouseX = touch.pageX\n\t\tvar mouseY = touch.pageY\n\n\t\tvar elemRect = G.elem.getBoundingClientRect()\n\t\tvar localOffsetX = mouseX - elemRect.left\n\t\tvar localOffsetY = mouseY - elemRect.top\n\n\t\tvar elemPositionX = mouseX - G._oX\n\t\tvar elemPositionY = mouseY - G._oY\n\n\t\tvar eventName\n\n\t\tif (bypass !== true) {\n\t\t\tlocalCreateEvent('onRelease')\n\t\t}\n\n\t\tvar offsetTop = elemRect.top + window.pageYOffset\n\t\tvar offsetBottom = offsetTop + elemRect.height\n\t\tvar offsetLeft = elemRect.left + window.pageXOffset\n\t\tvar offsetRight = offsetLeft + elemRect.width\n\n\t\tif (G._isDragging) {\n\t\t\tif (G._isDragEnabled) {\n\t\t\t\tG._dragEndOrSwipe('onDragStop')\n\t\t\t}\n\t\t\tconsole.log('  -> No CLICK Fired, was dragging')\n\t\t} else {\n\t\t\tif (mouseX > offsetLeft && mouseX < offsetRight && mouseY > offsetTop && mouseY < offsetBottom) {\n\t\t\t\tlocalCreateEvent('onSelect')\n\t\t\t}\n\t\t}\n\n\t\tfunction localCreateEvent(name) {\n\t\t\tif (GestureEvent.stopped(name)) return\n\t\t\tvar newEvent = new GestureEvent.Event(\n\t\t\t\tname,\n\t\t\t\tmouseX,\n\t\t\t\tmouseY,\n\t\t\t\tlocalOffsetX,\n\t\t\t\tlocalOffsetY,\n\t\t\t\telemPositionX,\n\t\t\t\telemPositionY,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\tG._vX,\n\t\t\t\tG._vY\n\t\t\t)\n\t\t\tif (G.debug) console.log(' -> dispatch', name)\n\t\t\tG.elem.dispatchEvent(newEvent)\n\t\t}\n\n\t\tif (G._isDragging) {\n\t\t\tG._dragEndOrSwipe('onSwipe')\n\t\t}\n\n\t\tG._reset()\n\n\t\t// this prevents the second mouse down on Android\n\t\tevent.preventDefault()\n\n\t\tGestureEvent.endPoint()\n\t}\n\n\t/* ------------------------------------------------------------------------------------------------------------- */\n\t// TOUCH BYPASSING\n\t// This will stop from both touch and mouse events firing, thus doubling every Gesture Event fired.\n\t_handleTouchStart(event) {\n\t\tvar G = this\n\t\tif (G.debug) console.log('GestureBase._handleTouchStart()')\n\n\t\t// Change the native events to listen for the rest of the system\n\t\tG._cursor = 'touch'\n\t\tG._start = 'start'\n\t\tG._end = 'end'\n\n\t\tG._handleDown(event)\n\t}\n\n\t/* ------------------------------------------------------------------------------------------------------------- */\n\t// DRAG\n\t_handleDrag(event) {\n\t\tvar G = this\n\t\tif (G.debug) console.log('GestureBase._handleDrag()')\n\n\t\tvar touch = G._getEventScope(event)\n\t\tvar mouseX = touch.pageX\n\t\tvar mouseY = touch.pageY\n\n\t\tvar diffx1 = mouseX - G._p1X\n\t\tvar diffx2 = mouseX - G._p2X\n\t\tG._vX = (diffx2 - diffx1) / 2 + diffx1\n\n\t\tvar diffy1 = mouseY - G._p1Y\n\t\tvar diffy2 = mouseY - G._p2Y\n\t\tG._vY = (diffy2 - diffy1) / 2 + diffy1\n\n\t\tvar elemPositionX = mouseX - G._oX\n\t\tvar elemPositionY = mouseY - G._oY\n\n\t\tvar elemRect = G.elem.getBoundingClientRect()\n\t\tvar localOffsetX = mouseX - elemRect.left\n\t\tvar localOffsetY = mouseY - elemRect.top\n\n\t\t/*console.log( \n\t\t\t'\\t_handleDrag()',\n\t\t\t'| mouse:', mouseX, mouseY, \n\t\t\t'| totalOffset:', G._oX, G._oY,\n\t\t\t'| elemPosition:', elemPositionX, elemPositionY,\n\t\t\t'| velocity:', G._vX, G._vY,\n\t\t\t'| distance:', G._p1X - G._sX, G._p1Y - G._sY\n\t\t)*/\n\n\t\tvar eventName\n\n\t\tif (G._isDragging) {\n\t\t\tif (G._isDragEnabled) {\n\t\t\t\tlocalCreateEvent('onDrag')\n\t\t\t}\n\t\t} else {\n\t\t\t// check the inital movement to register as dragging or just a click\n\t\t\tif (Math.abs(G._sX - mouseX) > G._give || Math.abs(G._sY - mouseY) > G._give) {\n\t\t\t\tG._isDragging = true\n\n\t\t\t\tif (G._isDragEnabled) {\n\t\t\t\t\t// dispatch when offset distance is exceeded\n\t\t\t\t\tlocalCreateEvent('onDragStart')\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction localCreateEvent(name) {\n\t\t\tif (GestureEvent.stopped(name)) return\n\t\t\tvar newEvent = new GestureEvent.Event(\n\t\t\t\tname,\n\t\t\t\tmouseX,\n\t\t\t\tmouseY,\n\t\t\t\tlocalOffsetX,\n\t\t\t\tlocalOffsetY,\n\t\t\t\telemPositionX,\n\t\t\t\telemPositionY,\n\t\t\t\tG._p1X - G._sX,\n\t\t\t\tG._p1Y - G._sY,\n\t\t\t\tG._vX,\n\t\t\t\tG._vY\n\t\t\t)\n\t\t\tif (G.debug) console.log(' -> dispatch', name)\n\t\t\tG.elem.dispatchEvent(newEvent)\n\t\t}\n\n\t\tG._p2X = G._p1X\n\t\tG._p1X = mouseX\n\n\t\tG._p2Y = G._p1Y\n\t\tG._p1Y = mouseY\n\t}\n\n\t/* ------------------------------------------------------------------------------------------------------------- */\n\t// DRAG END | SWIPE\n\t_dragEndOrSwipe(type) {\n\t\tvar G = this\n\t\tif (G.debug) console.log('GestureBase._dragEndOrSwipe()', type)\n\n\t\tif (GestureEvent.stopped(name)) return\n\n\t\tvar elemRect = G.elem.getBoundingClientRect()\n\t\tvar evt = new GestureEvent.Event(\n\t\t\ttype,\n\t\t\tG._p1X,\n\t\t\tG._p1Y,\n\t\t\tG._p1X - elemRect.left,\n\t\t\tG._p1Y - elemRect.top,\n\t\t\tG._p1X - G._oX,\n\t\t\tG._p1Y - G._oY,\n\t\t\t// since _xp is assigned after moving, must use _p2X\n\t\t\tG._p2X - G._sX,\n\t\t\tG._p2Y - G._sY,\n\t\t\tG._vX,\n\t\t\tG._vY\n\t\t)\n\t\tif (G.debug) console.log(' -> dispatch', type)\n\t\tG.elem.dispatchEvent(evt)\n\t}\n}\n\nexport default GestureBase\n","/**\n\t@npmpackage\n\t@class GestureEvent\n\t@desc\n\t\tImport from <a href=\"https://github.com/ff0000-ad-tech/ad-events\">ad-events</a>\n\t\t<br>\n\t\t<codeblock>\n\t\t\t// importing into an ES6 class\n\t\t\timport { GestureEvent } from 'ad-events'\n\t\t</codeblock>\n\t\t<br><br>\n\t\t\n\t\tThis module has custom events to be used with the Gesture module. {@link Gesture}\n*/\n\nvar _kills = {}\nvar _eventLooping = false\n\n/**\n\t\t\t@memberOf GestureEvent\n\t\t\t@class GestureEvent.Event\n\t\t\t@param {string} name\n\t\t\t\tThe event type name\n\t\t\t@param {number} mouseGlobalX\n\t\t\t\tThe mouse x on the page\n\t\t\t@param {number} mouseGlobalY\n\t\t\t\tThe mouse y on the page\n\t\t\t@param {number} mouseLocalX\n\t\t\t\tThe mouse x relative to the element position\n\t\t\t@param {number} mouseLocalY\n\t\t\t\tThe mouse y relative to the element position\n\t\t\t@param {number} elementX\n\t\t\t\tThe element x position\n\t\t\t@param {number} elementY\n\t\t\t\tThe element y position\n\t\t\t@param {number} distanceX\n\t\t\t\tThe distance moved on the x, only used for drags and swipes\n\t\t\t@param {number} distanceY\n\t\t\t\tThe distance moved on the y, only used for drags and swipes\n\t\t\t@param {number} velocityX\n\t\t\t\tThe distance moved on the x since previous event fired, essentially the speed\n\t\t\t@param {number} velocityY\n\t\t\t\tThe distance moved on the y since previous event fired, essentially the speed\n\t\t\t@desc\n\t\t\t\tCreates a new CustomEvent with properties assigned to it, accessible fomr the passed through event to the handler\n\t\t\t\t\n\t\t\t@example\n\t\t\t\tGesture.add ( myDiv, GestureEvent.CLICK, handleClick );\n\t\t\t\tfunction handleClick( event ) {\n\t\t\t\t\tconsole.log( event )\n\t\t\t\t\tconsole.log( 'global mouse:', event.mouse.global.x, event.mouse.global.y )\n\t\t\t\t\tconsole.log( 'local mouse:', event.mouse.local.x, event.mouse.local.y )\n\t\t\t\t\tconsole.log( 'element:', event.element.x, event.element.y )\n\t\t\t\t}\t\n\t\t\t\tGesture.add ( dragDiv, GestureEvent.DRAG, handleDrag );\n\t\t\t\tfunction handleDrag( event ) {\n\t\t\t\t\tconsole.log( event )\n\t\t\t\t\tconsole.log( 'element:', event.element.x, event.element.y )\n\t\t\t\t\tconsole.log( 'distance:', event.distance.x, event.distance.y )\n\t\t\t\t\tconsole.log( 'velocity:', event.velocity.x, event.velocity.y )\n\t\t\t\t}\t\t\t\t\t\n\t\t*/\nfunction createEvent(\n\tname,\n\tmouseGlobalX,\n\tmouseGlobalY,\n\tmouseLocalX,\n\tmouseLocalY,\n\telementX,\n\telementY,\n\tdistanceX,\n\tdistanceY,\n\tvelocityX,\n\tvelocityY\n) {\n\tvar E = new CustomEvent(name)\n\tE.mouse = {\n\t\tglobal: {\n\t\t\tx: mouseGlobalX,\n\t\t\ty: mouseGlobalY\n\t\t},\n\t\tlocal: {\n\t\t\tx: mouseLocalX,\n\t\t\ty: mouseLocalY\n\t\t}\n\t}\n\tE.element = {\n\t\tx: elementX || 0,\n\t\ty: elementY || 0\n\t}\n\tE.distance = {\n\t\tx: distanceX || 0,\n\t\ty: distanceY || 0\n\t}\n\tE.velocity = {\n\t\tx: velocityX || 0,\n\t\ty: velocityY || 0\n\t}\n\tE.direction = {\n\t\tx: velocityX > 0 ? 'right' : velocityX < 0 ? 'left' : null,\n\t\ty: velocityY > 0 ? 'down' : velocityY < 0 ? 'up' : null\n\t}\n\n\treturn E\n}\n\nexport const Event = createEvent\n\nfunction stopBubble(event) {\n\tif (event) {\n\t\t// For IE, it bubbles custom events\n\t\tevent.stopImmediatePropagation()\n\t\t// for all other browsers that do not do that\n\t\t_kills[event.type] = true\n\t\t//console.log( '\\n\\tGestureEvent.stop() of type:', event.type )\n\t}\n}\n\n/**\n\t\t@memberOf GestureEvent\n\t\t@method stop\n\t\t@param {event} event\n\t\t\tThe event parameter from the event handler\n\t\t@desc\n\t\t\tStops all future events of the type during the event loop, is a native equivilent to event.stopImmediatePropogation().\n\t\t\tIt does NOT remove any listeners, simply stops the event from bubbling up through the chain.\n\t\t\t\n\t\t@example\n\t\t\tGesture.add ( parentDiv, GestureEvent.CLICK, handleParentClick );\n\t\t\tfunction handleParentClick( event ) {\n\t\t\t\t// This will not be heard\n\t\t\t\tconsole.log( 'parent click heard' )\n\t\t\t}\n\t\t\t\n\t\t\tGesture.add ( childDiv, GestureEvent.CLICK, handleChildClick );\n\t\t\tfunction handleChildClick( event ) {\n\t\t\t\tGestureEvent.stop ( event )\n\t\t\t\tconsole.log( 'child click heard' )\n\t\t\t}\t\t\t\t\t\n\t*/\nexport const stop = stopBubble\n\nfunction isStopped(type) {\n\treturn _kills[type] != undefined\n}\n\nexport const stopped = isStopped\n\n// A flag for the start of the event loop through all bases\nexport function startPoint() {\n\tif (!_eventLooping) {\n\t\t// the end of event loop has been reached, so reset things\n\t\t_eventLooping = true\n\t\t_kills = {}\n\t}\n}\n// A flag to reset any bubble killing\nexport function endPoint() {\n\t_eventLooping = false\n}\n\n/**\t\n\t@memberOf GestureEvent\t\n\t@const {string} OVER\n\t@desc\n\t\tRepresents a 'mouseover', fired on desktop cursor roll over\n\t@example\n\t\tGestureEvent.OVER\n*/\nexport const OVER = 'mouseover'\n\n/**\t\n\t@memberOf GestureEvent\t\n\t@const {string} OUT\n\t@desc\n\t\tRepresents a 'mouseout', fired on desktop cursor roll out\n\t@example\n\t\tGestureEvent.OUT\n*/\nexport const OUT = 'mouseout'\n\n/**\t\n\t@memberOf GestureEvent\t\n\t@const {string} MOVE\n\t@desc\n\t\tRepresents a 'mousemove', fired on desktop cursor move\n\t@example\n\t\tGestureEvent.MOVE\n*/\nexport const MOVE = 'mousemove'\n\n/**\t\n\t@memberOf GestureEvent\t\n\t@const {string} PRESS\n\t@desc\n\t\tRepresents an 'onPress', fired on mousedown / touch start\n\t@example\n\t\tGestureEvent.PRESS\n*/\nexport const PRESS = 'onPress'\n\n/**\t\n\t@memberOf GestureEvent\t\n\t@const {string} RELEASE\n\t@desc\n\t\tRepresents an 'onRelease', fired on mouseup / touch end\n\t@example\n\t\tGestureEvent.RELEASE\n*/\nexport const RELEASE = 'onRelease'\n\n/**\t\n\t@memberOf GestureEvent\t\n\t@const {string} CLICK\n\t@desc\n\t\tRepresents a 'click', fired on click / touch end\n\t@example\n\t\tGestureEvent.CLICK\n*/\nexport const CLICK = 'onSelect'\n\n/**\t\n\t@memberOf GestureEvent\t\n\t@const {string} DRAG\n\t@desc\n\t\tRepresents an 'onDrag', fired after an element is selected and before released. <br>\n\t\tElement data objects included: selection position, element position, velocity of move\t\n\t@example\n\t\tGestureEvent.DRAG\n*/\nexport const DRAG = 'onDrag'\n\n/**\t\n\t@memberOf GestureEvent\t\n\t@const {string} DRAG_START\n\t@desc\n\t\tRepresents an 'onDragStart', fired after an element is selected, when first moved and before released. <br>\n\t\tElement data objects included: selection position, element position\n\t@example\n\t\tGesture.addEventListener ( myDiv, GestureEvent.DRAG_START, handleDragStart );\n\t\t//\n\t\tfunction handleDragStart ( event ){\n\t\t\t// coordinate position of mouse/touch\n\t\t\tconsole.log( event.position );\n\n\t\t\t// coordinate position of target element\n\t\t\tconsole.log( event.element );\n\t\t}\n*/\nexport const DRAG_START = 'onDragStart'\n\n/**\t\n\t@memberOf GestureEvent\t\n\t@const {string} DRAG_STOP\n\t@desc\n\t\tRepresents an 'onDragStop', fired after an element is selected, moved, then released. <br>\n\t\tElement data objects included: selection position, velocity of last move\n\t@example\n\t\tGesture.addEventListener ( myDiv, GestureEvent.DRAG_STOP, handleDragStop );\n\t\t//\n\t\tfunction handleDragStop ( event ){\n\t\t\t// coordinate position of mouse/touch\n\t\t\tconsole.log( event.position );\n\n\t\t\t// velocity, ie change in distance, of target element\n\t\t\tconsole.log( event.velocity );\n\t\t}\n*/\nexport const DRAG_STOP = 'onDragStop'\n\n/**\t\n\t@memberOf GestureEvent\t\n\t@const {string} SWIPE\n\t@desc\n\t\tRepresents an 'onSwipe', fired just after a DRAG_STOP, but different event properties available. <br>\n\t\tElement data objects included: direction, distance, velocity\n\t@example\n\t\tGesture.addEventListener ( myDiv, GestureEvent.SWIPE, handleSwipe );\n\t\t//\n\t\tfunction handleSwipe ( event ){\n\t\t\t// direction of swipe, as strings \n\t\t\tconsole.log( event.direction );\n\n\t\t\t// distance covered from down to release\n\t\t\tconsole.log( event.distance );\n\n\t\t\t// velocity, aka speed of swipe\n\t\t\tconsole.log( event.velocity );\n\t\t}\n*/\nexport const SWIPE = 'onSwipe'\n","/**\n\t@npmpackage\n\t@class UIEvent\n\t@desc\n\t\tImport from <a href=\"https://github.com/ff0000-ad-tech/ad-events\">ad-events</a>\n\t\t<br>\n\t\t<codeblock>\n\t\t\t// importing into an ES6 class\n\t\t\timport { UIEvent } from 'ad-events'\n\t\t</codeblock>\n\t\t<br><br>\n\t\t\n\t\tThis module has custom events to be used with the <UIComponents>\n*/\nvar _componentEnabled, _sliderUpdate\nvar UIEvent = {\n\t/**\t\n\t\t@memberOf UIEvent\t\n\t\t@const {string} ENABLED\n\t\t@desc\n\t\t\tRepresents an 'uiComponentEnabled', fired when the enabled state of a <UIComponent> changes; useful when extending a component.\n\t\t@example\n\t\t\tUIEvent.ENABLED\n\t*/\n\tENABLED: 'uiComponentEnabled',\n\n\t/**\t\n\t\t@memberOf UIEvent\t\n\t\t@const {string} RESIZE\n\t\t@desc\n\t\t\tDescription needed_________.\n\t\t@example\n\t\t\tUIEvent.RESIZE\n\t*/\n\tRESIZE: 'uiResize',\n\n\t/**\t\n\t\t@memberOf UIEvent\t\n\t\t@const {string} SLIDER_UPDATE\n\t\t@desc\n\t\t\tRepresents an 'uiSliderUpdate', fired when a <UISlider> changes its value.\n\t\t@example\n\t\t\tUIEvent.SLIDER_UPDATE\n\t*/\n\tSLIDER_UPDATE: 'uiSliderUpdate',\n\n\tget componentEnabled() {\n\t\tif (!_componentEnabled) {\n\t\t\t_componentEnabled = new CustomEvent('uiComponentEnabled')\n\t\t}\n\t\treturn _componentEnabled\n\t},\n\tget sliderUpdate() {\n\t\tif (!_sliderUpdate) {\n\t\t\t_sliderUpdate = new CustomEvent('uiSliderUpdate')\n\t\t}\n\t\treturn _sliderUpdate\n\t}\n}\n\nexport default UIEvent\n","export { default as Device } from './lib/Device.js'\n","/**\n\t@npmpackage\n\t@class Device\n\t@desc\n\t\tImport from <a href=\"https://github.com/ff0000-ad-tech/ad-external\">ad-external</a>\n\t\t<br>\n\t\t<codeblock>\n\t\t\t// importing into an ES6 class\n\t\t\timport { Device } from 'ad-external'\n\t\t</codeblock>\n\t\t<br><br>\n\t\t\n\t\tGlobal constant that provide information about the Device on which the code is currently executing\n*/\n\nclass Device {\n\tstatic pixelRatio = window.devicePixelRatio || 'unknown'\n\n\t/**\t\n\t\t@memberOf Device\t\n\t\t@var {string} agentString\n\t\t@desc\n\t\t\tCurrent user agent of browser. */\n\n\t/**\t\n\t\t@memberOf Device\t\n\t\t@var {string} brand\n\t\t@desc\n\t\t\tBrand of device, possible values are: \n\t\t\t<code>microsoft</code>, \n\t\t\t<code>apple</code>, \n\t\t\t<code>android</code>, \n\t\t\t<code>rim</code>, \n\t\t\t<code>unknown</code>. \n\t*/\n\n\t/**\t\n\t\t@memberOf Device\t\n\t\t@var {string} product\n\t\t@desc\n\t\t\tBrand subtype, possible values are: \n\t\t\t<code>windows phone</code>, \n\t\t\t<code>windows</code>, \n\t\t\t<code>iphone</code>, \n\t\t\t<code>ipad</code>, \n\t\t\t<code>ipod</code>, \n\t\t\t<code>mac</code>, \n\t\t\t<code>android</code>, \n\t\t\t<code>pixel 2</code>, \n\t\t\t<code>blackberry</code>. \n\t\t*/\n\n\t/**\t\n\t\t@memberOf Device\t\n\t\t@var {string} type\n\t\t@desc\n\t\t\tDevice type, possible values are: \n\t\t\t<code>mobile</code>, \n\t\t\t<code>tablet</code>, \n\t\t\t<code>desktop</code>. \n\t\t\t<br><br>\n\t\t\tWindows > 8 currently returns tablet, currently no way to differentiate from desktop. */\n\n\t/**\t\n\t\t@memberOf Device\t\n\t\t@var {string} os\n\t\t@desc\n\t\t\tOperating system of device. */\n\n\t/**\t\n\t\t@memberOf Device\t\n\t\t@var {string} osVersion\n\t\t@desc\n\t\t\tVersion of operating system of device. */\n\n\t/** \t\n\t\t@memberOf Device\t\n\t\t@var {string} browser\n\t\t@desc\n\t\t\tBrand of browser. */\n\n\t/**\t\n\t\t@memberOf Device\t\n\t\t@var {string} browserVersion\n\t\t@desc\n\t\t\tVersion of browser. \n\t*/\n\n\t/**\t\n\t\t@memberOf Device\t\n\t\t@var {string} pixelRatio\n\t\t@desc\n\t\t\tPixel ratio of device viewport. \n\t*/\n\n\t/** ------------------------------------------------------------------------------------------------------------- */\n\t// GETTERS\n\n\t/**\t\n\t\t@memberOf Device\t\n\t\t@var {string} orientation\n\t\t@desc\n\t\t\tOrientaion of device viewport: landscape or portrait. \n\t*/\n\tstatic get orientation() {\n\t\treturn window.innerWidth > window.innerHeight ? 'landscape' : 'portrait'\n\t}\n\n\t/**\t\n\t\t@memberOf Device\t\n\t\t@var {object} dimensions\n\t\t@property {number} width\n\t\t\twindow inner-width\n\t\t@property {number} height\n\t\t\twindow inner-height\n\t\t@desc\n\t\t\tThe current dimensions of the device's viewport, returns an object with a width and height \n\t\t\tvalue that are direct returns of windowWidth and windowHeight.\n\t*/\n\tstatic get dimensions() {\n\t\treturn {\n\t\t\twidth: window.innerWidth,\n\t\t\theight: window.innerHeight\n\t\t}\n\t}\n\n\t/** ------------------------------------------------------------------------------------------------------------- */\n\t// PUBLIC METHODS\n\n\t/**\t\n\t\t@memberOf Device\t\n\t\t@method init\n\t\t@desc\n\t\t\tInitializes the module, which is called from within the pipeline.\n\t*/\n\tstatic init = function() {\n\t\tconsole.log('Device.init()')\n\t\tconst D = this\n\t\tD.agentString = navigator.userAgent\n\n\t\tD._getType()\n\t\tD._getBrandAndOS()\n\t\tD._getBrowser()\n\n\t\tif (D.type !== 'desktop' && D.os === 'windows' && D.osVersion <= 8 && D.browser === 'ie' && D.browserVersion < 12) {\n\t\t\tconsole.log(\n\t\t\t\t\"You appear to be on Windows 7 or 8 using Internet Explorer 11 or under. You also appear to be on a touchscreen device. We will assume you're actually on a desktop, since it's extremely unlikely you're on a tablet or mobile device using this specific operating system and browser.\"\n\t\t\t)\n\t\t\tD.type = 'desktop'\n\t\t}\n\n\t\tvar line = Array(70).join('-')\n\t\tvar str = '\\n' + line\n\t\t// str += '\\n AGENT:\\n\\n\\t' + D.agentString + '\\n'\n\t\t// str += '\\n  Brand:\\t\\t\\t' + D.brand\n\t\t// str += '\\n  Product:\\t\\t\\t' + D.product\n\t\t// str += '\\n  Type:\\t\\t\\t\\t' + D.type\n\t\t// str += '\\n  Os:\\t\\t\\t\\t' + D.os + ' - ' + D.osVersion\n\t\t// str += '\\n  Browser:\\t\\t\\t' + D.browser + ' - ' + D.browserVersion\n\t\t// str += '\\n  Dimensions: \\t\\t' + D.dimensions.width + 'x' + D.dimensions.height\n\t\t// str += '\\n  Orientation:\\t\\t' + D.orientation\n\t\t// str += '\\n  Pixel Ratio:\\t\\t' + D.pixelRatio\n\t\tfor (var property in D) {\n\t\t\tif (D.hasOwnProperty(property) && typeof D[property] !== 'function') {\n\t\t\t\tstr += '\\n' + property + ': ' + D[property]\n\t\t\t}\n\t\t}\n\t\tstr += '\\n' + line\n\t\tconsole.log(str)\n\t}\n\n\t/** ------------------------------------------------------------------------------------------------------------- */\n\t// PRIVATE METHODS\n\tstatic _getType = function() {\n\t\tconst D = this\n\t\tvar hasMobile = /(android|mobile)/gi.exec(D.agentString)\n\t\tvar hasTablet = /(tablet|touch)/gi.exec(D.agentString)\n\t\tvar hasIPad = /(ipad)/gi.exec(D.agentString)\n\t\tD.type = 'desktop'\n\t\tif (hasMobile) D.type = 'mobile'\n\t\tif (hasTablet) D.type = 'tablet'\n\t\tif (hasIPad) D.type = 'tablet'\n\t}\n\n\tstatic _getBrandAndOS = function() {\n\t\tvar D = this\n\t\tvar apple = D.agentString.match(/ip(hone|od|ad)|mac/gi)\n\t\tif (apple) {\n\t\t\tD.brand = 'apple'\n\t\t\tD.product = apple[0].toLowerCase()\n\t\t\tvar appleOS = /(OS\\s)(\\X\\s|)([\\d\\.\\_]+)/gi.exec(D.agentString)\n\t\t\tD.os = appleOS[2] == '' ? 'ios' : 'osx'\n\t\t\tD.osVersion = appleOS[3].replace(/\\_/g, '.')\n\t\t\treturn\n\t\t}\n\n\t\tvar android = /(android)\\/?\\s*([0-9\\.]+)/gi.exec(D.agentString)\n\t\tif (android) {\n\t\t\tD.brand = D.product = D.os = android[1].toLowerCase()\n\t\t\tD._checkForSpecial('product', ['pixel 2'], D.agentString.split('(')[1].split(')')[0])\n\t\t\tD.osVersion = android[2]\n\t\t\treturn\n\t\t}\n\n\t\tvar microsoft = /(windows\\snt\\s|windows\\sphone)\\/?\\s*([0-9\\.]+)/gi.exec(D.agentString)\n\t\tif (microsoft) {\n\t\t\tD.brand = 'microsoft'\n\t\t\tD.os = 'windows'\n\n\t\t\tswitch (microsoft[2]) {\n\t\t\t\tcase '5.2':\n\t\t\t\t\tD.osVersion = 'xp'\n\t\t\t\t\tbreak\n\t\t\t\tcase '6.0':\n\t\t\t\t\tD.osVersion = 'vista'\n\t\t\t\t\tbreak\n\t\t\t\tcase '6.1':\n\t\t\t\t\tD.osVersion = '7'\n\t\t\t\t\tbreak\n\t\t\t\tcase '6.2':\n\t\t\t\t\tD.osVersion = '8'\n\t\t\t\t\tbreak\n\t\t\t\tcase '6.3':\n\t\t\t\t\tD.osVersion = '8.1'\n\t\t\t\t\tbreak\n\t\t\t\tcase '10.0':\n\t\t\t\t\tD.osVersion = '10'\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tD.osVersion = microsoft[2]\n\t\t\t}\n\n\t\t\tD.product = microsoft[1].toLowerCase()\n\t\t\tif (D.product.match(/\\snt/i)) {\n\t\t\t\tD.product = 'pc'\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\t// blackberry\n\t\tvar blackberry = D.agentString.match(/(blackberry|bb10|playbook)/i)\n\t\tif (blackberry) {\n\t\t\tD.brand = D.product = D.os = 'blackberry'\n\t\t\tD.osVersion = /(version)\\/?\\s*([0-9\\.]+)/gi.exec(D.agentString)[2]\n\t\t}\n\t}\n\n\tstatic _getBrowser = function() {\n\t\tconst D = this\n\t\tvar browserMatches = /(edge(?=\\/))\\/?\\s*([0-9\\.]+)/i.exec(D.agentString) // check for edge first\n\n\t\t// if it's not edge, check for other common browsers\n\t\tif (!browserMatches) {\n\t\t\tbrowserMatches = D.agentString.match(/(fban|fbav|opera|chrome|crios|safari|firefox|msie|trident(?=\\/))\\/?\\s*([0-9\\.]+)/i)\n\t\t}\n\n\t\t// if we checked for common browsers and got NOTHING in return, let's just use the device's default browser\n\t\tif (!browserMatches || browserMatches.length < 3) {\n\t\t\tconsole.log('we received no browser data, so we are setting it to the default of the device')\n\t\t\tswitch (D.os) {\n\t\t\t\tcase 'ios':\n\t\t\t\t\tD.browser = 'safari'\n\t\t\t\t\tbreak\n\t\t\t\tcase 'windows':\n\t\t\t\t\tD.browser = 'trident'\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tD.browser = 'chrome'\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t\tD.browserVersion = 'os-default'\n\t\t\treturn\n\t\t}\n\n\t\tconsole.log('we received browser data')\n\t\tD.browser = browserMatches[1].toLowerCase()\n\t\tD.browserVersion = browserMatches[2]\n\n\t\tswitch (D.browser) {\n\t\t\tcase 'trident':\n\t\t\t\t// Check for desktop IE 10\n\t\t\t\tvar versionMatch = /\\brv:+(\\d+)/g.exec(D.agentString)\n\t\t\t\tif (versionMatch) D.browserVersion = versionMatch[1]\n\t\t\tcase 'msie':\n\t\t\t\tD.browser = 'ie'\n\t\t\t\tbreak\n\t\t\tcase 'crios':\n\t\t\t\tD.browser = 'chrome'\n\t\t\t\tbreak\n\t\t\tcase 'safari':\n\t\t\t\tvar versionMatch = D.agentString.match(/\\sversion\\/([0-9\\.]+)\\s/i)\n\t\t\t\tif (versionMatch) D.browserVersion = versionMatch[1]\n\t\t\t\tbreak\n\t\t\tcase 'chrome':\n\t\t\t\t// check for Opera\n\t\t\t\tvar versionMatch = D.agentString.match(/\\b(OPR)\\/([0-9\\.]+)/i)\n\t\t\t\tif (versionMatch) {\n\t\t\t\t\tD.browser = 'opera'\n\t\t\t\t\tD.browserVersion = versionMatch[2]\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t}\n\t}\n\n\tstatic _checkForSpecial = function(targetParam, array, focus) {\n\t\tconst D = this\n\t\tvar param\n\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\tparam = array[i].toLowerCase()\n\t\t\tif (focus.match(new RegExp(param, 'i'))) {\n\t\t\t\tD[targetParam] = param\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default Device\n","export { cssToData } from './lib/matrixUtils'\nexport { default as Matrix2D } from './lib/Matrix2D'\nexport { default as Matrix3D } from './lib/Matrix3D'\nexport { default as ParentTransform } from './lib/ParentTransform'\nexport { default as SimpleNoise2D } from './lib/SimpleNoise2D'\nexport { default as Vector2D } from './lib/Vector2D'\n","/**\n\t@npmpackage\n\t@class Matrix2D\n\t@desc\n\t\tImport from <a href=\"https://github.com/ff0000-ad-tech/ad-geom\">ad-geom</a>\n\t\t<br>\n\t\t<codeblock>\n\t\t\t// importing into an ES6 class\n\t\t\timport { Matrix2D } from 'ad-geom'\n\t\t</codeblock>\n\t\t<br><br>\n*/\n\n// Version : Mar 17, 2015 2:15 PM\n/*\n * TODO - write Documentation\n *\t\t- convert to  a, c, b, d, tx, ty ?\n *\t\t- inverse?\n */\nimport { cssToData } from './matrixUtils'\n\nconst Matrix2D = function() {\n\tconst M = this\n\t// initial set identity base matrix array to data\n\tM.identity = new Float32Array([1, 0, 0, 0, 1, 0])\n\tM.data = new Float32Array(M.identity)\n}\n\nMatrix2D.prototype = {\n\tclear: function() {\n\t\tvar M = this\n\t\t//console.log( M.data instanceof Float32Array )\n\t\t//M.data.set ( M.identity );\n\t\tM.data = new Float32Array(M.identity)\n\t},\n\n\trotate: function(radians) {\n\t\tvar M = this\n\t\t// copy the identity to be modified\n\t\tvar _m = new Float32Array(M.identity)\n\n\t\tvar c = Math.cos(radians).toFixed(15)\n\t\tvar s = Math.sin(radians).toFixed(15)\n\n\t\t_m[0] = c\n\t\t_m[1] = s\n\t\t_m[3] = -s\n\t\t_m[4] = c\n\t\t//  cos(rad),  sin(rad), 0,\n\t\t//  -sin(rad), cos(rad), 0,\n\t\t//  0,         0,        1\n\n\t\tM.multiply(_m, false)\n\t\treturn M\n\t},\n\n\tscale: function(x, y) {\n\t\tvar M = this\n\t\t// copy the identity to be modified\n\t\tvar _m = new Float32Array(M.identity)\n\n\t\t_m[0] = x\n\t\t_m[4] = y\n\t\t//  x, 0, 0,\n\t\t//  0, y, 0,\n\t\t//  0, 0, 1\n\n\t\tM.multiply(_m, false)\n\t\treturn M\n\t},\n\n\tskew: function(ax, ay) {\n\t\tvar M = this\n\t\t// copy the identity to be modified\n\t\tvar _m = new Float32Array(M.identity)\n\n\t\t_m[1] = Math.tan(ax)\n\t\t_m[3] = Math.tan(ay)\n\t\t//  1,       tan(ax), 0,\n\t\t//  tan(ay), 1,       0,\n\t\t//  0,       0,       1\n\n\t\tM.multiply(_m)\n\t\treturn M\n\t},\n\n\ttranslate: function(x, y) {\n\t\tvar M = this\n\t\t// copy the identity to be modified\n\t\tvar _m = new Float32Array(M.identity)\n\n\t\t_m[2] = x || 0\n\t\t_m[5] = y || 0\n\t\t//  1, 0, x,\n\t\t//  0, 1, y,\n\t\t//  0, 0, 1\n\n\t\tM.multiply(_m, true)\n\t\treturn M\n\t},\n\n\tmultiply: function(m, invert) {\n\t\tvar M = this\n\t\t// copy the current matrix data into '_c'\n\t\tvar _copy = new Float32Array(M.data)\n\n\t\t// translate multiply needs to be inverted, where others do not\n\t\tvar a = invert ? m : _copy\n\t\tvar b = invert ? _copy : m\n\n\t\tfor (var i = 0; i < 6; i++) {\n\t\t\tvar k = Math.floor(i / 3) * 3\n\t\t\tvar q = i % 3\n\t\t\t//console.log( i, '-', a[_a], b[_b], a[_a+1], b[_b+3], a[_a+2], b[_b+6] )\n\t\t\tM.data[i] = a[k] * b[q] + a[k + 1] * b[q + 3]\n\t\t}\n\t\tM.data[2] += a[2]\n\t\tM.data[5] += a[5]\n\n\t\t// a[0] * b[0] + a[1] * b[3] + a[2] * 0\n\t\t// a[0] * b[1] + a[1] * b[4] + a[2] * 0\n\t\t// a[0] * b[2] + a[1] * b[5] + a[2] * 1\n\t\t// a[3] * b[0] + a[4] * b[3] + a[2] * 0\n\t\t// a[3] * b[1] + a[4] * b[4] + a[2] * 0\n\t\t// a[3] * b[2] + a[4] * b[5] + a[5] * 1\n\t\t// 0\n\t\t// 0\n\t\t// 1\n\t},\n\n\tgetCss: function() {\n\t\t// a, c, tx\n\t\t// b, d, ty\n\t\t// 0, 0, 1\n\t\t// matrix(a, c, b, d, tx, ty)\n\t\tconst d = this.data\n\t\treturn `matrix(${d[0]},${d[1]},${d[3]},${d[4]},${d[2]},${d[5]})`\n\t},\n\n\tgetX: function() {\n\t\treturn this.data[2]\n\t},\n\n\tgetY: function() {\n\t\treturn this.data[5]\n\t},\n\n\tsetFromCss: function(matrixString) {\n\t\t// const cssMatrix = matrixString\n\t\t// \t.match(/\\(([^\\)]+)\\)/)[1]\n\t\t// \t.replace(/\\s/g, '')\n\t\t// \t.split(',')\n\t\t// \t.map(Number)\n\t\tconst matrixArray = cssToData(matrixString)\n\t\tthis.setFromArray(matrixArray)\n\t},\n\n\tsetFromArray: function(matrixArray) {\n\t\tthis.data = [matrixArray[0], matrixArray[1], matrixArray[4], matrixArray[2], matrixArray[3], matrixArray[5]]\n\t}\n}\n\n//http://www.wikihow.com/Inverse-a-3X3-Matrix\n/*function getMatrixInverse (m){\t\n\tvar t = [\n\t\tm[0], m[3], m[6], \n\t\tm[1], m[4], m[7],\n\t\tm[2], m[5], m[8]\n\t];\n\n\t// 0,  1,  2,\n\t// 3,  4,  5,\n\t// 6,  7,  8\n\n\t// a,  b,  0 \n\t// c,  d,  0\n\t// tx, ty, 1\n\tconsole.log( m );\n\tconsole.log( t );\n\t\n\t[\n\t\tm[4],\t-m[1],\tm[1] * m[5] - m[4] * m[2],\n\t\t-m[3],\tm[0],\t(m[0] * m[5] - m[3] * m[2]) * -1,\n\t\t0,\t\t0,\t\tm[0] * m[4] - m[3] * m[1]\n\t]\n\n\tvar d11 = m[4]\n\tvar d12 = - m[1]\n\tvar d13 = m[1] * m[5] - m[4] * m[2]\n\tvar d21 = - m[3]\n\tvar d22 = m[0]\n\tvar d23 = (m[0] * m[5] - m[3] * m[2]) * -1\n\tvar d31 = 0 \n\tvar d32 = 0\n\tvar d33 = m[0] * m[4] - m[3] * m[1]\n\n\tvar d11 = t[4]\n\tvar d12 = - t[3]\n\tvar d13 = t[3] * t[7] - t[4] * t[6]\n\tvar d21 = - t[1]\n\tvar d22 = t[0]\n\tvar d23 = (t[0] * t[7] - t[1] * t[6]) * -1\n\tvar d31 = 0 \n\tvar d32 = 0\n\tvar d33 = t[0] * t[4] - t[1] * t[3]\n\n\tvar d11 = t[4] * t[8] - t[5] * t[7]\n\tvar d12 = (t[3] * t[8] - t[5] * t[6]) * -1\n\tvar d13 = t[3] * t[7] - t[4] * t[6]\n\tvar d21 = (t[1] * t[8] - t[2] * t[7]) * -1\n\tvar d22 = t[0] * t[8] - t[2] * t[6]\n\tvar d23 = (t[0] * t[7] - t[1] * t[6]) * -1\n\tvar d31 = t[1] * t[5] - t[2] * t[4]\n\tvar d32 = (t[0] * t[5] - t[2] * t[3]) * -1\n\tvar d33 = t[0] * t[4] - t[1] * t[3]\n\n\n\n\treturn [ d11, d12, d13, d21, d22, d23, d31, d32, d33 ];\n}*/\n\nexport default Matrix2D\n","/**\n\t@npmpackage\n\t@class Matrix3D\n\t@desc\n\t\tImport from <a href=\"https://github.com/ff0000-ad-tech/ad-geom\">ad-geom</a>\n\t\t<br>\n\t\t<codeblock>\n\t\t\t// importing into an ES6 class\n\t\t\timport { Matrix3D } from 'ad-geom'\n\t\t</codeblock>\n\t\t<br><br>\n*/\nimport { cssToData } from './matrixUtils'\n\nconst Matrix3D = function() {\n\tconst M = this\n\t// initial set identity base matrix array to data\n\tM.identity = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1])\n\tM.data = new Float32Array(M.identity)\n}\n\nMatrix3D.prototype = {\n\tclear: function() {\n\t\tvar M = this\n\t\tM.data.set(M.identity)\n\t},\n\n\trotateX: function(radians) {\n\t\tvar M = this\n\t\tvar c = Math.cos(radians).toFixed(15)\n\t\tvar s = Math.sin(radians).toFixed(15)\n\n\t\t// copy the identity to be modified\n\t\tvar _m = new Float32Array(M.identity)\n\t\t_m[5] = c\n\t\t_m[6] = s\n\t\t_m[9] = -s\n\t\t_m[10] = c\n\t\t//  1, 0,        0,         0,\n\t\t//  0, cos(rad), sin(rad), 0,\n\t\t//  0, -sin(rad), cos(rad),  0,\n\t\t//  0, 0,        0,         1\n\n\t\tM.multiply(_m)\n\t\treturn M\n\t},\n\n\trotateY: function(radians) {\n\t\tvar M = this\n\t\tvar c = Math.cos(radians).toFixed(15)\n\t\tvar s = Math.sin(radians).toFixed(15)\n\n\t\t// copy the identity to be modified\n\t\tvar _m = new Float32Array(M.identity)\n\t\t_m[0] = c\n\t\t_m[2] = -s\n\t\t_m[8] = s\n\t\t_m[10] = c\n\t\t//  cos(rad),  0, -sin(rad), 0,\n\t\t//  0,         1, 0,        0,\n\t\t//  sin(rad), 0, cos(rad), 0,\n\t\t//  0,         0, 0,        1\n\n\t\tM.multiply(_m)\n\t\treturn M\n\t},\n\n\trotateZ: function(radians) {\n\t\tvar M = this\n\t\tvar c = Math.cos(radians).toFixed(15)\n\t\tvar s = Math.sin(radians).toFixed(15)\n\n\t\t// copy the identity to be modified\n\t\tvar _m = new Float32Array(M.identity)\n\t\t_m[0] = c\n\t\t_m[1] = s\n\t\t_m[4] = -s\n\t\t_m[5] = c\n\t\t//  cos(rad),  sin(rad), 0, 0,\n\t\t//  -sin(rad), cos(rad), 0, 0,\n\t\t//  0,         0,        1, 0,\n\t\t//  0,         0,        0, 1\n\n\t\tM.multiply(_m)\n\t\treturn M\n\t},\n\n\tscale: function(x, y) {\n\t\tvar M = this\n\t\t// copy the identity to be modified\n\t\tvar _m = new Float32Array(M.identity)\n\t\t_m[0] = x\n\t\t_m[5] = y\n\t\t//  x, 0, 0, 0,\n\t\t//  0, y, 0, 0,\n\t\t//  0, 0, 1, 0,\n\t\t//  0, 0, 0, 1\n\n\t\tM.multiply(_m)\n\t\treturn M\n\t},\n\n\tskew: function(ax, ay) {\n\t\tvar M = this\n\t\t// copy the identity to be modified\n\t\tvar _m = new Float32Array(M.identity)\n\t\t_m[1] = Math.tan(ay) || 0\n\t\t_m[4] = Math.tan(ax) || 0\n\t\t//  1,       tan(ay), 0, 0,\n\t\t//  tan(ax), 1,       0, 0,\n\t\t//  0,       0,       1, 0,\n\t\t//  0,       0,       0, 1\n\n\t\tM.multiply(_m)\n\t\treturn M\n\t},\n\n\ttranslate: function(x, y, z) {\n\t\tvar M = this\n\t\t// copy the identity to be modified\n\t\tvar _m = new Float32Array(M.identity)\n\t\t_m[12] = x || 0\n\t\t_m[13] = y || 0\n\t\t_m[14] = z || 0\n\t\t//  1, 0, 0, 0,\n\t\t//  0, 1, 0, 0,\n\t\t//  0, 0, 1, 0,\n\t\t//  x, y, z, 1\n\n\t\tM.multiply(_m)\n\t\treturn this\n\t},\n\n\tmultiply: function(m) {\n\t\tvar M = this\n\t\t// copy the current matrix data into '_c'\n\t\tvar _c = new Float32Array(M.data)\n\n\t\tfor (var i = 0; i < 15; i++) {\n\t\t\tconst q = Math.floor(i / 4) * 4\n\t\t\tconst t = i % 3\n\t\t\tif ((i - 3) % 4) {\n\t\t\t\tM.data[i] = _c[q] * m[t] + _c[q + 1] * m[t + 4] + _c[q + 2] * m[t + 8]\n\t\t\t\tif (i > 11) {\n\t\t\t\t\tM.data[i] += m[i]\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tM.data[i] = 0\n\t\t\t}\n\t\t}\n\t\tM.data[15] = 1\n\n\t\t// M.data[0] = _c[0] * m[0] + _c[1] * m[4] + _c[2] * m[8]\n\t\t// M.data[1] = _c[0] * m[1] + _c[1] * m[5] + _c[2] * m[9]\n\t\t// M.data[2] = _c[0] * m[2] + _c[1] * m[6] + _c[2] * m[10]\n\t\t// M.data[3] = 0\n\t\t// M.data[4] = _c[4] * m[0] + _c[5] * m[4] + _c[6] * m[8]\n\t\t// M.data[5] = _c[4] * m[1] + _c[5] * m[5] + _c[6] * m[9]\n\t\t// M.data[6] = _c[4] * m[2] + _c[5] * m[6] + _c[6] * m[10]\n\t\t// M.data[7] = 0\n\t\t// M.data[8] = _c[8] * m[0] + _c[9] * m[4] + _c[10] * m[8]\n\t\t// M.data[9] = _c[8] * m[1] + _c[9] * m[5] + _c[10] * m[9]\n\t\t// M.data[10] = _c[8] * m[2] + _c[9] * m[6] + _c[10] * m[10]\n\t\t// M.data[11] = 0\n\t\t// M.data[12] = _c[12] * m[0] + _c[13] * m[4] + _c[14] * m[8] + m[12]\n\t\t// M.data[13] = _c[12] * m[1] + _c[13] * m[5] + _c[14] * m[9] + m[13]\n\t\t// M.data[14] = _c[12] * m[2] + _c[13] * m[6] + _c[14] * m[10] + m[14]\n\t\t// M.data[15] = 1\n\t},\n\n\tgetCss: function() {\n\t\treturn `matrix3d(${this.data.join(',')})`\n\t},\n\n\tgetX: function() {\n\t\treturn this.data[12]\n\t},\n\n\tgetY: function() {\n\t\treturn this.data[13]\n\t},\n\n\tgetZ: function() {\n\t\treturn this.data[14]\n\t},\n\n\tsetFromCss: function(matrixString) {\n\t\tconst matrixArray = cssToData(matrixString)\n\t\tthis.setFromArray(matrixArray)\n\t},\n\n\tsetFromArray: function(matrixArray) {\n\t\tconst M = this\n\t\t// check for transform: translate3d(0px, 45px, -100px) format\n\t\t// only happens when only changing Z with no rotation or skew\n\t\tif (matrixArray.length === 3) {\n\t\t\tM.translate.apply(M, matrixArray)\n\t\t} else {\n\t\t\tM.data = new Float32Array(matrixArray)\n\t\t}\n\t}\n}\n\nexport default Matrix3D\n","/**\n\t@npmpackage\n\t@class ParentTransform\n\t@desc\n\t\tImport from <a href=\"https://github.com/ff0000-ad-tech/ad-geom\">ad-geom</a>\n\t\t<br>\n\t\t<codeblock>\n\t\t\t// importing into an ES6 class\n\t\t\timport { ParentTransform } from 'ad-geom'\n\t\t</codeblock>\n\t\t<br><br>\n*/\n\n// pseudo?\n// TODO - change order of translations, possible seperate methods that have indexes which can be a re-orderable aray\n//\t\t- convert to prototype pattern for multiple instances?\nimport Matrix2D from './Matrix2D'\nimport { MathUtils } from 'ad-utils'\n\nvar ParentTransform = function(arg) {\n\tvar self = this\n\n\targ = arg || {}\n\t/* --------------------------------------------------------------------------- */\n\t// PUBLIC / PASSED-IN VARIABLES\n\t;(self.rotation = arg.rotation || 0), // in degrees, gets converted to radians before passing to Matrix2D\n\t\t(self.x = arg.x || 0),\n\t\t(self.y = arg.y || 0),\n\t\t(self.scaleX = arg.scaleX || 1),\n\t\t(self.scaleY = arg.scaleY || 1),\n\t\t(self.originX = arg.originX || 0),\n\t\t(self.originY = arg.originY || 0)\n\tself.points = arg.points || []\n\n\t/* --------------------------------------------------------------------------- */\n\t// PUBLIC\n\tself.calculatedPoints = []\n\n\t/* --------------------------------------------------------------------------- */\n\t// PRIVATE VARIABLES\n\tvar _matrix = new Matrix2D()\n\tconsole.log(_matrix)\n\n\t/* --------------------------------------------------------------------------- */\n\t// PUBLIC METHODS\n\tself.addPoint = function(toAdd) {\n\t\tself.points.push(toAdd)\n\t}\n\n\tself.addPoints = function(toAdd) {\n\t\tself.points = self.points.concate(toAdd)\n\t}\n\n\tself.update = function(callback) {\n\t\t_matrix.clear()\n\t\t_matrix.translate(self.x, self.y)\n\t\t_matrix.scale(self.scaleX, self.scaleY)\n\t\t_matrix.rotate(MathUtils.toRadians(self.rotation))\n\n\t\tself.calculatedPoints = []\n\t\tfor (var i = 0; i < this.points.length; i++) {\n\t\t\tvar newPt = transformPoint(self.points[i])\n\t\t\tself.calculatedPoints.push(newPt)\n\t\t}\n\t\tif (callback) callback(self.calculatedPoints)\n\t\treturn self.calculatedPoints\n\t}\n\n\t/* --------------------------------------------------------------------------- */\n\t// PRIVATE METHODS\n\tfunction transformPoint(point) {\n\t\t/*console.log( \"x:\", x, \"y:\", y )\n\t\tconsole.log( \"------------------------\")\n\t\tconsole.log( mtx[0], mtx[1], mtx[2] );\n\t\tconsole.log( mtx[3], mtx[4], mtx[5] );\n\t\tconsole.log( 0, 0, 1 );\n\t\tconsole.log( \"------------------------\")\n\t\t*/\n\n\t\tvar _offSetX = point[0] - self.originX\n\t\tvar _offSetY = point[1] - self.originY\n\n\t\tvar _newX = _offSetX * _matrix.data[0] + _offSetY * _matrix.data[3] + _matrix.data[2]\n\t\tvar _newY = _offSetX * _matrix.data[1] + _offSetY * _matrix.data[4] + _matrix.data[5]\n\t\t_newX += self.originX\n\t\t_newY += self.originY\n\n\t\treturn [_newX, _newY]\n\t}\n}\n\nexport default ParentTransform\n","/**\n    @npmpackage\n    @class SimpleNoise2D\n\t@desc\n\t\tImport from <a href=\"https://github.com/ff0000-ad-tech/ad-geom\">ad-geom</a>\n        <br>\n\t\t<codeblock>\n\t\t\t// importing into an ES6 class\n\t\t\timport { SimpleNoise2D } from 'ad-geom'\n\t\t</codeblock>\n\t\t<br><br>\n        \n        SimpleNoise2D is a workaround for creating 2D noise with lightweight code. \n        It returns a {@link Vector2D} with x and y values between -0.5 - 0.5.\n        For a more sophisticated purpose, please use Perline Noise https://github.com/josephg/noisejs\n*/\nimport Vector2D from './Vector2D'\n\nclass SimpleNoise2D {\n\t\n\tstatic rx = []\n\tstatic ry = []\n\tstatic MAX_VERTICES = 256\n\tstatic MAX_VERTICES_MASK = 255 //SimpleNoise2D.MAX_VERTICES - 1\n\t\n\t/** \n        @memberOf SimpleNoise2D\n        @method get\n        @param {number} x\n            number of location x of the desired noise value\n        @param {number} y\n            number of location y of the desired noise value\n        @returns\n            2D Noise value in {@link Vector2D}\n\n        @example\n            var noiseVec = SimpleNoise2D.get( 0, 5 );\n    */\n\tstatic get = (x, y) => {\n\t\treturn new Vector2D(SimpleNoise2D._getVal('x', x), SimpleNoise2D._getVal('y', y))\n\t}\n\n\tstatic _init = () => {\n\t\tfor (let i = 0; i < SimpleNoise2D.MAX_VERTICES; ++i) {\n\t\t\tif (i === SimpleNoise2D.MAX_VERTICES - 1) {\n\t\t\t\tSimpleNoise2D.rx.push(SimpleNoise2D.rx[0])\n\t\t\t\tSimpleNoise2D.ry.push(SimpleNoise2D.ry[0])\n\t\t\t}\n\t\t\tSimpleNoise2D.rx.push(Math.random() - 0.5)\n\t\t\tSimpleNoise2D.ry.push(Math.random() - 0.5)\n\t\t}\n\t}\n\n\t//a : min value, b: max value, t: step\n\tstatic _lerp = (a, b, t) => {\n\t\treturn a * (1 - t) + b * t\n\t}\n\n\tstatic _getVal = (axis, index) => {\n\t\tif (SimpleNoise2D.rx.length == 0) SimpleNoise2D._init()\n\t\t\n\t\tconst vals = axis === 'x' ? SimpleNoise2D.rx : SimpleNoise2D.ry\n\n\t\tindex = index % SimpleNoise2D.MAX_VERTICES\n\t\tconst t = index - ~~index\n\t\tconst step = t * t * (3 - 2 * t)\n\n\t\tconst min = ~~index & SimpleNoise2D.MAX_VERTICES_MASK\n\t\tconst max = (min + 1) & SimpleNoise2D.MAX_VERTICES_MASK\n\n\t\treturn SimpleNoise2D._lerp(vals[min], vals[max], step)\n\t}\n}\n\nexport default SimpleNoise2D\n","/** \n\t@npmpackage\n\t@class Vector2D\n\t@param {number} x\n\t@param {number} y\n\t@desc\n\t\tImport from <a href=\"https://github.com/ff0000-ad-tech/ad-geom\">ad-geom</a>\n\t\t<br>\n\t\t<codeblock>\n\t\t\t// importing into an ES6 class\n\t\t\timport { Vector2D } from 'ad-geom'\n\t\t</codeblock>\n\t\t<br><br>\n\n\t\tA simple 2D Vector classs \n\t@example\n\t\tvar myVector1 = new Vector2D( 0, 320 );\n\t\tvar myVector2 = new Vector2D( -3, 5.5 );\n*/\nimport { MathUtils } from 'ad-utils'\n\nclass Vector2D {\n\tconstructor(x, y) {\n\t\tthis.x = x || 0\n\t\tthis.y = y || 0\n\t}\n\n\t/** \n\t\t@memberOf Vector2D\n\t\t@method add\n\t\t@param {Vector2D} v\n\t\t@returns {Vector2D}\n\t\t@desc\n\t\t\tAdds another vector to itself\n\t\t@example\n\t        \tmyVector1.add( myVector2 );\n\t*/\n\tadd(v) {\n\t\tthis.x += v.x\n\t\tthis.y += v.y\n\t\treturn this\n\t}\n\n\t/** \n\t\t@memberOf Vector2D\n\t\t@method sub\n\t\t@param {Vector2D} v\n\t\t@returns {Vector2D}\n\t\t@desc\n\t\t\tSubtracts another vector from itself\n \t\t@example\n\t        \tmyVector1.sub( myVector2 );\n    */\n\tsub(v) {\n\t\tthis.x -= v.x\n\t\tthis.y -= v.y\n\t\treturn this\n\t}\n\n\t/** \n\t\t@memberOf Vector2D\n\t\t@method dist\n\t\t@param {Vector2D} v\n\t\t@returns {number} The distance between two vectors as locations\n\t\t@example\n\t        \tvar distance = myVector.dist( myVector2 );\n    */\n\tdist(v) {\n\t\tvar x = this.x - v.x\n\t\tvar y = this.y - v.y\n\t\treturn Math.sqrt(x * x + y * y)\n\t}\n\n\t/** \n\t\t@memberOf Vector2D\n\t\t@method mult\n\t\t@param {number} s \n\t\t@desc\n\t\t\tMultiplies X and Y of the vector by s\n\t\t@example\n\t        \tmyVector.mult( 10.3 );\n    */\n\tmult(s) {\n\t\tthis.x *= s\n\t\tthis.y *= s\n\t\treturn this\n\t}\n\n\t/** \n\t\t@memberOf Vector2D\n\t\t@method div\n\t\t@param {number} s\n\t\t@returns {Vector2D}\n\t\t@desc\n\t\t\tDivides X and Y of the vector by s\n\t\t@example\n\t        \tmyVector.div( 2 );\n    */\n\tdiv(s) {\n\t\tthis.x /= s\n\t\tthis.y /= s\n\t\treturn this\n\t}\n\n\t/** \n\t\t@memberOf Vector2D\n\t\t@method limit\n\t\t@param {number} s\n\t\t@returns {Vector2D}\n\t\t@desc\n\t\t\tLimits the length of the vector if it's longer than s\n\t\t@example\n\t        \tmyVector.limit( 18.2 );\n    */\n\tlimit(s) {\n\t\tvar m = this.length()\n\t\tif (m > s) {\n\t\t\tthis.mult(s / m)\n\t\t}\n\t\treturn this\n\t}\n\n\t/** \n\t\t@memberOf Vector2D\n\t\t@method length\n\t\t@returns {number} The length of the vector.\n\t\t@example\n\t        \tvar length = myVector.length();\n    */\n\tlength() {\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y)\n\t}\n\n\t/** \n\t\t@memberOf Vector2D\n\t\t@method normalize\n\t\t@returns {Vector2D}\n\t\t@desc\n\t\t\tNormalizes the vector( ie scale the vector to length of 1 )\n\t\t@example\n\t        \tmyVector.normalize();\n    */\n\tnormalize() {\n\t\tvar ratio = 1 / this.length()\n\t\treturn this.mult(ratio)\n\t}\n\n\t/** \n\t\t@memberOf Vector2D\n\t\t@method clone\n\t\t@returns {Vector2D}\n\t\t@desc\n\t\t\tCreates a new Vector2D with and same x and y\n\t\t@example\n\t        \tvar newVecotor = myVector.clone();\n    */\n\tclone() {\n\t\treturn new Vector2D(this.x, this.y)\n\t}\n\n\t/** \n\t\t@memberOf Vector2D\n\t\t@method degreeToVector\n\t\t@returns {Vector2D}\n\t\t@desc\n\t\t\tConverts a degree 0 - 360 to a normalized vector\n\t\t@example\n\t\t    \tvar myVecotor = Vector2D.degreeToVector( 45 );\n\t*/\n\tstatic degreeToVector(d) {\n\t\tvar theta = MathUtils.toRadians(d)\n\t\treturn new Vector2D(Math.cos(theta), Math.sin(theta))\n\t}\n\n\t/** \n\t\t@memberOf Vector2D\n\t\t@method random\n\t\t@param {number} degreeIncrement\n\t\t\tOptional, the degree increment of the random vector, defaults to 0.01\n\t\t@returns {Vector2D}\n\t\t@desc\n\t\t\tReturns a random normalized vector \n\t\t@example\n\t\t\tvar myVecotor1 = Vector2D.random();\n\t\t\tvar myVecotor2 = Vector2D.random( 1 );\n\t*/\n\tstatic random(degreeIncrement) {\n\t\tvar inc = degreeIncrement || 0.01\n\t\treturn Vector2D.degreeToVector(MathUtils.random(0, 360, inc))\n\t}\n}\n\nexport default Vector2D\n","export function cssToData(matrixString) {\n\t// |px = checks for transform: translate3d(0px, 45px, -100px) format\n\t// only happens when only changing Z with no rotation or skew\n\t// will return only 3 numbers. Matrix3D knows how to consume\n\treturn matrixString\n\t\t.match(/\\(([^\\)]+)\\)/)[1]\n\t\t.replace(/\\s|px/g, '')\n\t\t.split(',')\n\t\t.map(Number)\n}\n","/**\n * @class Loader\n * @param {string|array|Loader} target\n * \tload target\n * @param {object} arg\n * \tObject with any of the following optional parameters for customizing the load routine.\n * @property {string} name\n * @property {boolean} prioritize\n * @property {boolean} cacheBuster\n * @property {object} scope\n * @property {function} onComplete\n * @property {function} onProgress\n * @property {function} onFail\n * @property {string} prepend\n * \tA file path to be added to all loader targets.\n * @property {function} platformGetUrl\n * \tA callback method to wrap the url, such as DoubleClick's <code>Enabler.getUrl</code>.\n * @property {string} fileType\n * \tManually assign the file type, eg: <code>jpg</code>, <code>svg</code>.\n * @desc\n * This class is designed to handle all load processes: images, fonts and data, even other Loaders! Below are multiple use case scenarios.\n * <br><br>\n * <b>Single Load:</b>\n * <codeblock>\n * import { Loader } from 'ad-load'\n *\n * var singleLoader = new Loader('images/img0.jpg', { onComplete:handleLoadComplete, scope:this })\n * singleLoader.load()\n *\n * function handleLoadComplete(target) {\n * \tconsole.log(target.content[0].dataRaw)\n * }\n * </codeblock>\n * <br><br>\n * <b>Array of loads from one Constructor:</b>\n * <codeblock>\n * // Array load - you can pass in multiple files on creation of a Loader\n * var arrayLoader = new Loader(['font1.ttf', 'font2.ttf'], { name:'fontLoader', onComplete:handleLoadComplete, prepend:adParams.commonPath + 'fonts/' })\n * arrayLoader.load()\n *\n * function handleLoadComplete(target) {\n * \tconsole.log(target.content[0].dataRaw)\n * }\n * </codeblock>\n * <br><br>\n * <b>Complex Load:</b>\n * <codeblock>\n * var myLoader = new Loader('images/img0.jpg', { onComplete:handleLoadComplete, scope:this })\n *\n * // append to that loader\n * myLoader.add('images/img1.jpg')\n *\n * // append multiple\n * myLoader.add(['images/img2.jpg', 'images/img3.jpg'])\n * myLoader.load()\n *\n * function handleLoadComplete(target) {\n * \tconsole.log( target.content[0].dataRaw )\n * }\n * </codeblock>\n * <br><br>\n * <b>Nested Loads:</b>\n * <codeblock>\n * // Nested loads - best practice is to make a loader for one file type\n * var masterLoader = new Loader({ name:'master', onComplete:handleAllComplete, onProgress:handleAllProgress, onFail:handleLoadFail, scope:this })\n *\n * // declare a var to reference later, then add it to main loader\n * var _imgLoader = new Loader(['images/img2.jpg', 'images/img3.jpg'], { name:'load_images', prepend:'images/' })\n * masterLoader.add(_imgLoader)\n *\n * // or just add a new loader instance\n * masterLoader.add(\n * \tnew Loader(['font1.ttf', 'font2.ttf' ], { name:'load_fonts', prepend: 'fonts/' })\n * )\n * masterLoader.add(\n * \tnew Loader(['AdData.js', 'Align.js', 'Clamp.js'], { name:'load_js', prepend: 'utils/' })\n * )\n * masterLoader.load()\n *\n * function handleLoadComplete(target) {\n * \tconsole.log(target.content[0].dataRaw)\n * }\n * function handleLoadProgress(target) {\n * \tconsole.log(target.progress, target.rawProgress)\n * }\n * function handleLoadFail(target) {\n * \tconsole.log(target);\n * }\n * function handleAllComplete(target) {\n * \tvar a = target.getLoader(_imgLoader)\n * \tconsole.log(\"Loader found by var:\", a)\n *\n * \tvar b = target.getContent('font1.ttf')\n * \tconsole.log(\"Content found by name:\", b)\n *\n * \tvar c = target.getLoader('load_fonts')\n * \tconsole.log(\"Loader found by url:\", c)\n * }\n * </codeblock>\n */\n\n/* TODO\n\t- change getAllContent() to take secret boolean so can call getAllContentRaw(true) for no extra loop\n\t- ? comment out progress calculations\n*/\n\nimport { fbaDataToBlobs } from 'ad-global'\n\nimport { LoaderBase } from './lib/mixin/LoaderBase.js'\nimport * as Utils from './lib/mixin/LoaderUtils.js'\nimport ImageLoader from './lib/single/ImageLoader.js'\nimport InlineLoader from './lib/single/InlineLoader.js'\nimport DataLoader from './lib/single/DataLoader.js'\nimport FontLoader from './lib/single/FontLoader.js'\nimport { setTicker } from './lib/mixin/LoaderTickerMixin.js'\n\nexport { Utils as LoaderUtils, ImageLoader, InlineLoader, DataLoader, FontLoader, setTicker }\n\nexport default class Loader extends LoaderBase {\n\tconstructor(...args) {\n\t\tsuper(...args)\n\t\tlet arg = arguments && arguments.length > 1 ? arguments[1] : arguments[0] || {}\n\n\t\tconst L = this\n\n\t\tL._queue = {}\n\t\tL._total = 0\n\t\tL._active = false\n\t\tL._startedCount = 0\n\n\t\tL.prepend = arg.prepend || ''\n\t\tL.platformGetUrl = arg.platformGetUrl\n\t\tL.fileType = arg.fileType || null\n\t\tL.content = []\n\t\tL.crossOrigin = arg.crossOrigin || undefined\n\n\t\tL.add(arguments[0])\n\t}\n\n\t/* ---------------------------------------------------------------------------------------------------------------- */\n\t// PUBLIC\n\n\t/**\n\t * @memberOf Loader\n\t * @method add\n\t * @param {string|array|Loader} arg\n\t * \ta file, array of files, or Loader instance\n\t * @desc\n\t * \tAdd to the load queue: a single or array of files or even another Loader.\n\t * @example\n\t * // Single load\n\t * var imgLoader = new Loader({ name:'img_loader' })\n\t *\n\t * // add to that loader\n\t * imgLoader.add('images/img1.jpg')\n\t *\n\t * // add multiple\n\t * imgLoader.add(['images/img2.jpg', 'images/img3.jpg'])\n\t *\n\t * // Nested loads - best practice is to make a loader for one file type\n\t * var mainLoader = new Loader({ name:'main', onComplete:handleComplete })\n\t *\n\t * mainLoader.add(imgLoader)\n\t *\n\t * // or just add a new loader instance\n\t * mainLoader.add(new Loader(['font1.ttf', 'font2.ttf'], { name:'load_fonts' }))\n\t */\n\tadd(arg) {\n\t\tconst L = this\n\t\tif (typeof arg === 'string') {\n\t\t\t// single load as first parameter\n\t\t\tL._addSingleLoad(arg)\n\t\t} else if (arg instanceof Array) {\n\t\t\t// first parameter is an Array of urls\n\t\t\tfor (var i = 0; i < arg.length; i++) {\n\t\t\t\tL._addSingleLoad(arg[i])\n\t\t\t}\n\t\t} else if (arg instanceof Loader) {\n\t\t\tif (arg.content && arg.content[0] && arg.content[0].fileType == 'fba') {\n\t\t\t\tL._addFbaSubLoads(arg.content[0])\n\t\t\t} else {\n\t\t\t\tL._addSubLoad(arg)\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @memberOf Loader\n\t * @method load\n\t * @desc\n\t * \tStarts the load process.\n\t * @example\n\t * // Single load\n\t * var imgLoader = new Loader({ onComplete:handleComplete })\n\t * imgLoader.load()\n\t */\n\tload() {\n\t\tconst L = this\n\t\tL._active = true\n\t\tif (L._total <= 0) {\n\t\t\tconsole.log('Loader \"' + L.name + '\" has NO assets to be loaded.')\n\t\t} else {\n\t\t\tlet _has = false\n\t\t\tlet _output = ''\n\t\t\tfor (let l in L._queue) {\n\t\t\t\tif (!(L._queue[l] instanceof Loader)) {\n\t\t\t\t\tif (!_has) {\n\t\t\t\t\t\t_has = true\n\t\t\t\t\t\t_output += 'Loader \"' + L.name + '\" requesting:'\n\t\t\t\t\t}\n\t\t\t\t\tconst fileName = L._queue[l].fileName\n\t\t\t\t\tconst extension = L._queue[l].fileType\n\t\t\t\t\tconst extensionIndex = fileName.indexOf('.' + extension)\n\t\t\t\t\tconst fileAndExtension = extensionIndex > -1 ? fileName : fileName + '.' + extension\n\t\t\t\t\t_output += '\\n\\t -> ' + (L._queue[l].prepend || '') + fileAndExtension\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (_has) {\n\t\t\t\tconsole.log(_output)\n\t\t\t}\n\t\t}\n\n\t\tL._startSingleLoad(0)\n\t}\n\n\t/**\n\t * @memberOf Loader\n\t * @method getAllContent\n\t * @returns {array}\n\t * \tAn array of LoaderData Objects with relevant loading information (like an Event Object).\n\t * \tAccess the loaded content via the property 'dataRaw': an image, raw Json, raw XML, or font name\n\t * @desc\n\t * \tGet all loaded content from the Loader and all nested Loaders\n\t * @example\n\t *  var myLoader = new Loader(['img1.jpg', 'img2.jpg', 'img3.jpg'], { onComplete:handleComplete })\n\t *  myLoader.load()\n\t *\n\t *  function handleComplete(target) {\n\t *  \tvar myContent = target.getAllContent()\n\t *  \tconsole.log(\"Content found:\", myContent)\n\t *  }\n\t */\n\tgetAllContent() {\n\t\tlet _found = []\n\t\tfunction searchSubLoader(content) {\n\t\t\tfor (let i = 0; i < content.length; i++) {\n\t\t\t\t//console.log( \"   -> sub:\", content[i] )\n\t\t\t\tif (content[i] instanceof Loader) {\n\t\t\t\t\tsearchSubLoader(content[i].content)\n\t\t\t\t} else {\n\t\t\t\t\t_found.push(content[i])\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsearchSubLoader(this.content)\n\n\t\tif (_found.length < 1) {\n\t\t\tconsole.log('No Content found')\n\t\t}\n\n\t\treturn _found\n\t}\n\n\t/**\n\t * @memberOf Loader\n\t * @method getAllContentRaw\n\t * @returns {array}\n\t * \tAn array of only the raw data: an image, raw Json, raw XML, or font name\n\t * @desc\n\t * \tGet all raw loaded content from the Loader and all nested Loaders, no LoaderData Objects\n\t * @example\n\t * var myLoader = new Loader(['img1.jpg', 'img2.jpg', 'img3.jpg'], { onComplete:handleComplete })\n\t * myLoader.load()\n\t *\n\t * function handleComplete(target) {\n\t * \tvar myContent = target.getAllContentRaw()\n\t * \tconsole.log(\"Content found:\", myContent)\n\t * }\n\t */\n\tgetAllContentRaw() {\n\t\tlet _content = this.getAllContent()\n\t\tfor (let i = 0; i < _content.length; i++) {\n\t\t\t_content[i] = _content[i].dataRaw\n\t\t}\n\t\treturn _content\n\t}\n\n\t/**\n\t * @memberOf Loader\n\t * @method getLoader\n\t * @param {string} id\n\t * \tthe string optionally assigned to the 'name' property or the variable assigned to the Loader instance\n\t * @returns {Loader}\n\t * @desc\n\t * \tGet the Loader instance from the Loader or any nested Loader\n\t * @example\n\t * var mainLoader = new Loader({ name:'main', onComplete:handleLoadComplete })\n\t * mainLoader.add(\n\t * \tnew Loader(['font1.ttf', 'font2.ttf'], { name: 'load_fonts', prepend: 'fonts/' }\n\t * \t)\n\t * )\n\t * mainLoader.add(\n\t * \tnew Loader(['Ad_Data.js', 'NetUtils.js'], { name: 'load_js', prepend: 'utils/' })\n\t * )\n\t * mainLoader.load()\n\t *\n\t * function handleLoadComplete(target) {\n\t * \tvar fontLoader = target.getLoader('load_fonts')\n\t * }\n\t */\n\tgetLoader(id) {\n\t\tlet _found = null\n\t\tfunction searchSubLoader(content) {\n\t\t\tfor (let i = 0; i < content.length; i++) {\n\t\t\t\t//console.log( \"   -> sub:\", content[i] )\n\t\t\t\tif (content[i] instanceof Loader) {\n\t\t\t\t\tif (content[i] && (content[i].name === id || content[i] === id)) {\n\t\t\t\t\t\t_found = content[i]\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsearchSubLoader(content[i].content)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsearchSubLoader(this.content)\n\n\t\tif (!_found) {\n\t\t\tconsole.log('No Loader found of that name')\n\t\t}\n\n\t\treturn _found\n\t}\n\n\t// -------------------------------------------------------------------------------------------------------------\n\t// PRIVATE METHODS\n\t_addSingleLoad(url, fileName, fileTypeOverwrite) {\n\t\tconst L = this\n\n\t\t// fileTypeOverwrite can be a string of the explicit file type\n\t\tconst fileType = fileTypeOverwrite || L.fileType || Utils.getFileType(url)\n\t\tlet loaderType\n\n\t\tswitch (fileType) {\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\t\t\tcase 'gif':\n\t\t\tcase 'png':\n\t\t\tcase 'svg':\n\t\t\t\tloaderType = ImageLoader\n\t\t\t\tbreak\n\t\t\tcase 'ttf':\n\t\t\tcase 'woff':\n\t\t\t\tloaderType = FontLoader\n\t\t\t\tbreak\n\t\t\tcase 'json':\n\t\t\tcase 'fba':\n\t\t\tcase 'bin':\n\t\t\tcase 'binary':\n\t\t\tcase 'svg+xml':\n\t\t\t\tloaderType = DataLoader\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tloaderType = InlineLoader\n\t\t}\n\n\t\t// either the data as binary OR the file path and name\n\t\tconst urlChoice = fileTypeOverwrite ? url : L.prepend + url\n\t\t// console.log('\\t url:', url, '| loaderType:', loaderType)\n\n\t\tvar singleLoader = new loaderType(urlChoice, {\n\t\t\tscope: L,\n\t\t\tplatformGetUrl: L.platformGetUrl,\n\t\t\tonComplete: L._handleSingleLoadComplete,\n\t\t\tonFail: L._handleFail,\n\t\t\tfileType: fileType,\n\t\t\tcacheBuster: L.cacheBuster,\n\t\t\tcrossOrigin: L.crossOrigin\n\t\t})\n\t\t// console.log('\\t singleLoader:', singleLoader)\n\n\t\t// from fba, the files are binary, so there is\n\t\t// no file name to reference so set it here\n\t\tif (fileName) {\n\t\t\tsingleLoader.fileName = fileName\n\t\t}\n\n\t\tsingleLoader.queueIndex = L._total\n\n\t\tL._queue[L._total] = singleLoader\n\t\tL._total++\n\t\t// console.log(L._total, L._queue)\n\t}\n\n\t_addSubLoad(loader) {\n\t\tconst L = this\n\t\t//console.log(L.name, '_addSubLoad()')\n\t\tloader.onComplete = L._handleSingleLoadComplete.bind(L)\n\t\tloader.onProgress = L._handleProgress.bind(L)\n\t\tloader.onFail = L._handleFail\n\t\t//loader.platformGetUrl = L.platformGetUrl;\n\t\tloader.queueIndex = L._total\n\t\tL._queue[L._total] = loader\n\t\tL._total++\n\t}\n\n\t_addFbaSubLoads(loader) {\n\t\tconst blobs = fbaDataToBlobs(loader.dataRaw)\n\t\tblobs.forEach(blob => {\n\t\t\tthis._addSingleLoad(blob.src, blob.path, blob.fileType)\n\t\t})\n\t}\n\n\t_startSingleLoad(i) {\n\t\tconst L = this\n\t\tconst _inst = L._queue[i]\n\t\t// console.log(L.name, '_startSingleLoad()', 'index:', i, 'total:', L._total)\n\t\tif (L._total == 0) {\n\t\t\t// fire a complete because there are no requests\n\t\t\tL._handleComplete()\n\t\t} else {\n\t\t\tif (i < L._total) {\n\t\t\t\t// console.log( L.name, '_startSingleLoad() ->', _inst )\n\t\t\t\tif (!(_inst instanceof Loader)) {\n\t\t\t\t\t//console.log( _inst.name, 'is a subloader' )\n\t\t\t\t\t//} else {\n\t\t\t\t\tif (i < L._total - 1) {\n\t\t\t\t\t\tL._startLoadTimeOut(++i)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t_inst.load()\n\t\t\t}\n\t\t}\n\t}\n\n\t_startLoadTimeOut(i) {\n\t\tconst L = this\n\t\tsetTimeout(() => {\n\t\t\tL._startSingleLoad(i)\n\t\t}, 10)\n\t}\n\n\t// -------------------------------------------------------------------------------------------------------------\n\t// EVENT HANDLERS\n\t_handleSingleLoadComplete(target) {\n\t\tconst L = this\n\t\t// console.log('_handleSingleLoadComplete(), target:', target)\n\t\tL.content[target.queueIndex] = target\n\t\tdelete L._queue[target.queueIndex]\n\n\t\tL._handleProgress()\n\n\t\t// is a nested Loader\n\t\tif (target.url == undefined) {\n\t\t\t//console.log( '\"' + L.name + '\" nested Loader \"' + target.name + '\" Complete' );\n\t\t\tif (target.queueIndex < L._total - 1) {\n\t\t\t\tL._startLoadTimeOut(target.queueIndex + 1)\n\t\t\t}\n\t\t}\n\t}\n\n\t_handleProgress() {\n\t\tconst L = this\n\t\tconst _length = L.content.length\n\t\tlet _count = 0\n\t\tfor (let i = 0; i < _length; i++) {\n\t\t\tif (L.content[i]) _count++\n\t\t}\n\t\t// console.log(L.name, '_handleProgress()', '_count:', _count, 'total:', L._total)\n\n\t\tconst _consecutive = _count\n\t\tlet _subProgress = 0\n\n\t\tif (_count < L._total && L._queue[_count]) {\n\t\t\t_subProgress = L._queue[_count].progress / L._total || 0\n\t\t}\n\n\t\tL.progress = _consecutive / L._total + _subProgress\n\t\tL.rawProgress = _count / L._total + _subProgress\n\n\t\tL.onProgress.call(L.scope, L)\n\t\t//console.log( 'progress')\n\t\tif (_count >= L._total) {\n\t\t\t//console.log( 'Loader calling _handleComplete()')\n\t\t\tL._handleComplete()\n\t\t}\n\t}\n\n\t_handleComplete() {\n\t\tconst L = this\n\t\t// console.log('Loader \"' + L.name + '\" is Complete')\n\t\tL.onComplete.call(L.scope, L)\n\t}\n}\n","export class LoaderBase {\n\tconstructor(...args) {\n\t\tconst arg = arguments && arguments.length > 1 ? arguments[1] : arguments[0] || {}\n\n\t\tconst L = this\n\n\t\tL.onComplete = arg.onComplete || function() {}\n\t\tL.onFail = arg.onFail || function() {}\n\t\tL.onProgress = arg.onProgress || function() {}\n\t\tL.name = arg.name || ''\n\t\tL.scope = arg.scope || L\n\t\tL.dataRaw\n\t\tL.cacheBuster = arg.cacheBuster || false\n\n\t\tL._failCalled = false\n\t}\n\n\t_handleFail() {\n\t\tconst L = this\n\t\t// console.log( 'LoaderBase._handleFail()' )\n\t\tif (!L._failCalled) {\n\t\t\tL._failCalled = true\n\t\t\tL.onFail.call(L.scope, L)\n\n\t\t\tconsole.log('Loader \"' + L.name + '\" Fail:', L.url)\n\t\t}\n\t}\n}\n","import * as Utils from './LoaderUtils.js'\nimport { matchProtocolTo } from 'ad-global'\n\nexport const LoaderSourceMixin = superclass =>\n\tclass extends superclass {\n\t\tconstructor(...args) {\n\t\t\tsuper(...args)\n\t\t\tconst arg = arguments && arguments.length > 1 ? arguments[1] : arguments[0] || {}\n\n\t\t\tconst L = this\n\n\t\t\tL.url = matchProtocolTo(arguments[0] || '')\n\n\t\t\tif (arg.platformGetUrl) {\n\t\t\t\tL.platformGetUrl = arg.platformGetUrl\n\t\t\t\tL.url = arg.platformGetUrl(L.url)\n\t\t\t}\n\n\t\t\tL.fileName = arg.id === undefined ? Utils.getFileName(L.url) : arg.id\n\t\t\tL.fileType = arg.fileType || Utils.getFileType(L.url)\n\t\t}\n\t}\n","import * as Utils from './LoaderUtils.js'\n\nexport const LoaderTickerMixin = superclass =>\n\tclass extends superclass {\n\t\tconstructor(...args) {\n\t\t\tsuper(...args)\n\t\t}\n\n\t\t_setTicker(args) {\n\t\t\tconst L = this\n\t\t\tsetTicker({\n\t\t\t\tcontent: args.content,\n\t\t\t\tcss: args.css,\n\t\t\t\twidth: args.width,\n\t\t\t\tfont: args.font,\n\t\t\t\thandleFail: L._handleFail.bind(L),\n\t\t\t\thandleTickerComplete: L._handleTickerComplete.bind(L)\n\t\t\t})\n\t\t}\n\n\t\t_removeTickerNode(node) {\n\t\t\tnode.parentNode.removeChild(node)\n\t\t}\n\t}\n\nexport function setTicker({ content, css, width, font, handleFail, handleTickerComplete } = {}) {\n\tlet node = document.createElement('div')\n\tnode.innerHTML = content\n\tnode.style.cssText = css || ''\n\n\tdocument.body.appendChild(node)\n\n\tconst _width = width != undefined ? width : node.offsetWidth\n\n\tnode.style.fontFamily = font || ''\n\n\tlet _timeOut = setTimeout(() => {\n\t\tclearInterval(_interval)\n\t\thandleFail && handleFail()\n\t}, 5000)\n\n\tlet _interval = setInterval(() => {\n\t\tif (node.offsetWidth != _width) {\n\t\t\tclearTimeout(_timeOut)\n\t\t\tclearInterval(_interval)\n\n\t\t\thandleTickerComplete && handleTickerComplete(node)\n\t\t}\n\t}, 10)\n}\n","/**\n * @class LoaderUtils\n * @desc Various single use utilities for file names & paths, and query manipulations.\n * <codeblock>\n * import { LoaderUtils } from 'ad-load'\n * </codeblock>\n */\nimport { matchProtocolTo } from \"ad-global\";\n\n/**\n * @memberOf LoaderUtils\n * @method createXMLHttpRequest\n * @return {XMLHttpRequest}\n */\nexport function createXMLHttpRequest() {\n  try {\n    return new XMLHttpRequest();\n  } catch (e) {}\n  try {\n    return new ActiveXObject(\"Msxml2.XMLHTTP\");\n  } catch (e) {}\n  console.warn(\"XMLHttpRequest not supported\");\n  return null;\n}\n\n/**\n * @memberOf LoaderUtils\n * @method getFileName\n * @param {string} url\n * \t\tA full file path including the file name\n * @returns {string}\n * \t\tStrips a file path and extension to return the file name\n */\nexport function getFileName(url) {\n  let extension = url.lastIndexOf(\".\");\n  let directory = url.lastIndexOf(\"/\") + 1;\n  if (directory > extension) extension = undefined;\n  return url.substring(directory, extension);\n}\n\n/**\n * @memberOf LoaderUtils\n * @method getFontName\n * @param {string} url\n * \t\tA full file path including the file name\n * @returns {string}\n * \t\tStrips a file path and extension to return the file name\n */\nexport function getFontName(url) {\n  return url.substring(url.lastIndexOf(\"/\") + 1, url.indexOf(\".\"));\n}\n\n/**\n * @memberOf LoaderUtils\n * @method getFileType\n * @param {string} url\n * \t\tA full file path including the file name\n * @returns {string}\n * \t\tDetermines the file type and returns that\n */\nexport function getFileType(url) {\n  url = url || \"\";\n  const _index = url.indexOf(\"?\");\n  if (_index > -1) {\n    url = url.substr(0, _index);\n  }\n  const _split = url.match(/[^\\\\]*\\.(\\w+)$/);\n  const _base64 = url.match(\n    /(?:(?:image)|(?:font))\\/(jpeg|jpg|png|gif|svg|ttf|woff)/\n  );\n  const _type = _split ? _split[1] : _base64 ? _base64[1] : \"unknown\";\n\n  return _type;\n}\n\n/**\n * @memberOf LoaderUtils\n * @method getFullUrl\n * @param {string} prepend\n * \t\tThe file path\n * @param {string} file\n * \t\tThe file name with extension\n * @param {function} platformGetUrl\n * \t\tOptional platform specific url formatter\n * @returns {string}\n * \t\tDetermines the full url path to a file by either matching the protocol or\n * \t\tutilizing a platform tool, such as DoubleClick's <code>Enabler.getUrl</code>\n */\nexport function getFullUrl(prepend, file, platformGetUrl) {\n  const _prepend = getUrlPrepend(prepend);\n  let _url = matchProtocolTo(_prepend + _file);\n  if (platformGetUrl) {\n    _url = platformGetUrl(_url);\n  }\n  return url;\n}\n\n/**\n * @memberOf LoaderUtils\n * @method getUrlPrepend\n * @param {string} path\n * \t\tA full file path including the file name\n * @returns {string}\n * \t\tRemoves the file name and extension to retun only the path\n */\nexport function getUrlPrepend(path) {\n  return path ? path.replace(/\\/?$/, \"/\") : \"\";\n}\n\n/**\n * @memberOf LoaderUtils\n * @method getParamsFromData\n * @param {string|object} query\n * \t\tA query string or object of key/value pairs\n * @returns {string}\n * \t\tFormats a query string and returns it\n */\nexport function getParamsFromData(query) {\n  if (typeof query === \"string\") {\n    /*\n     * TODO - check the string is formatted correctly?\n     */\n    return query;\n  } else {\n    let queryString = \"\";\n    for (let prop in query) {\n      console.log(\"      prop =\", prop);\n      queryString += prop + \"=\" + query[prop] + \"&\";\n    }\n\n    return queryString.substr(0, queryString.length - 1);\n  }\n}\n","/**\n * @class DataLoader\n * @param {string} target\n * \tload target\n * @param {object} arg\n * \tObject with any of the following optional parameters for customizing the load routine.\n * @property {string} query\n * @property {string} name\n * @property {boolean} cacheBuster\n * @property {string} method\n * \t\"POST\" or \"GET\"\n * @property {object} scope\n * @property {function} onComplete\n * @property {function} onProgress\n * @property {function} onFail\n * @property {function} platformGetUrl\n * \tA callback method to wrap the url, such as DoubleClick's <code>Enabler.getUrl</code>.\n * @property {string} fileType\n * \tManually assign the file type, eg: <code>json</code>, <code>xml</code>, <code>bin</code>.\n * @desc\n * This class is designed to handle a single load via XMLHttpRequest\n */\nimport { LoaderBase } from \"../mixin/LoaderBase.js\";\nimport { LoaderSourceMixin } from \"../mixin/LoaderSourceMixin.js\";\nimport * as Utils from \"../mixin/LoaderUtils.js\";\n\nexport default class DataLoader extends LoaderSourceMixin(LoaderBase) {\n  constructor(...args) {\n    super(...args);\n    let arg =\n      arguments && arguments.length > 1 ? arguments[1] : arguments[0] || {};\n\n    const D = this;\n    D.method = (arg.method || \"get\").toLowerCase();\n    D.query = arg.query || null;\n    D.responseType = arg.responseType || null;\n  }\n\n  /**\n   * @memberOf DataLoader\n   * @method load\n   * @desc\n   * \tStarts the load process.\n   * @example\n   * // Single load\n   * var dataLoader = new DataLoader('data.json', {\n   * \tname: 'my-data=loader',\n   * \tcacheBuster: true,\n   * \tonComplete: handleComplete,\n   * \tonFail: handleFail\n   * })\n   * dataLoader.load()\n   *\n   * function handleComplete(target) {\n   * \tvar loadedContent = target.dataRaw\n   * }\n   * function handleFail(error) {\n   * \t// error handle\n   * }\n   */\n  load() {\n    const D = this;\n    // console.log('DataLoader \"' + D.name + '\" requesting:\\n\\t->', D.url)\n\n    let queryString = null;\n    const isPost = D.method === \"post\";\n\n    D.req = Utils.createXMLHttpRequest();\n\n    if (D.responseType != undefined) D.req.responseType = D.responseType;\n\n    let url = D.url;\n\n    if (D.query) {\n      queryString = Utils.getParamsFromData(D.query);\n      encodeURIComponent(queryString);\n      if (!isPost) {\n        url += \"?\" + queryString;\n        queryString = null;\n      }\n    }\n\n    if (D.cacheBuster) {\n      url += D.query && !isPost ? \"&\" : \"?\";\n      url += \"cb=\" + new Date().getTime();\n    }\n\n    D.req.onreadystatechange = D._handleStateChange.bind(D);\n    D.req.open(D.method, url, true);\n\n    // Set Mime Type\n    // NOTE: responseType has to be set AFTER the XmlHttpRequest.open() is called because IE is terrible\n    switch (D.fileType) {\n      case \"xml\":\n        if (D.req.overrideMimeType) D.req.overrideMimeType(\"text/xml\");\n        break;\n      case \"json\":\n        if (D.req.overrideMimeType) D.req.overrideMimeType(\"application/json\");\n        break;\n      case \"fba\":\n      case \"bin\":\n      case \"binary\":\n        D.responseType = D.req.responseType = \"arraybuffer\";\n        //D.req.overrideMimeType( 'text/plain charset=x-user-defined' )\n        break;\n    }\n\n    if (D.method === \"post\") {\n      D.req.setRequestHeader(\n        \"Content-type\",\n        \"application/x-www-form-urlencoded\"\n      );\n    }\n\n    D.req.send(queryString);\n  }\n\n  _handleStateChange(target) {\n    const D = this;\n    switch (D.req.readyState) {\n      case 3:\n        if (this.req.status == 200) {\n          D.dataRaw = D.responseType ? D.req.response : D.req.responseText;\n          D._handleProgress(D);\n        }\n        break;\n      case 4:\n        if (D.req.status == 200) {\n          D.dataRaw = D.responseType ? D.req.response : D.req.responseText;\n          D._handleComplete(D);\n        } else {\n          D._handleFail({\n            target: target\n          });\n        }\n        break;\n    }\n  }\n\n  _handleProgress() {\n    const D = this;\n    D.onProgress.call(D.scope, D);\n  }\n\n  _handleComplete() {\n    const D = this;\n    // console.log('DataLoader \"' + D.name + '\" is Complete')\n    D.onComplete.call(D.scope, D);\n  }\n}\n","/**\n * @class FontLoader\n * @param {string} target\n * \tload target\n * @param {object} arg\n * \tObject with any of the following optional parameters for customizing the load routine.\n * @property {string} name\n * @property {boolean} cacheBuster\n * @property {function} onComplete\n * @property {function} onProgress\n * @property {function} onFail\n * @property {string} fileType\n * \tManually assign the file type, eg: <code>truetype</code> or <code>woff</code>\n * @desc\n * This class is designed to handle a single load of a font by assigning it to a generated stylesheet\n */\nimport { LoaderBase } from '../mixin/LoaderBase.js'\nimport { LoaderSourceMixin } from '../mixin/LoaderSourceMixin.js'\nimport { LoaderTickerMixin } from '../mixin/LoaderTickerMixin.js'\n\nexport default class FontLoader extends LoaderSourceMixin(LoaderTickerMixin(LoaderBase)) {\n\tconstructor(...args) {\n\t\tsuper(...args)\n\t}\n\n\t/**\n\t * @memberOf FontLoader\n\t * @method load\n\t * @desc\n\t * \tStarts the load process.\n\t */\n\tload() {\n\t\tconst F = this\n\n\t\t// console.log('FontLoader \"' + F.name + '\" requesting:\\n\\t->', F.url)\n\n\t\tF.fileName = F.fileName.split('.')[0]\n\n\t\tif (document.fonts && window.FontFace) {\n\t\t\tconst font = new FontFace(F.fileName, `url(${F.url})`)\n\t\t\tfont\n\t\t\t\t.load()\n\t\t\t\t.then(font => {\n\t\t\t\t\tdocument.fonts.add(font)\n\t\t\t\t\tF._handleComplete.call(F)\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error(`Font (${F.url}) failed to load`)\n\t\t\t\t\tF._handleFail.call(F)\n\t\t\t\t})\n\t\t} else {\n\t\t\tlet format = 'truetype'\n\t\t\tif (F.fileType.match(/woff/)) {\n\t\t\t\tformat = F.fileType\n\t\t\t}\n\t\t\tconst assembledFontRule = \"@font-face { font-family: '\" + F.fileName + \"'; src: url(\" + F.url + \") format('\" + format + \"'); }\"\n\n\t\t\tlet getSheet = document.getElementById('RED_fontStyleSheet')\n\t\t\tif (getSheet) {\n\t\t\t\tgetSheet.innerHTML += assembledFontRule\n\t\t\t} else {\n\t\t\t\tlet styleScript = document.createElement('style')\n\t\t\t\tstyleScript.type = 'text/css'\n\t\t\t\tstyleScript.media = 'screen'\n\t\t\t\tstyleScript.id = 'RED_fontStyleSheet'\n\t\t\t\tstyleScript.appendChild(document.createTextNode(assembledFontRule))\n\t\t\t\tdocument.getElementsByTagName('head')[0].appendChild(styleScript)\n\t\t\t}\n\n\t\t\tF._setTicker({\n\t\t\t\tcontent: ' !\"\\\\#$%&\\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~',\n\t\t\t\tcss:\n\t\t\t\t\t'position:absolute; top:-1000px; font-size:100px; font-family:san-serif; font-variant:normal; font-style:normal; font-weight:normal; letter-spacing:0; white-space:nowrap;',\n\t\t\t\tfont: F.fileName\n\t\t\t})\n\t\t}\n\t}\n\n\t_handleTickerComplete(node) {\n\t\tconst F = this\n\t\t// added timeout to leave a rendered textfield on stage for initial textfields\n\t\t// to return proper offsetWidth values\n\t\tsetTimeout(function() {\n\t\t\t// leave the test textfield temporarily to allow dom\n\t\t\t// to have a reference to rendered characters. hack?\n\t\t\tF._removeTickerNode(node)\n\t\t}, 300)\n\n\t\tF._handleComplete()\n\t}\n\n\t_handleComplete(event) {\n\t\tconst F = this\n\t\t// console.log('FontLoader \"' + F.name + '\" is Complete')\n\t\tF.dataRaw = F.fileName\n\t\tF.onComplete.call(F.scope, F)\n\t}\n}\n","/**\n * @class ImageLoader\n * @param {string} target\n * \tload target\n * @param {object} arg\n * \tObject with any of the following optional parameters for customizing the load routine.\n * @property {string} name\n * @property {boolean} cacheBuster\n * @property {boolean} renderOnly\n * \tused when only needing to render, such as writing into the DOM as markup <svg>\n * @property {string} crossOrigin\n * @property {function} onComplete\n * @property {function} onProgress\n * @property {function} onFail\n * @property {string} fileType\n * \tManually assign the file type, eg: <code>truetype</code> or <code>woff</code>\n * @desc\n * This class is designed to handle a single load of a font by assigning it to a generated stylesheet\n */\nimport { LoaderBase } from '../mixin/LoaderBase.js'\nimport { LoaderSourceMixin } from '../mixin/LoaderSourceMixin.js'\nimport { LoaderTickerMixin } from '../mixin/LoaderTickerMixin.js'\n\nexport default class ImageLoader extends LoaderSourceMixin(LoaderTickerMixin(LoaderBase)) {\n\tconstructor(...args) {\n\t\tsuper(...args)\n\t\tlet arg = arguments && arguments.length > 1 ? arguments[1] : arguments[0] || {}\n\n\t\t// used when only needing to render, such as writing into the DOM as markup <svg>\n\t\tthis.renderOnly = !!arg.renderOnly\n\t\tthis.crossOrigin = arg.crossOrigin\n\t}\n\n\t/**\n\t * @memberOf ImageLoader\n\t * @method load\n\t * @desc\n\t * \tStarts the load process.\n\t */\n\tload() {\n\t\tconst I = this\n\t\tif (I.renderOnly) {\n\t\t\tI._setTicker({\n\t\t\t\tcontent: I.url,\n\t\t\t\twidth: 0\n\t\t\t})\n\t\t} else {\n\t\t\tlet img = new Image()\n\t\t\timg.id = I.fileName\n\t\t\timg.crossOrigin = I.crossOrigin\n\t\t\timg.onload = I._handleComplete.bind(I)\n\t\t\timg.onerror = I._handleFail\n\t\t\timg.src = I.url\n\t\t}\n\t}\n\n\t_handleComplete(event) {\n\t\tconst I = this\n\t\t// console.log('ImageLoader \"' + I.name + '\" is Complete')\n\t\tI.dataRaw = event.target\n\t\tI.onComplete.call(I.scope, I)\n\t}\n}\n","/**\n * @class InlineLoader\n * @param {string} target\n * \tload target\n * @param {object} arg\n * \tObject with any of the following optional parameters for customizing the load routine.\n * @property {string} name\n * @property {boolean} cacheBuster\n * @property {function} onComplete\n * @property {function} onProgress\n * @property {function} onFail\n * @property {string} fileType\n * \tManually assign the file type, eg: <code>css</code>, <code>script</code>, <code>html</code>\n * @desc\n * This class is designed to handle a single load a file inlined by writing it to the head\n */\nimport { LoaderBase } from '../mixin/LoaderBase.js'\nimport { LoaderSourceMixin } from '../mixin/LoaderSourceMixin.js'\n\nexport default class InlineLoader extends LoaderSourceMixin(LoaderBase) {\n\tconstructor(...args) {\n\t\tsuper(...args)\n\t}\n\n\t/**\n\t * @memberOf InlineLoader\n\t * @method load\n\t * @desc\n\t * \tStarts the load process.\n\t */\n\tload() {\n\t\tconst I = this\n\t\tlet elem\n\t\tif (I.fileType == 'css') {\n\t\t\telem = I._createCssLink()\n\t\t} else if (I.fileType == 'html') {\n\t\t\telem = I._createHtmlLink()\n\t\t} else {\n\t\t\telem = I._createScript()\n\t\t}\n\t\telem.charset = 'utf-8'\n\t\telem.onload = I._handleComplete.bind(I)\n\t\telem.onerror = I._handleFail\n\t\tI.fileType == 'css' || I.fileType == 'html' ? (elem.href = this.url) : (elem.src = I.url)\n\n\t\tdocument.getElementsByTagName('head')[0].appendChild(elem)\n\t}\n\n\t_createCssLink() {\n\t\tlet elem = document.createElement('link')\n\t\telem.rel = 'stylesheet'\n\t\telem.type = 'text/css'\n\t\treturn elem\n\t}\n\n\t_createHtmlLink() {\n\t\tlet elem = document.createElement('link')\n\t\telem.rel = 'import'\n\t\t// elem.async = ''\n\t\treturn elem\n\t}\n\n\t_createScript() {\n\t\tlet elem = document.createElement('script')\n\t\telem.type = 'text/javascript'\n\t\treturn elem\n\t}\n\n\t_handleComplete(event) {\n\t\tconst I = this\n\t\t// console.log('InlineLoader \"' + I.name + '\" is Complete')\n\t\tI.dataRaw = event.target\n\t\tI.onComplete.call(I.scope, I)\n\t}\n}\n","// POLYFILL : check for and/or replace window.requestAnimationFrame\n\n// there is a bug in iOS6 for RAF, so just detect being on it and fall back\nconst _isiOS6 = /iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)\n\nconst _prefix = ['webkit', 'moz']\nfor (let i = 0; !window.requestAnimationFrame && i < _prefix.length; i++) {\n\twindow.requestAnimationFrame = window[_prefix[i] + 'RequestAnimationFrame']\n\twindow.cancelAnimationFrame = window[_prefix[i] + 'CancelAnimationFrame'] || window[_prefix[i] + 'CancelRequestAnimationFrame']\n}\n\nif (!window.requestAnimationFrame || !window.cancelAnimationFrame || _isiOS6) {\n\tconsole.log('PolyFill -> FrameRate')\n\twindow.requestAnimationFrame = function(callback) {\n\t\treturn setTimeout(callback, 17)\n\t}\n\twindow.cancelAnimationFrame = clearTimeout\n}","export { default as LocationUtils } from './lib/LocationUtils'\nexport { default as MotionUtils } from './lib/MotionUtils'\n\n/* NOTE: DON'T import only \"default\" from ObjectUtils since the default\nfunction is a reserved keyword. Importing into scope will likely cause\nissues w/ code using the \"default\" keyword */\nimport * as ArrayUtils from './lib/ArrayUtils'\nimport * as ColorUtils from './lib/ColorUtils'\nimport * as DcsUtils from './lib/DcsUtils'\nimport * as ImageUtils from './lib/ImageUtils'\nimport * as MathUtils from './lib/MathUtils'\nimport * as MonetUtils from './lib/MonetUtils'\nimport * as ObjectUtils from './lib/ObjectUtils'\nimport * as TextUtils from './lib/TextUtils'\n\nexport { ArrayUtils, ColorUtils, DcsUtils, ImageUtils, MathUtils, MonetUtils, ObjectUtils, TextUtils }\n","/**\n * @npmpackage\n * @class ArrayUtils\n * @desc\n * This object contains additional methods for manipulating arrays.<br>\n * Import from <a href=\"https://github.com/ff0000-ad-tech/ad-utils\">ad-utils</a>\n * <codeblock>\n * import { ArrayUtils } from 'ad-utils'\n * </codeblock>\n */\n\n/** \n * @memberOf ArrayUtils\n * @method combine\n * @param {array} arr1\n * \tfirst array\n * @param {array} arr2\n * \tsecond array appended to the first\n * @desc\n * \tA 'more friendly' concat function.\n*/\nexport function combine(arr1, arr2) {\n\treturn arr1.concat(arr2)\n}\n\n/** \n * @memberOf ArrayUtils\n * @method copy\n * @param {array} array\n * \tthe array to duplicate\n * @desc\n * \tCreates a unique duplicate of the given array.\n*/\nexport function copy(array) {\n\treturn array.slice()\n}\n\n/** \n * @memberOf ArrayUtils\n * @method insertAt\n * @param {array} array\n * \tthe array to modify\n * @param {number} index\n * \tthe index to insert elements\n * @param {arguments} arguments\n * \tthe elements to insert\n * @desc\n * \tAdds elements at a provided index. Returns a new array.\n*/\nexport function insertAt(array, index) {\n\tvar a = array.slice(0, index)\n\tvar b = array.slice(index, array.length)\n\tvar args = Array.prototype.slice.call(arguments)\n\tvar values = args.slice(2, args.length)\n\treturn a.concat(values).concat(b)\n}\n\n/**\n * @memberOf ArrayUtils\n * @method removeAt\n * @param {array} array\n * \tthe array to modify\n * @param {number} index\n * \tthe index of the element to remove\n * @desc\n * \tRemoves an element at a provided index. Returns a new array.\n*/\nexport function removeAt(array, index) {\n\tvar a = copy(array)\n\ta.splice(index, 1)\n\treturn a\n}\n\n/**\n * @memberOf ArrayUtils\n * @method remove\n * @param {array} array\n * \tthe array to modify\n * @param {number|string} item\n * \tthe item to remove from the array\n * @desc\n * \tRemoves all instances of an element from the given array. Returns a new array.\n*/\nexport function remove(array, item) {\n\tvar _returnArray = array.slice()\n\twhile (_returnArray.indexOf(item) >= 0) _returnArray = removeAt(_returnArray, _returnArray.indexOf(item))\n\treturn _returnArray\n}\n\n/**\n * @memberOf ArrayUtils\n * @method shuffle\n * @param {array} array\n * \tthe array to modify\n * @desc\n * \tShuffles the array into a random order.\n*/\nexport function shuffle(array) {\n\treturn array.sort(function() {\n\t\treturn Math.random() < 0.5 ? 1 : -1\n\t})\n}\n\n/**\n * @memberOf ArrayUtils\n * @method contains\n * @param {array} array\n * \tthe array to check\n * @param {number|string} item\n * \tthe item to check for in the array\n * @desc\n * \tDetermines if a given array contains a given element. Returns a boolean.\n*/\nexport function contains(array, item) {\n\treturn array.indexOf(item) >= 0\n}\n","/**\n * @npmpackage\n * @class ColorUtils\n * @desc\n * This class contains methods for manipulating color.<br>\n * Import from <a href=\"https://github.com/ff0000-ad-tech/ad-utils\">ad-utils</a>\n * <codeblock>\n * import { ColorUtils } from 'ad-utils'\n * </codeblock>\n */\n\n/**\t\n * @memberOf ColorUtils\n * @method toRgba\n * @param {string|object} color\n * \tthe color to convert, represented as a HEX string:\"#ff0000\", \n * \tan RGB/A string: \"rgb(255, 0, 0)\" / \"rgba(255, 0, 0, 1)\" ), \n * \tor an RGB/A object: {r:255,g:0,b:0} / {r:255,g:0,b:0,a:1}.\n * @param {number} alpha\n * \tthe optional alpha value for the return string: overrides the alpha value of an RGBA color. \n * \tIf undefined, will default to the alpha value of the color.\n * @desc\n * \tReturns an object containing r, g, b, a properties \n*/\nexport function toRgba(color, alpha) {\n\tswitch (typeof color) {\n\t\tcase 'object':\n\t\t\tcolor = color || {\n\t\t\t\tr: 0,\n\t\t\t\tg: 0,\n\t\t\t\tb: 0,\n\t\t\t\ta: 1\n\t\t\t}\n\t\t\tbreak\n\t\tdefault:\n\t\t\t// convert from rgb() or rgba() string\n\t\t\tif (color.indexOf('rgb') >= 0) {\n\t\t\t\tcolor = color.substring(color.indexOf('(') + 1, color.lastIndexOf(')')).split(/,\\s*/)\n\t\t\t\tcolor = {\n\t\t\t\t\tr: parseInt(color[0]),\n\t\t\t\t\tg: parseInt(color[1]),\n\t\t\t\t\tb: parseInt(color[2]),\n\t\t\t\t\ta: Number(color[3])\n\t\t\t\t}\n\t\t\t} else if (color.indexOf('#') >= 0) {\n\t\t\t\t// convert from HEX\n\t\t\t\tvar result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})?$/i.exec(color)\n\t\t\t\tcolor = result\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tr: parseInt(result[1], 16),\n\t\t\t\t\t\t\tg: parseInt(result[2], 16),\n\t\t\t\t\t\t\tb: parseInt(result[3], 16),\n\t\t\t\t\t\t\ta: result[4] ? Number(result[4], 16) : 1\n\t\t\t\t\t  }\n\t\t\t\t\t: null\n\t\t\t} else {\n\t\t\t\t// given a color name like 'red' or 'green'\n\t\t\t\tconsole.log('')\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"ERROR: ColorUtils.toRgba does not accept color names such as '\" +\n\t\t\t\t\t\tcolor +\n\t\t\t\t\t\t\"'. Use HEX or an RGB/A string or object per documentation\"\n\t\t\t\t)\n\t\t\t\tconsole.log(\"Returning the color '\" + color + \"' without any alpha\")\n\t\t\t\tconsole.log('')\n\t\t\t\treturn color\n\t\t\t}\n\t\t\tbreak\n\t}\n\tif (!color.a) color.a = 1\n\tif (alpha >= 0) color.a = alpha\n\n\treturn color\n}\n\n/**\t\n * @memberOf ColorUtils\n * @method toRgbaString\n * @param {string|object} color\n * \tthe color to convert, represented as a HEX string:\"#ff0000\", \n * \tan RGB/A string: \"rgb(255, 0, 0)\" / \"rgba(255, 0, 0, 1)\" ), \n * \tor an RGB/A object: {r:255,g:0,b:0} / {r:255,g:0,b:0,a:1}.\n * @param {number} alpha\n * \tthe optional alpha value for the return string: overrides the alpha value of an RGBA color. If undefined, will default to the alpha value of the color.\n * @desc\n * \tReturns the rgba() string representing a given color and optional alpha\n*/\nexport function toRgbaString(color, alpha) {\n\tvar color = toRgba(color, alpha)\n\treturn 'rgba(' + color.r + ',' + color.g + ',' + color.b + ',' + color.a + ')'\n}\n\n/**\t\n * @memberOf ColorUtils\n * @method hue\n * @param {object} obj\n * \tan object with paramaters for overall hue shift, see Properties for more info\n * @property {string|object} from\n * \tthe source color to hue shift, represented as a HEX string:\"#ff0000\", \n * \tan RGB/A string: \"rgb(255, 0, 0)\" / \"rgba(255, 0, 0, 1)\" ), \n * \tor an RGB/A object: {r:255,g:0,b:0} / {r:255,g:0,b:0,a:1}.\n * @property {string|object} color\n * \tsynonymous with the from parameter\n * @property {number} amount\n * \tamount to shift the colors in a range of 0-360\n * @property {string} format\n * \teither 'object' or 'string' - which determines whether to return an 'rgba()' string or \n * \tan {r:, g:, b:, a:} object. If undefined, defaults to 'string'.\n * @desc\n * \tApply a hue shift to a given color; returns either an 'rgba()' string or an rgba{} object\n * @example\n * // convert to full grayscale\n * ColorUtils.hue({\n * \tfrom: '#99aa33',\n * \tamount: 66,\n * \tformat: 'object'\n * })\n * // returns {r: 51, g: 170, b: 79, a: 1}\n*/\nexport function hue(obj) {\n\tobj = _convert(obj)\n\tlet hsl = rgbToHSL(obj.from)\n\thsl.h = (hsl.h + obj.amount) % 360\n\tif (hsl.h < 0) hsl.h += 360\n\tlet returnColors = _hslToRGB(hsl)\n\n\tif (obj.from.a >= 0) returnColors.a = obj.from.a\n\treturn obj.format === 'object' ? returnColors : toRgbaString(returnColors)\n}\n\n/**\t\n * @memberOf ColorUtils\n * @method saturation\n * @param {object} obj\n * \tan object with paramaters for overall saturation, see Properties for more info\n * @property {string|object} from\n * \tthe source color to saturate, represented as a HEX string:\"#ff0000\", \n * \tan RGB/A string: \"rgb(255, 0, 0)\" / \"rgba(255, 0, 0, 1)\" ), \n * \tor an RGB/A object: {r:255,g:0,b:0} / {r:255,g:0,b:0,a:1}.\n * @property {string|object} color\n * \tsynonymous with the from parameter\n * @property {number} amount\n * \tthe total saturation of the from. 0 = grayscale, 1 = full, original color\n * @property {string} format\n * \teither 'object' or 'string' - which determines whether to return an 'rgba()' string or \n * \tan {r:, g:, b:, a:} object. If undefined, defaults to 'string'.\n * @desc\n * \tChange the color saturation of a given color; returns either an 'rgba()' string or an rgba{} object\n * @example\n * // convert to full grayscale\n * ColorUtils.saturation({\n * \tfrom: '#99aa33',\n * \tamount: 0,\n * \tformat: 'object'\n * });\n * // returns {r: 86, g: 86, b: 86, a: 1}\n*/\nexport function saturation(obj) {\n\tdelete obj.to\n\tobj = _convert(obj)\n\n\tlet returnColors = {}\n\tfor (let val in obj.from) {\n\t\tlet _fromVal = parseInt(obj.from[val])\n\t\tif (val === 'a') {\n\t\t\treturnColors[val] = _fromVal\n\t\t} else {\n\t\t\t// this prevents the entire color from turning a middling gray - rgb(128, 128, 128)\n\t\t\t// doing this check on only the red values is sufficient - we skip this calculation for the other two colors\n\t\t\tif (val === 'r') {\n\t\t\t\tvar _high = 0\n\t\t\t\tvar _low = 255\n\t\t\t\tfor (var sub in obj.from) {\n\t\t\t\t\tif (parseInt(obj.from[sub]) > _high) _high = parseInt(obj.from[sub])\n\t\t\t\t\tif (parseInt(obj.from[sub]) < _low) _low = parseInt(obj.from[sub])\n\t\t\t\t}\n\t\t\t}\n\t\t\treturnColors[val] = Math.round(_fromVal * obj.amount + (1 - obj.amount) * ((_high + _low) / 2))\n\t\t}\n\t}\n\n\treturn obj.format === 'object' ? returnColors : toRgbaString(returnColors)\n}\n\n/**\t\n * @memberOf ColorUtils\n * @method contrast\n * @param {object} obj\n * \tan object with paramaters for overall saturation, see Properties for more info\n * @property {string|object} from\n * \tthe source color to begin with, represented as a HEX string:\"#ff0000\", an RGB/A string: \"rgb(255, 0, 0)\" / \"rgba(255, 0, 0, 1)\" ), or an RGB/A object: {r:255,g:0,b:0} / {r:255,g:0,b:0,a:1}.,\n * @property {string|object} color\n * \tsynonymous with the from parameter\n * @property {number} amount\n * \tthe contrast of the target. 0 = no contrast, 1 = original contrast, >1 = more and more, to infinity and beyond!\n * @property {string|object} format\n * \teither 'object' or 'string' - which determines whether to return an 'rgba()' string or \n * \tan {r:, g:, b:, a:} object. If undefined, defaults to 'string'.\n * @desc\n * \tChange the contrast of the target; returns either an 'rgba()' string or an rgba{} object\n * @example\n * // get your whites whiter and brights brighter\n * ColorUtils.contrast({\n * \tfrom: '#aa0011'\n * \tamount: 1.3,\n * \tformat: 'object'\n * });\n * // returns {r: 221, g: 0, b: 22, a: 1}\n*/\nexport function contrast(obj) {\n\tdelete obj.to\n\tobj = _convert(obj)\n\n\tlet returnColors = {}\n\tfor (let val in obj.from) {\n\t\tlet _fromVal = parseInt(obj.from[val])\n\t\treturnColors[val] = val === 'a' ? _fromVal : Math.round(_fromVal * obj.amount)\n\t}\n\n\treturn obj.format === 'object' ? returnColors : toRgbaString(returnColors)\n}\n\n/**\t\n * @memberOf ColorUtils\n * @method tint\n * @param {object} obj\n * \tan object with paramaters for overall saturation, see Properties for more info\n * @property {string|object} from\n * \tthe source color to begin with, represented as a HEX string:\"#ff0000\", \n * \tan RGB/A string: \"rgb(255, 0, 0)\" / \"rgba(255, 0, 0, 1)\" ), \n * \tor an RGB/A object: {r:255,g:0,b:0} / {r:255,g:0,b:0,a:1}.\n * @property {string|object} color\n * \tsynonymous with the from parameter\n * @property {string|object} to\n * \tthe target color to tint to, represented as a HEX string:\"#ff0000\", \n * \tan RGB/A string: \"rgb(255, 0, 0)\" / \"rgba(255, 0, 0, 1)\" ), \n * \tor an RGB/A object: {r:255,g:0,b:0} / {r:255,g:0,b:0,a:1}.\n * @property {number} amount\n * \tthe percentage of color to apply to the target. Defaults to 1, which is 100% color tinting\n * @property {string|object} format\n * \teither 'object' or 'string' - which determines whether to return an 'rgba()' string, \n * \tor an {r:, g:, b:, a:} object. If undefined, defaults to 'string'.\n * @desc\n * \tTint a color uniformly to a given color; returns either an 'rgba()' string or an rgba{} object\n * @example\n * // tint to green\n * ColorUtils.tint({\n * \tfrom: '#ffff00',\n * \tto: '#00ff00',\n * \tamount: 1,\n * \tformat: 'object'\n * });\n * // returns {r: 0, g: 255, b: 0, a: 1 };\n * \n * // tint 50% to green\n * ColorUtils.tint({\n * \tfrom: '#ffff00',\n * \tto: '#00ff00',\n * \tamount: 0.5\n * });\n * // returns 'rgba(128, 128, 0, 1)'\n*/\nexport function tint(obj) {\n\tobj = _convert(obj)\n\n\tlet returnColors = {}\n\tfor (let val in obj.from) {\n\t\tlet _fromVal = parseInt(obj.from[val])\n\t\treturnColors[val] = val === 'a' ? _fromVal : Math.round(_fromVal + (parseInt(obj.to[val]) - _fromVal) * obj.amount)\n\t}\n\n\treturn obj.format === 'object' ? returnColors : toRgbaString(returnColors)\n}\n\n/**\t\n * @memberOf ColorUtils\n * @method transform\n * @param {object} obj\n * \tan object with paramaters for overall saturation, see Properties for more info\n * @property {string|object} from\n * \tthe source color to begin with, represented as a HEX string:\"#ff0000\", \n * \tan RGB/A string: \"rgb(255, 0, 0)\" / \"rgba(255, 0, 0, 1)\" ), \n * \tor an RGB/A object: {r:255,g:0,b:0} / {r:255,g:0,b:0,a:1}.\n * @property {string|object} color\n * \tsynonymous with the from parameter\n * @property {string|object} to\n * \tthe target color to transform to, represented as a HEX string:\"#ff0000\", \n * \tan RGB/A string: \"rgb(255, 0, 0)\" / \"rgba(255, 0, 0, 1)\" ), \n * \tor an RGB/A object: {r:255,g:0,b:0} / {r:255,g:0,b:0,a:1}.\n * @property {number} amount\n * \tthe percentage of color to apply to the target. Defaults to 1, which is 100% color transform\n * @property {string} format\n * \teither 'object' or 'string' - which determines whether to return an 'rgba()' string or \n * \tan {r:, g:, b:, a:} object. If undefined, defaults to 'string'.\n * @returns {string|object} \n * \teither an 'rgba()' string or an rgba{} object\n * @desc\n * \tColor Transforms a color to another color by pulling colors out of original source; \n * @example\n * // remove all colors but greens\n * ColorUtils.transform({\n * \tfrom: '#ffff00',\n * \tto: '#00ff00',\n * \tamount: 1,\n * \tformat: 'object'\n * });\n * // returns {r: 0, g: 255, b: 0, a: 1 };\n *\n * // remove all colors but greens\n * ColorUtils.transform({\n * \tfrom: '#ffff00',\n * \tto: '#00ff00',\n * \tamount: 1\n * });\n * // returns 'rgba(0, 255, 0, 1)'\n*/\nexport function transform(obj) {\n\tobj = _convert(obj)\n\n\tlet returnColors = {}\n\tfor (let val in obj.from) {\n\t\tlet _fromVal = parseInt(obj.from[val])\n\t\treturnColors[val] = val === 'a' ? _fromVal : Math.round(_fromVal - (255 - parseInt(obj.to[val])) * obj.amount)\n\t}\n\n\treturn obj.format === 'object' ? returnColors : toRgbaString(returnColors)\n}\n\n/**\t\n * @memberOf ColorUtils\n * @method invert\n * @param {object} obj\n * \tan object with parameters for overall inversion, see Properties for more info\n * @property {string|object} from\n * \tthe color to invert, represented as a HEX string:\"#ff0000\", \n * \tan RGB/A string: \"rgb(255, 0, 0)\" / \"rgba(255, 0, 0, 1)\" ), \n * \tor an RGB/A object: {r:255,g:0,b:0} / {r:255,g:0,b:0,a:1}.\n * @property {string|object} color\n * \tsynonymous with the from parameter\n * @property {string} format\n * \teither 'object' or 'string' - which determines whether to return an 'rgba()' string or \n * \tan {r:, g:, b:, a:} object. If undefined, defaults to 'string'.\n * @desc\n * \tInvert the color; returns either an 'rgba()' string or an rgba{} object\n * @example\n * // invert and return result as object\n * ColorUtils.invert({\n * \tcolor: '#ff0000',\n * \tformat: 'object'\n * });\n * // returns {r: 0, g: 255, b: 255, a: 1 };\n *\n * // invert and return result as string\n * ColorUtils.invert({\n * \tcolor: '#ff0000'\n * });\n * // returns 'rgba(0, 255, 255, 1)'\n*/\nexport function invert(obj) {\n\tdelete obj.to\n\tdelete obj.amount\n\tobj = _convert(obj)\n\n\tlet returnColors = {}\n\tfor (let val in obj.from) {\n\t\tlet _fromVal = parseInt(obj.from[val])\n\t\treturnColors[val] = val === 'a' ? _fromVal : 255 - _fromVal\n\t}\n\n\treturn obj.format === 'object' ? returnColors : toRgbaString(returnColors)\n}\n\n// ------------------------------------------------------------------\n// PRIVATE FUNCTIONS\nfunction _convert(obj) {\n\t// if the provided color information is not already in the {r:, g:, b:, a:} object format, we must convert it to that\n\tobj.from = obj.from || obj.color\n\tif (obj.from && typeof obj.from !== 'object') obj.from = toRgba(obj.from)\n\tif (obj.to && typeof obj.to !== 'object') obj.to = toRgba(obj.to)\n\t//\n\tobj.amount = obj.amount === undefined ? 1 : obj.amount\n\n\treturn obj\n}\n\nfunction rgbToHSL(rgb) {\n\tlet r = rgb.r / 255\n\tlet g = rgb.g / 255\n\tlet b = rgb.b / 255\n\tlet cMax = Math.max(r, g, b)\n\tlet cMin = Math.min(r, g, b)\n\tlet delta = cMax - cMin\n\tlet l = (cMax + cMin) / 2\n\tlet h = 0\n\tlet s = 0\n\n\tif (delta == 0) {\n\t\th = 0\n\t} else if (cMax == r) {\n\t\th = 60 * (((g - b) / delta) % 6)\n\t} else if (cMax == g) {\n\t\th = 60 * ((b - r) / delta + 2)\n\t} else {\n\t\th = 60 * ((r - g) / delta + 4)\n\t}\n\n\ts = delta ? delta / (1 - Math.abs(2 * l - 1)) : 0\n\n\treturn {\n\t\th: h,\n\t\ts: s,\n\t\tl: l\n\t}\n}\n\nfunction _hslToRGB(hsl) {\n\tlet h = hsl.h / 60\n\tlet s = hsl.s\n\tlet l = hsl.l\n\tlet c = (1 - Math.abs(2 * l - 1)) * s\n\tlet x = c * (1 - Math.abs((h % 2) - 1))\n\tlet m = l - c / 2\n\tlet r\n\tlet g\n\tlet b\n\n\th = Math.floor(h)\n\n\tswitch (h) {\n\t\tcase 0:\n\t\t\tr = c\n\t\t\tg = x\n\t\t\tb = 0\n\t\t\tbreak\n\t\tcase 1:\n\t\t\tr = x\n\t\t\tg = c\n\t\t\tb = 0\n\t\t\tbreak\n\t\tcase 2:\n\t\t\tr = 0\n\t\t\tg = c\n\t\t\tb = x\n\t\t\tbreak\n\t\tcase 3:\n\t\t\tr = 0\n\t\t\tg = x\n\t\t\tb = c\n\t\t\tbreak\n\t\tcase 4:\n\t\t\tr = x\n\t\t\tg = 0\n\t\t\tb = c\n\t\t\tbreak\n\t\tcase 5:\n\t\t\tr = c\n\t\t\tg = 0\n\t\t\tb = x\n\t}\n\n\treturn {\n\t\tr: _normalizeRgbValue(r, m),\n\t\tg: _normalizeRgbValue(g, m),\n\t\tb: _normalizeRgbValue(b, m)\n\t}\n}\n\nfunction _normalizeRgbValue(color, m) {\n\tcolor = Math.floor((color + m) * 255)\n\tif (color < 0) color = 0\n\treturn color\n}\n","/**\n * @npmpackage\n * @class DcsUtils\n * @desc\n * Doubleclick Studio utilities. <br>\n * Import from <a href=\"https://github.com/ff0000-ad-tech/ad-utils\">ad-utils</a>\n * <br>\n * <codeblock>\n * import { DscUtils } from 'ad-utils'\n * </codeblock>\n */\n\nexport function counterWithVars(str, impression) {\n\tif (impression) Enabler.reportCustomVariableCount1(str)\n\telse Enabler.reportCustomVariableCount2(str)\n}\n\n/**\n * @memberOf DcsUtils\n * @method addVideoMetrics\n * @param {VideoPlayer} player\n * \tThe video player instance to track\n * @param {string} message\n * \tThe message passed as the metric, defaults to 'Video Report 1'\n * @desc\n * \tAdds DoubleClick Tracking metrics to a video player.\n * @example\n * DcsUtils.addVideoMetrics(View.main.videoPlayer, 'Intro Video')\n */\nexport function addVideoMetrics(player, message) {\n\tEnabler.loadModule(studio.module.ModuleId.VIDEO, function() {\n\t\tstudio.video.Reporter.attach(message || 'Video Report 1', player.screen != undefined ? player.screen : player)\n\t})\n}\n\n/**\n * @memberOf DcsUtils\n * @method addYouTubeVideoMetrics\n * @param {VideoPlayer} player\n * The YouTubePlayer instance to track\n * @desc\n * Adds DoubleClick Tracking metrics to a YouTube video player.  The Enabler counter calls are added to the\n * index when a YouTubePlayer is added through Ad App.<br>\n * If manually adding a YouTubePlayer/tracking, the required global vars are:<br>\n * <codeblock>\n * var trackVideoPlay = function() {\n * \tEnabler.counter('YTP Video Play', true)\n * }\n * var trackVideoReplay = function() {\n * \tEnabler.counter('YTP Video Replay', true)\n * }\n * var trackVideoPause = function() {\n * \tEnabler.counter('YTP Video Pause', true)\n * }\n * var trackVideoComplete = function() {\n * \tEnabler.counter('YTP Video Complete', true)\n * }\n * </codeblock>\n * @example\n * DcsUtils.addYouTubeVideoMetrics(View.main.mainYouTubePlayer)\n */\nexport function addYouTubeVideoMetrics(player) {\n\tvar p = player.screen\n\n\tp.addEventListener('play', function() {\n\t\tplayer.isReplay ? trackVideoReplay.call() : trackVideoPlay.call()\n\t})\n\n\tp.addEventListener('pause', function() {\n\t\tif (!player.complete) {\n\t\t\ttrackVideoPause.call()\n\t\t}\n\t})\n\n\tp.addEventListener('complete', function() {\n\t\ttrackVideoComplete.call()\n\t})\n}\n","/**\n * @npmpackage\n * @class ImageUtils\n * @desc\n * This object contains methods necessary for manipulating images.<br>\n * Import from <a href=\"https://github.com/ff0000-ad-tech/ad-utils\">ad-utils</a>\n * <br>\n * <codeblock>\n * import { ImageUtils } from 'ad-utils'\n * </codeblock>\n */\n\n/**\n * @memberOf ImageUtils\n * @method fitImageAtCoordinate\n * @param {element} target\n * \tThe div with a background image\n * @param {number} originX\n * \tThe x position to center on\n * @param {number} originY\n * \tThe y position to center on\n * @param {img} source\n * \tOptional pass in a source img tag to skip the need to load to get source data\n * @desc\n * \tPositions a background image to fit the div size while centering around a point.  If the point is beyond the size bounds, it will align to that side.\n */\nexport function fitImageAtCoordinate(target, originX, originY, source) {\n\tvar child\n\tif (originX === undefined && originY === undefined) {\n\t\ttarget.style.backgroundPosition = '50% 50%'\n\t} else {\n\t\tif (source) {\n\t\t\tchild = source\n\t\t\tplacement()\n\t\t} else {\n\t\t\tchild = new Image()\n\t\t\tchild.onload = placement\n\t\t\tchild.src = target.style.backgroundImage.replace(/url\\((['\"])?(.*?)\\1\\)/gi, '$2').split(',')[0]\n\t\t}\n\t}\n\ttarget.style.backgroundSize = 'cover'\n\ttarget.style.backgroundRepeat = 'no-repeat'\n\n\tfunction placement() {\n\t\tvar parent = {\n\t\t\twidth: target.offsetWidth,\n\t\t\theight: target.offsetHeight,\n\t\t}\n\t\tvar parentAspectRatio = parent.width / parent.height\n\t\tvar childAspectRatio = child.width / child.height\n\n\t\tif (parentAspectRatio > childAspectRatio) {\n\t\t\t// child max fits in horizontal, move y\n\t\t\tfit('width', 'height')\n\t\t} else if (parentAspectRatio < childAspectRatio) {\n\t\t\t//  child max fits in vertical, move x\n\t\t\tfit('height', 'width')\n\t\t}\n\n\t\tfunction fit(a, b) {\n\t\t\t// child width is parent height times ratio of child width over child height\n\t\t\t// child height is parent width times ratio of child height over child width\n\t\t\tvar childSize = parent[a] * (child[b] / child[a])\n\n\t\t\t// parent to child scale ratio\n\t\t\tvar scalePercent = parent[a] / child[a]\n\n\t\t\tvar coord = {\n\t\t\t\twidth: originX || 0,\n\t\t\t\theight: originY || 0,\n\t\t\t}\n\t\t\t// parent size, halfed then subtract the scaled coordinate point\n\t\t\tvar childMove = parent[b] / 2 - coord[b] * scalePercent\n\n\t\t\t// make sure the image doesn't exceed the bounds\n\t\t\tvar maxMove = parent[b] - childSize\n\t\t\tif (childMove > 0) childMove = 0\n\t\t\telse if (childMove < maxMove) childMove = maxMove\n\n\t\t\ttarget.style.backgroundPosition = a === 'height' ? childMove + 'px 0px' : '0px ' + childMove + 'px'\n\t\t}\n\t}\n}\n\n/**\n * @memberOf ImageUtils\n * @method fitCanvasImageAtCoordinate\n * @param {CanvasImage} target\n * \tThe CanvasImage with a image source to fit within a specific dimension\n * @param {object} params\n * \tThe parameters of the CanvasImage upon instantiation\n * @param {object} fitParams\n * \tThe parameters defining the width, height, and origin in which to fit the image\n * \t\t@property {number} fitParams.width\n * \t\t\tNUMBER determining the width to fit the CanvasImage into - affects CanvasImage.width and CanvasImage.sourceW\n * \t\t@property {number} fitParams.height\n * \t\t\tNUMBER determining the height to fit the CanvasImage into - affects CanvasImage.height and CanvasImage.sourceH\n * \t\t@property {object} fitParams.origin\n * \t\t\tOBJECT containing orientation coordinates for the image's fitTo positioning\n * \t\t\t\t@property {number} fitParams.origin.x\n * \t\t\t\t\tNUMBER for X coordinate around which to focus resizing and fitting of the image horizontally\n * \t\t\t\t@property {number} fitParams.origin.y\n * \t\t\t\t\tNUMBER for Y coordinate around which to focus resizing and fitting of the image vertically\n * @param {number} imgSourceWidth\n * \tNUMBER for the original width of the source image\n * @param {number} imgSourceHeight\n * \tNUMBER for the original height of the source image\n * @desc\n * \tPositions a CanvasImage image to fit into a width and height while focusing around a point.  If the point is beyond the size bounds, it will align to that side.\n */\nexport function fitCanvasImageAtCoordinate(target, params, fitParams, imgSourceWidth, imgSourceHeight) {\n\tconsole.log(`%c FIT CANVAS IMAGE, SON`, 'color: black; background-color: cyan; font-style: italic; padding: 10px;')\n\n\t// is the image wider than it is tall\n\tlet _widerSource = imgSourceWidth > imgSourceHeight\n\t// is the target dimension - the fitParams - wider than it is tall\n\tlet _widerSpace = fitParams.width > fitParams.height\n\n\t// this function takes in an array of arguments to get the ratio dimension\n\t// for example - if we know the width we want, we have to get the proportional height\n\tfunction _makeRatios() {\n\t\tlet _args = arguments\n\n\t\t// example using paramsW: target['width'] = imgSourceWidth * (fitParams['width'] / imgSourceHeight)\n\t\ttarget[_args[2]] = _args[5] * (fitParams[_args[3]] / _args[4])\n\t\tparams['source' + _args[0]] = _args[4]\n\t\tparams['source' + _args[1]] = fitParams[_args[2]] * (_args[5] / target[_args[2]])\n\t}\n\n\t// these are the arguments arrays\n\t// array for proportional width, fitting the image to fitParams.height\n\tlet paramsW = ['H', 'W', 'width', 'height', imgSourceHeight, imgSourceWidth]\n\t// array for proportional height, fitting the image to fitParams.width\n\tlet paramsH = ['W', 'H', 'height', 'width', imgSourceWidth, imgSourceHeight]\n\n\t// is the image wider than it is tall\n\tif (_widerSource) {\n\t\t_makeRatios.apply(target, paramsW)\n\t\t// if, after getting new image size rations, the image isn't actually as wide as the fitParams...\n\t\t// run _makeRatios again, but fit the image to fitParams.width\n\t\tif (target.width < fitParams.width) _makeRatios.apply(target, paramsH)\n\t} else {\n\t\t_makeRatios.apply(target, paramsH)\n\t\t// if, after getting new image size rations, the image isn't actually as wide as the fitParams...\n\t\t// run _makeRatios again, but fit the image to fitParams.height\n\t\tif (target.height < fitParams.height) _makeRatios.apply(target, paramsW)\n\t}\n\n\t// make the image width and height equal to what our fitParams values are\n\ttarget.width = fitParams.width\n\ttarget.height = fitParams.height\n\n\t// this if check changes the transformOrigin, sourceW, sourceH, sourceX, and sourceH based on a target origin point\n\tif (fitParams.origin) {\n\t\t// set some defaults for our origin point - if none defined, make TOP-LEFT\n\t\tlet _fitOrigin = {\n\t\t\tx: fitParams.origin.x || 0,\n\t\t\ty: fitParams.origin.y || 0,\n\t\t}\n\n\t\t// is the area we want to fit into - the fitParams - a square?\n\t\tlet _fitSquare = fitParams.width === fitParams.height\n\n\t\t// ensure our sourceX and sourceY values are at least defined - they will get overwritten below\n\t\tparams.sourceX = params.sourceY = 0\n\n\t\t// redefining parameters from our earlier paramsW / paramsH arrays so as to reuse arguments below\n\t\tparamsW[0] = 'x'\n\t\tparamsH[0] = 'y'\n\n\t\t//\tthis function runs ALL of the calculations to determine:\n\t\t//\n\t\t//\t\t* how the image should be positioned within th fitParams based on the ratio of\n\t\t//\t\t\tfitParams.width/fitParams.height and imgSourceWidth/imgSourceHeight\n\t\t//\t\t* the origin, and its location within the bounds of the image\n\n\t\tfunction _setupOrientation(checkParam) {\n\t\t\t// is the image wider than it is tall\n\t\t\t// arguments via paramsW = ['x', 'W', 'width', 'height', imgSourceHeight, imgSourceWidth]\n\t\t\tfunction fitParamsSquare() {\n\t\t\t\tlet _args = arguments\n\n\t\t\t\t// example using paramsW: _fitOrigin.x *= ((target.height * imgSourceWidth) / imgSourceHeight) / imgSourceWidth;\n\t\t\t\t_fitOrigin[_args[0]] *= (target[_args[3]] * _args[5]) / _args[4] / _args[5]\n\n\t\t\t\t// scale the _fitOrigin position property to the scale of the image\n\t\t\t\t// example using paramsW: _fitOrigin.x *= target.height / imgSourceHeight;\n\t\t\t\t_fitOrigin[_args[0] === 'x' ? 'y' : 'x'] *= target[_args[3]] / _args[4]\n\t\t\t}\n\n\t\t\t// this function sets the positioning and sizing of the image within the fitParams, based on the fitParams.origin coordinates\n\t\t\t// arguments via paramsW = ['x', 'W', 'width', 'height', imgSourceHeight, imgSourceWidth]\n\t\t\t// arguments via paramsH = ['y', 'H', 'height', 'width', imgSourceWidth, imgSourceHeight];\n\t\t\tfunction _orientToOrigin() {\n\t\t\t\tlet _args = arguments\n\t\t\t\t// this scenario only exists if the fitParams is NOT a square\n\t\t\t\tif (_args.length) {\n\t\t\t\t\t// this is the scale of the fitted image compared to its default size\n\t\t\t\t\t// example using paramsW: _scale = target.width / imgSourceWidth;\n\t\t\t\t\tlet _scale = target[_args[3]] / _args[4]\n\n\t\t\t\t\t// the source property for positioning - either sourceX or sourceY\n\t\t\t\t\t// example using paramsW: _sourcePropPos = 'source' + 'x'.toUpperCase(); returns 'sourceX';\n\t\t\t\t\tlet _sourcePropPos = 'source' + _args[0].toUpperCase()\n\n\t\t\t\t\t// changing the sourceX/Y property for positioning\n\t\t\t\t\t// example using paramsW: params.sourceX = (_fitOrigin.x / target.stage.qualityScale) - ((fitParams.width] * 0.5) / _scale);\n\t\t\t\t\tparams[_sourcePropPos] = _fitOrigin[_args[0]] / 1 - (fitParams[_args[2]] * 0.5) / _scale\n\n\t\t\t\t\t// if the _fitOrigin data all exists within the bounds of the available bitmap data\n\t\t\t\t\t// BUG: THIS ONLY CHECKS AGAINST ONE PARAMETER - sourceX or sourceY - BUT THEN AFFECTS BOTH _fitOrigin.x and _fitOrigin.y\n\t\t\t\t\t// NEED TO CHECK AGAINST BOTH AND AFFECT BOTH\n\t\t\t\t\tif (\n\t\t\t\t\t\tparams[_sourcePropPos] >= 0 &&\n\t\t\t\t\t\tparams[_sourcePropPos] <= _args[5] - params['source' + _args[1]]\n\t\t\t\t\t) {\n\t\t\t\t\t\t// find out what the origin is in relation to its fitParams and _fitOrigin\n\t\t\t\t\t\t// a loop to set _fitOrigin.x/y equal to (_fitOrigin.x/y - params.sourceX/sourceY) * _scale;\n\t\t\t\t\t\tfor (let item in _fitOrigin)\n\t\t\t\t\t\t\t_fitOrigin[item] = (_fitOrigin[item] - params['source' + item.toUpperCase()]) * _scale\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// this keeps every value of _fitOrigin, as well as sourceX/Y, within the bounds of the image\n\t\t\t// arguments via paramsW = ['x', 'W', 'width', 'height', imgSourceHeight, imgSourceWidth]\n\t\t\t// arguments via paramsH = ['y', 'H', 'height', 'width', imgSourceWidth, imgSourceHeight];\n\t\t\tfunction _modifyOutOfBounds() {\n\t\t\t\tlet _subArgs = arguments\n\t\t\t\tlet _arg1 = _subArgs[0]\n\t\t\t\tlet _arg2 = _subArgs[2]\n\n\t\t\t\t// if the image dimensions actually match the source dimensions\n\t\t\t\t// then just scale the origin accordingly\n\t\t\t\t// example using paramsW:\n\t\t\t\t// if (params['sourceW'] == imgSourceWidth) {\n\t\t\t\t// \t_fitOrigin['x'] = fitParams.origin['x'] * (fitParams['width'] / imgSourceWidth);\n\t\t\t\t// }\n\t\t\t\tif (params['source' + _subArgs[1]] == _subArgs[5]) {\n\t\t\t\t\t_fitOrigin[_arg1] = fitParams.origin[_arg1] * (fitParams[_arg2] / _subArgs[5])\n\t\t\t\t}\n\n\t\t\t\t// and this fits any bound that exceeds the available bitmap data and keeps it within the bounds\n\t\t\t\t// example using paramsW:\n\t\t\t\t// \tif (_fitOrigin['x'] > fitParams['width']) {\n\t\t\t\t// \t\t_fitOrigin['x'] = fitParams['width'];\n\t\t\t\t// \t\tparams['source' + 'X'] = imgSourceWidth - params['source' + 'W'];\n\t\t\t\t// \t}\n\t\t\t\tif (_fitOrigin[_arg1] > fitParams[_arg2]) {\n\t\t\t\t\t_fitOrigin[_arg1] = fitParams[_arg2]\n\t\t\t\t\tparams['source' + _arg1.toUpperCase()] = _subArgs[5] - params['source' + _subArgs[1]]\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (_fitSquare) fitParamsSquare.apply(target, arguments)\n\n\t\t\t_orientToOrigin.apply(target, _fitSquare ? null : checkParam)\n\n\t\t\t_modifyOutOfBounds.apply(target, paramsW)\n\t\t\t_modifyOutOfBounds.apply(target, paramsH)\n\n\t\t\t// this checks to make sure the _fitOrigin.x/y and sourceX/Y are within the bounds of the bitmap data\n\t\t\tfor (let item in _fitOrigin) {\n\t\t\t\t// this keeps every value in _fitOrigin above or equal to 0\n\t\t\t\tlet _sourcePropSize = 'source' + item.toUpperCase()\n\t\t\t\tif (_fitOrigin[item] < 0 || params[_sourcePropSize] < 0) _fitOrigin[item] = params[_sourcePropSize] = 0\n\t\t\t}\n\t\t}\n\n\t\t// calling the function we just set up\n\t\tif (_fitSquare) {\n\t\t\t// call _setupOrientation() with no parameters - that function will recognize _fitSquare\n\t\t\t_setupOrientation.apply(target, _widerSource ? paramsW : paramsH)\n\t\t} else {\n\t\t\t// is the image wider than it is tall\n\t\t\tif (_widerSource) {\n\t\t\t\t// is the target fitParams wider than it is tall - orient to the height\n\t\t\t\tif (fitParams.width > fitParams.height) _setupOrientation(paramsH)\n\t\t\t\t// is the target fitParams taller than it is wide - orient to the width\n\t\t\t\telse _setupOrientation(paramsW)\n\t\t\t\t//\n\t\t\t} else {\n\t\t\t\t// is the target fitParams taller than it is wide - orient to the width\n\t\t\t\tif (fitParams.height > fitParams.width) _setupOrientation(paramsW)\n\t\t\t\t// is the target fitParams wider than it is tall - orient to the height\n\t\t\t\telse _setupOrientation(paramsH)\n\t\t\t}\n\t\t}\n\n\t\t// set the default transformOrigin to that of the given _fitOrigin point\n\t\tparams.transformOrigin = _fitOrigin.x + ' ' + _fitOrigin.y\n\n\t\t// this adds debugging information so we can see our intended origin and how our image transforms against it\n\t\tif (fitParams.debugClass) {\n\t\t\t// common args for the tall and wide lines\n\t\t\tlet _args = {\n\t\t\t\ttarget: target.stage,\n\t\t\t\tfill: 'yellow',\n\t\t\t\tparams: {\n\t\t\t\t\twidth: 1,\n\t\t\t\t\theight: 1,\n\t\t\t\t},\n\t\t\t}\n\n\t\t\t// the tall line\n\t\t\tlet _tall = new fitParams.debugClass(_args)\n\t\t\t// the wide line\n\t\t\tlet _wide = new fitParams.debugClass(_args)\n\n\t\t\t// targetrcle surrounding the origin point\n\t\t\t_fitOrigin.width = _fitOrigin.height = 10\n\t\t\tconsole.error(_fitOrigin)\n\t\t\tlet _targetrc = new fitParams.debugClass({\n\t\t\t\ttarget: target.stage,\n\t\t\t\tparams: _fitOrigin,\n\t\t\t\tstroke: {\n\t\t\t\t\tfill: 'yellow',\n\t\t\t\t\twidth: 1,\n\t\t\t\t},\n\t\t\t})\n\n\t\t\t_tall.height = fitParams.height\n\t\t\t_wide.width = fitParams.width\n\t\t\t_tall.x = _targetrc.x - _tall.width / 2\n\t\t\t_wide.y = _targetrc.y - _wide.height / 2\n\n\t\t\t_targetrc.x -= _targetrc.width / 2\n\t\t\t_targetrc.y -= _targetrc.height / 2\n\t\t}\n\t}\n}\n","/**\n\t@npmpackage\n\t@class LocationUtils\n\t@desc\n\t\tImport from <a href=\"https://github.com/ff0000-ad-tech/ad-utils\">ad-utils</a>\n\t\t<br>\n\t\t<codeblock>\n\t\t\t// importing into an ES6 class\n\t\t\timport { LocationUtils } from 'ad-utils'\n\t\t</codeblock>\n\t\t<br><br>\n\t\t\n\t\tThis object contains utilities for interfacing with the device's GPS.\n*/\nvar LocationUtils = new function() {\n\tthis.gpsSuccessCallback\n\tthis.gpsFailCallback\n\n\t/**\n\t\t@memberOf LocationUtils\n\t\t@method getGPSData\n\t\t@param {function} callbackSuccess\n\t\t\tupon successful acquisition of device location, this funciton is called with global coordinates.\n\t\t@param {function} callbackFail\n\t\t\tcalled if the query fails\n\t\t@desc\n\t\t\tQueries the device for current location. Asyncronous and dependent on user permission, \n\t\t\tso callback functions must be used.\n\t*/\n\n\tthis.getGPSData = function(callbackSuccess, callbackFail) {\n\t\tif (navigator.geolocation) {\n\t\t\tLocationUtils.gpsSuccessCallback = callbackSuccess\n\t\t\tLocationUtils.gpsFailCallback = callbackFail\n\t\t\tnavigator.geolocation.getCurrentPosition(LocationUtils.onLocationRetrieved, LocationUtils.onLocationFailed)\n\t\t} else console.log('geolocation not available')\n\t}\n\n\tthis.onLocationRetrieved = function(position) {\n\t\tLocationUtils.gpsSuccessCallback(position.coords)\n\t}\n\n\tthis.onLocationFailed = function(error) {\n\t\tconsole.log('Error retrieving location data')\n\n\t\tswitch (error.code) {\n\t\t\tcase 0:\n\t\t\t\tconsole.log('0 - unknown error')\n\t\t\t\tbreak\n\n\t\t\tcase 1:\n\t\t\t\tconsole.log('1 - permission denied')\n\t\t\t\tbreak\n\n\t\t\tcase 2:\n\t\t\t\tconsole.log('2 - position unavailable (error response from locaton')\n\t\t\t\tbreak\n\n\t\t\tcase 3:\n\t\t\t\tconsole.log('3 - timed out')\n\t\t\t\tbreak\n\t\t}\n\n\t\tif (LocationUtils.gpsFailCallback) LocationUtils.gpsFailCallback(error)\n\t}\n}()\n\nexport default LocationUtils\n","/**\n * @npmpackage\n * @class MathUtils\n * @desc Common math utilities.\t<br>\n * Import from <a href=\"https://github.com/ff0000-ad-tech/ad-utils\">ad-utils</a>\n * <codeblock>\n * import { MathUtils } from 'ad-utils'\n * </codeblock>\n */\n\n/**\n * @memberOf MathUtils\n * @method toRadians\n * @param {number} degree\n * \t\tAn angle value as a degree\n * @desc\n * \t\tConverts an angle value from Degrees to Radians.\n */\nexport function toRadians(degree) {\n\treturn (Math.PI / 180.0) * degree\n}\n\n/**\n * @memberOf MathUtils\n * @method toDegrees\n * @param {number} radian\n * \t\tAn angle value as a radian\n * @desc\n * \t\tConverts an angle value from Radians to Degrees.\n*/\nexport function toDegrees(radian) {\n\treturn (180.0 / Math.PI) * radian\n}\n\n/**\n * @memberOf MathUtils\n * @method random\n * @param {number} a\n * \t\tthe first value to find between\n * @param {number} b\n * \t\tthe second value to find between \n * @param {number} increment\n * \t\toptionaly set the increment of the random number. Defaults to 1\n * @desc\n * \t\tGet a random number between a range of two values, with an option to return to a decimal place. ( Note that\n * \t\t due to the inprecision of decimal number calculation in Javascript, you may not get a perfect result when \n * \t\t your increment value is decimal, but the value will be close. A classic Javascript inpreciosn calculation example: \n * \t\t 0.1 + 0.2 = 0.30000000000000004 ) \n * @example\n * MathUtils.random(1, 3, 1)   // returns 1 or 2 or 3\n * MathUtils.random(1, 3, 0.5)  // returns 1, 1.5, 2, 2.5 or 3\n */\nexport function random(a, b, increment) {\n\tb = b || 0\n\tincrement = increment != undefined && increment > 0 ? increment : 1\n\n\tvar min = Math.min(a, b)\n\tvar max = Math.max(a, b)\n\n\tmin = Math.ceil(min / increment) * increment\n\tmax = Math.floor(max / increment) * increment\n\n\tvar _num = min + Math.floor(Math.random() * ((max - min + increment) / increment)) / (1 / increment)\n\treturn _num\n}\n\n/**\n * @memberOf MathUtils\n * @method randomBoolean\n * @param {number} weight\n * \t\tchange the outcome probabilty. Greater than .5 more likely true. Defaults to .5\n * @desc\n * \t\tRandomly returns a true or false;\n */\nexport function randomBoolean(weight) {\n\tweight = weight || 0.5\n\treturn Math.random() < weight\n}\n\nexport function randomWeightedKey(obj) {\n\tvar keys = []\n\tvar vals = [0]\n\tfor (var param in obj) {\n\t\tkeys.push(param)\n\t\tvals.push(obj[param] + (vals[vals.length - 1] || 0))\n\t}\n\t//console.log(keys)\n\t//console.log(vals)\n\n\tvar rand = Math.random().toFixed(2) * 100\n\tfor (var k = 0; k < vals.length - 1; k++) {\n\t\tvar isIn = inRange(rand, vals[k], vals[k + 1])\n\t\t//console.log('\\t', k, rand, vals[k], vals[k+1], isIn)\n\t\tif (isIn) {\n\t\t\t//  console.log('\\t\\t', keys[k])\n\t\t\treturn keys[k]\n\t\t}\n\t}\n}\n\n/**\n * @memberOf MathUtils\n * @method rel\n * @param {number} a0\n * \t\tthe first value to find between\n * @param {number} a1\n * \t\tthe second value to find between\n * @param {number} b0\n * \t\tthe first value to use as relative to a0\n * @param {number} b1\n * \t\tthe second value to use as relative to a1\n * @param {number} bX\n * \t\tthe value between b0 and b1\n * @desc\n * \t\tCalculates a value between two numbers relative to a value between 2 other numbers.\n * \t\tReturns The proportion between a0 and a1 relative to the bX proportion between b0 and b1\n * @example\n * MathUtils.rel(0, 1, 10, 20, 15) // 0.5\n * MathUtils.rel(100, 300, 3, 5, 3.5) // 150\n */\nexport function rel(a0, a1, b0, b1, bX) {\n\treturn ((bX - b0) / (b1 - b0)) * (a1 - a0) + a0\n}\n\n/**\n * @memberOf MathUtils\n * @method inRange\n * @param {number} val\n * \t\tthe number to check\n * @param {number} a\n * \t\tthe first value of the range\n * @param {number} b\n * \t\tthe second value of the range\n * @returns {boolean}\n * @desc\n * \t\tChecks if a value is in the range of two numbers.\n * @example\n * MathUtils.inRange(5, 1, 10) // true\n * MathUtils.inRange(-5, 1, 10) // false\n */\nexport function inRange(val, a, b) {\n\tvar min = Math.min(a, b)\n\tvar max = Math.max(a, b)\n\treturn val <= max && val >= min\n}\n\n/**\n * @memberOf MathUtils\n * @method isNumber\n * @param {number} num\n * \t\tthe variable to check\n * @desc\n * \t\tReturns true if the passed var is a number.\n */\nexport function isNumber(num) {\n\treturn !isNaN(num)\n}\n\n/**\n * @memberOf MathUtils\n * @method toNumber\n * @param {string} str\n * \t\tthe variable to convert\n * @desc\n * \t\tTakes a numerical string and converts it to number type.\n */\nexport function toNumber(str) {\n\treturn +str\n}\n\n/**\n * @memberOf MathUtils\n * @method restrict\n * @desc\n * \t\tRestricts a value to with a range.\n */\nexport function restrict(num, min, max) {\n\treturn Math.max(min, Math.min(max, num))\n}\n\n/**\n * @memberOf MathUtils\n * @method getAnglePoint\n * @returns {array}\n * \t\tcontaining an [xValue, yValue] given x1, y1, distance from that starting coordinate, \n * \t\tand angle (in *radians*) which the new point should be from the starting coordinate\n * @desc\n * \t\tAssumes original coordinate rotation is 0 radians\n */\nexport function getAnglePoint(x, y, distance, angle) {\n\tvar x = x + Math.cos(angle) * distance\n\tvar y = y + Math.sin(angle) * distance\n\n\treturn [x, y]\n}\n\n/**\n * @memberOf MathUtils\n * @method getAngle\n * @retuns {number}\n * \t\tThe angle (in *radians*) between two points given x1, y1, x2, y2\n*/\nexport function getAngle(x1, y1, x2, y2) {\n\tx2 = x2 || 0\n\ty2 = y2 || 0\n\treturn Math.atan2(y2 - y1, x2 - x1)\n}\n\n/**\n * @memberOf MathUtils\n * @method getDistance\n * @returns {number}\n * \t\tThe distance between two points given x1, y1, x2, y2\n*/\nexport function getDistance(x1, y1, x2, y2) {\n\tx2 = x2 || 0\n\ty2 = y2 || 0\n\treturn Math.sqrt((y2 - y1) * (y2 - y1) + (x2 - x1) * (x2 - x1))\n}\n","/**\n * @npmpackage\n * @class MonetUtils\n * @desc\n * Monet utilities.\n * <codeblock>\n * import { MonetUtils } from 'ad-utils'\n * </codeblock>\n */\n\nlet _data\n\n// prettier-ignore\nlet _monetTypes = {\n\t'text': 'text',\n\t'number': 'value',\n\t'image': 'url',\n\t'video': 'url',\n\t'url': 'url',\n\t'bool': 'value'\n}\n\nexport function setData(integrator) {\n\tvar promise = integrator.getMonetData()\n\tpromise.then(function(data) {\n\t\t_data = data\n\t})\n\treturn promise\n}\n\nexport function getDataByKey(key) {\n\tvar output\n\tvar outputType\n\tfor (var type in _monetTypes) {\n\t\tif (_data.rootAssets[type + '.' + key]) {\n\t\t\toutputType = type\n\t\t\toutput = _data.rootAssets[type + '.' + key]\n\t\t\tbreak\n\t\t}\n\t}\n\treturn output && output[_monetTypes[outputType]]\n}\n","/**\n * @npmpackage\n * @class MotionUtils\n * @desc\n * This object is for accessing the mobile/tablet's accelerometer for tilt shifting values<br>\n * Import from <a href=\"https://github.com/ff0000-ad-tech/ad-utils\">ad-utils</a>\n * <codeblock>\n * import { MotionUtils } from 'ad-utils'\n * </codeblock>\n */\nvar MotionUtils = (function() {\n\tvar ax = 0,\n\t\tay = 0\n\n\tvar _zeroX = 0,\n\t\t_zeroY = 0,\n\t\t_isInit = true,\n\t\t_negX,\n\t\t_posX,\n\t\t_negY,\n\t\t_posY,\n\t\t_multi = 1,\n\t\t_callback\n\n\t/* ----------------------------------------------------------------------------------------------- */\n\t// PUBLIC METHODS\n\n\t/**\n\t * @memberOf MotionUtils\n\t * @method setSpeedLimits\n\t * @param {number} negX\n\t * \tminimum value returned when tilting left ( will be a negative number )\n\t * @param {number} posX\n\t * \tmaximum value returned when tilting right ( will be a positive number )\n\t * @param {number} negY\n\t * \tminimum value returned when tilting backward ( will be a negative number )\n\t * @param {number} posY\n\t * \tmaximum value returned when tilting forward ( will be a positive number )\n\t * @desc\n\t * \tSet the minimum and maximum values that can be returned\n\t*/\n\tfunction setSpeedLimits(negX, posX, negY, posY) {\n\t\t_negX = negX\n\t\t_posX = posX\n\t\t_negY = negY\n\t\t_posY = posY\n\t}\n\n\t/**\n\t * @memberOf MotionUtils\n\t * @method setSpeedMultiplier\n\t * @param {number} multi\n\t * \ta number to multiply the returned value by. Defaults to 1.\n\t * @desc\n\t * \tSet a percentage multiplier to amplify or minimize the returned value.\n\t*/\n\tfunction setSpeedMultiplier(multi) {\n\t\t_multi = multi <= 0 ? 1 : multi\n\t}\n\n\t/**\n\t * @memberOf MotionUtils\n\t * @method activate\n\t * @param {function} callback\n\t * \ta passed in method that will be called every time a device movement is detected.\n\t * @desc\n\t * \tStarts the listening for a move of the device\n\t*/\n\tfunction activate(callback) {\n\t\t_callback = callback\n\t\twindow.addEventListener('deviceorientation', onOrientation, false)\n\t}\n\n\t/**\n\t * @memberOf MotionUtils\n\t * @method deactivate\n\t * @desc\n\t * \tStops the listening for a move of the device.\n\t */\n\tfunction deactivate() {\n\t\twindow.removeEventListener('deviceorientation', onOrientation, false)\n\t}\n\n\t/**\n\t * @memberOf MotionUtils\n\t * @method callibrate\n\t * @desc\n\t * \tSets the relative zero position to the current orientation of the device.\n\t */\n\tfunction callibrate() {\n\t\t_isInit = true\n\t}\n\n\t/* ----------------------------------------------------------------------------------------------- */\n\t// EVENT HANDLERS\n\tfunction onOrientation(e) {\n\t\tswitch (window.orientation) {\n\t\t\tcase -90:\n\t\t\t\t// Landscape, right-side down\n\t\t\t\tay = e.gamma\n\t\t\t\tax = -e.beta\n\t\t\t\tbreak\n\t\t\tcase 90:\n\t\t\t\t// Landscape, left-side down\n\t\t\t\tay = -e.gamma\n\t\t\t\tax = e.beta\n\t\t\t\tbreak\n\t\t\tcase 180:\n\t\t\t\t// Upside-down portrait\n\t\t\t\tay = -e.beta\n\t\t\t\tax = -e.gamma\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\t// Portrait\n\t\t\t\tay = e.beta\n\t\t\t\tax = e.gamma\n\t\t}\n\n\t\tif (_isInit) {\n\t\t\t_zeroX = ax\n\t\t\t_zeroY = ay\n\t\t\t_isInit = false\n\t\t}\n\n\t\tax -= _zeroX\n\t\tay -= _zeroY\n\n\t\tax *= _multi\n\t\tay *= _multi\n\n\t\tif (_negX && ax < _negX) ax = _negX\n\t\tif (_posX && ax > _posX) ax = _posX\n\t\tif (_negY && ay < _negY) ay = _negY\n\t\tif (_posY && ay > _posY) ay = _posY\n\n\t\t_callback(ax, ay)\n\t}\n\n\t/* ----------------------------------------------------------------------------------------------- */\n\t// PUBLIC ACCESS\n\treturn {\n\t\tax: ax,\n\t\tay: ay,\n\t\tcallibrate: callibrate,\n\t\tsetSpeedLimits: setSpeedLimits,\n\t\tsetSpeedMultiplier: setSpeedMultiplier,\n\t\tactivate: activate,\n\t\tdeactivate: deactivate\n\t}\n})()\n\nexport default MotionUtils\n","/**\n * @npmpackage\n * @class ObjectUtils\n * @desc\n * Utilities for affecting objects.<br>\n * Import from <a href=\"https://github.com/ff0000-ad-tech/ad-utils\">ad-utils</a>\n * <codeblock>\n * import { ObjectUtils } from 'ad-utils'\n * </codeblock>\n */\n\n/**\n * @memberOf ObjectUtils\n * @name objectifier\n * @property {function} objectifier.get\n * \t{@link ObjectUtils.get}\n * @property {function} objectifier.set\n * \t{@link ObjectUtils.set}\n * @desc\n * \tThis object is parent to a number of utility funcitons\n */\nconst objectifier = {}\n\n/**\n * @memberOf ObjectUtils\n * @method get\n * @param {string} str\n * \ta data string representing the key of desire property splited by dot. \n * \tArray index is represented by number. For example, 'myObj.property1.0' means \n * \tI'm pointing to the [0] element in my propperty1 array inside of myObj. \n * @param {object} ctxObj\n * \tthe context object to find the property under, defaults to window\n * @desc\n * \tGets a property with a nested property key string.\n * \t<br><br>\n * \t<b>NOTE!!!</b>\n * \tThis method is on the {@link ObjectUtils.objectifier} object!\n\n * @example\n * let myObj = {\n * \tprop1: [ 'a', 'b', 'c' ],\n * \tprop2: {\n * \t\tstring: 'I am prop2',\n * \t\tfunc: function() {\n * \t\t\talert('!!')\n * \t\t}\n * \t}\n * }\n *\n * let val = ObjectUtils.objectifier.get( 'prop1.0', myObj );\n * // your val should be 'a'\n *\n * val = ObjectUtils.objectifier.get( 'prop2.string', myObj );\n * // your val should be 'I am prop2'\n */\nobjectifier.get = function(str, ctxObj = window) {\n\tconst splits = objectifier._getSplits(str).splits\n\treturn objectifier._getProperty(splits, ctxObj)\n}\n\n/**\n * @memberOf ObjectUtils\n * @method set\n * @param {string} str\n * \ta data string representing the key of desire property splited by dot.\n * \tArray index is represented by number. For example, 'myObj.property1.0' means\n * \tI'm pointing to the [0] element in my propperty1 array inside of myObj.\n * @param {any} val\n * \tthe value to set for th property\n * @param {object} ctxObj\n * \tthe context object to find the property under, defaults to window\n * @desc\n * \tSets a property value with a nested property key string.\n * \t<br><br>\n * \t<b>NOTE!!!</b>\n * \tThis method is on the {@link ObjectUtils.objectifier} object!\n * \t\n * @example\n * //\n * let myObj = {\n * \tprop1: [ 'a', 'b', 'c' ],\n * \tprop2: {\n * \t\tstring: 'I am prop2'\n * \t}\n * };\n * ObjectUtils.objectifier.set( 'prop1.0', 123, myObj );\n * // myObj.prop1[0] is now 123\n * ObjectUtils.objectifier.set( 'prop2.string', 'hello', myObj );\n * // myObj.prop2.string is now 'hello'\n*/\nobjectifier.set = function(str, val, ctxObj = window) {\n\tconst splitData = objectifier._getSplits(str, true)\n\tconst result = objectifier._getProperty(splitData.splits, ctxObj)\n\tresult[splitData.lastKey] = val\n}\n\n// objectifier._getSplits and objectifier._getProperty  are used internally for objectifier.get and objectifier.set\nobjectifier._getSplits = function(str, popLast) {\n\tconst splits = str.split('.')\n\tconst lastKey = popLast ? splits.pop() : null\n\n\treturn {\n\t\tsplits: splits,\n\t\tlastKey: lastKey\n\t}\n}\n\nobjectifier._getProperty = function(splits, obj = {}) {\n\tlet result = obj\n\tlet s\n\tfor (let i = 0; result && (s = splits[i]); i++) {\n\t\tresult = s in result ? result[s] : undefined\n\t}\n\treturn result\n}\n\n/**\n * @memberOf ObjectUtils\n * @method clone\n * @param {object} obj\n * \tobject to clone\n * @returns {object}\n * \tcloned object\n * @desc\n * \tGet a clone of an object without reference.\n * @example\n * let oldObj = {\n * \ta: 1,\n * \tb: 2\n * };\n *\n * let newObj = ObjectUtils.clone( oldObj );\n * \n * newObj.a = 'xyz';\n * // oldObj.a is still 1\n*/\nexport function clone(obj) {\n\tif (Object.prototype.toString.call(obj) !== '[object Object]') {\n\t\treturn obj\n\t}\n\n\tlet result = obj.constructor()\n\tfor (let key in obj) {\n\t\tresult[key] = clone(obj[key])\n\t}\n\n\treturn result\n}\n\n/**\n * @memberOf ObjectUtils\n * @method defaults\n * @param {object} obj\n * \tan object contains custom properties to overide default properties\n * @param {object} defaultObj\n * \tan object contains properties to default to\n * @param {boolean} recursive\n * \tflag for if the property check should be executed recursively\n * \totherwise it will just be one level\n * @desc\n * \tGet an object using an object as a default, when a property doesn't in the object,\n * \tit takes it from the default object if it exists. It also checks nested objects. \n * \tIt is useful for setting up an object to store default values. \n * @example\n * // our default object as a base set up\n * let defaultObj = {\n *     name: 'Person',\n *     weight: 0,\n *     age: 0,\n *     gender: 'male',\n *     locationDetail: {\n *         state: 'CA',\n *         city: 'Los Angeles'\n *     }\n * };\n * \n * // the custom object\n * let customObj = {\n *     name: 'Bob',\n *     weight: 140,\n *     age: 30,\n *     locationDetail: {\n *         city: 'Santa Monica',\n *         street: 'Ocean Park'\n *     }\n * };\n * \n * let result = ObjectUtils.defaults( customObj, defaultObj, true );\n * \n * // your result object should look like\n * {\n * \tname: 'Bob',\n *     weight: 140,\n *     age: 30,\n *     gender: 'male',\n *     locationDetail: {\n *         state: 'CA',\n *         city: 'Santa Monica',\n *         street: 'Ocean Park'\n *     }\n * }\n * \n * //if not recursive\n * let result = ObjectUtils.defaults( customObj, defaultObj, false );\n * \n * // your result object should look like ( notice that it takes the whole locationDetail object )\n * {\n * \tname: 'Bob',\n *     weight: 140,\n *     age: 30,\n *     gender: 'male',\n *     locationDetail: {\n *         city: 'Santa Monica',\n *         street: 'Ocean Park'\n *     }\n * }\n */\nfunction defaults(obj = {}, defaultObj, recursive) {\n\tlet result = clone(obj)\n\n\tfor (let key in defaultObj) {\n\t\tlet item = defaultObj[key]\n\n\t\tif (result[key] === undefined) {\n\t\t\tresult[key] = defaultObj[key]\n\t\t} else if (recursive) {\n\t\t\tif (Object.prototype.toString.call(item) === '[object Object]') {\n\t\t\t\tresult[key] = defaults(result[key], item, recursive)\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result\n}\n\nexport { defaults, objectifier }\n","/**\n * @class TextUtils\n * @description\n * This object contains methods necessary for manipulating text. <br>\n * Import from <a href=\"https://github.com/ff0000-ad-tech/ad-utils\">ad-utils</a>\n * <codeblock>\n * import { TextUtils } from 'ad-utils'\n * </codeblock>\n */\n\n/**\n * @memberof TextUtils\n * @method addSpaces()\n * @param {Number} numberOfSpaces\n * number of space entities to return\n * @returns {string} Returns the specified number of '&nbsp;' strings.\n */\nexport function addSpaces(numberOfSpaces) {\n\tlet spacingString = ''\n\tfor (let i = 0; i < numberOfSpaces; i++) {\n\t\tspacingString += '&nbsp;'\n\t}\n\treturn spacingString\n}\n\n/**\n * @memberof TextUtils\n * @method getSpecialCharacter()\n * @param {String} requestedCharacter\n * character must match the 'label' key\n * @param {Boolean} isCapital\n * flag to return the entity as capital\n * @returns {string} Returns entity equivilent for specified character.\n */\nexport function getSpecialCharacter(requestedCharacter, isCapital) {\n\trequestedCharacter = global.proxyStringToLowerCase.apply(requestedCharacter)\n\tfor (let i = 0; i < specialCharacters.length; i++) {\n\t\tlet currentLabel = global.proxyStringToLowerCase.apply(specialCharacters[i].label)\n\n\t\tif (currentLabel === requestedCharacter)\n\t\t\treturn isCapital ? specialCharacters[i].upperCase : specialCharacters[i].lowerCase\n\t}\n\treturn false\n}\n\nconst specialCharacters = [\n\t{\n\t\tlabel: 'iexcl',\n\t\tupperCase: '&#161;',\n\t\tlowerCase: '&#161;'\n\t},\n\t{\n\t\tlabel: 'trademark',\n\t\tupperCase: '&#153;',\n\t\tlowerCase: '&#153;'\n\t},\n\t{\n\t\tlabel: 'copyright',\n\t\tupperCase: '&#169;',\n\t\tlowerCase: '&#169;'\n\t},\n\t{\n\t\tlabel: 'registered',\n\t\tupperCase: '&#174;',\n\t\tlowerCase: '&#174;'\n\t},\n\t{\n\t\tlabel: 'nTilde',\n\t\tupperCase: '&#209;',\n\t\tlowerCase: '&#241;'\n\t},\n\t{\n\t\tlabel: 'aAccent',\n\t\tupperCase: '&#193;',\n\t\tlowerCase: '&#225;'\n\t},\n\t{\n\t\tlabel: 'eAccent',\n\t\tupperCase: '&#201;',\n\t\tlowerCase: '&#233;'\n\t},\n\t{\n\t\tlabel: 'iAccent',\n\t\tupperCase: '&#205;',\n\t\tlowerCase: '&#237;'\n\t},\n\t{\n\t\tlabel: 'oAccent',\n\t\tupperCase: '&#211;',\n\t\tlowerCase: '&#243;'\n\t},\n\t{\n\t\tlabel: 'uAccent',\n\t\tupperCase: '&#218;',\n\t\tlowerCase: '&#250;'\n\t}\n]\n\n/**\n * @memberof TextUtils\n * @method trimStartAndEnd()\n * @param {String} target\n * string to affect\n * @returns {string} Removes white space from the start and end of a string.\n */\nexport function trimStartAndEnd(target) {\n\treturn target ? target.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '') : ''\n}\n\n/**\n * @memberof TextUtils\n * @method removeSpaces()\n * @param {String} str\n * string from which to remove spaces\n * @returns {string} Removes all white space from the string.\n */\nexport function removeSpaces(str) {\n\treturn str.split(' ').join('')\n}\n\n/**\n * @memberof TextUtils\n * @method pad()\n * @param {String} _target\n * number to be padded\n * @param {Number} _count\n * expected result length of the numerical string\n * @returns {string} Pads a number with zeros up to the specified number of places.\n */\nexport function pad(_target, _count) {\n\tlet _sign = ''\n\tif (_target < 0) _sign = '-'\n\t_target = _target.toString().replace(/\\-/, '', _target)\n\twhile (_target.length < _count) _target = '0' + _target\n\treturn _sign + _target\n}\n\n/**\n * @memberOf TextUtils\n * @method injectBreakTags\n * @param {String} str\n * \t\tA sentence or long block or copy.\n * @param {Array} indexes\n * \t\tAn array of numbers representing the index of the space to replace with a \"<br>\" tag\n * @desc\n * \t\tAdds \"<br>\" tags to a block of copy and specified indexes. Reading the sentence, starting\n * \t\tafter the first word, that space would be index 0, then next space would be 1, etc.\n */\nexport function injectBreakTags(str, indexes) {\n\tlet split = str.split(/\\s/g)\n\tindexes.sort((a, b) => b - a).forEach(val => {\n\t\tconst before = split.slice(0, val)\n\t\tconst median = split.slice(val, val + 2).join('<br>')\n\t\tconst after = split.slice(val + 2)\n\t\tsplit = before.concat(median, after)\n\t})\n\treturn split.join(' ')\n}\n","// export { default as Countdown } from './lib/Countdown'\nexport { default as FullScreen } from './lib/FullScreen'\n\n// named exports\nimport * as Ratio from './lib/Ratio'\nimport * as Effects from './lib/Effects'\nimport * as Clamp from './lib/Clamp'\nimport * as Align from './lib/Align'\nimport * as Styles from './lib/Styles'\nimport * as Markup from './lib/Markup'\n\nexport { Ratio, Effects, Clamp, Align, Markup, Styles }\n","/**\n * @npmpackage\n * @class Align\n * @desc\n * Import from <a href=\"https://github.com/ff0000-ad-tech/ad-view\">ad-view</a>\n * <br>\n * <codeblock>\n * \t// importing into an ES6 class\n * \timport { Align } from 'ad-view'\n * </codeblock>\n * <br>\n * Utility for aligning objects, which works for DOM elements and {@link CanvasDrawer} elements.  The x and y alignments are split up\n * into separate assignemnts in one call. There are extra parameters that can be passed into the object to handle more complex logic.\n * <br>\n * <b>Notes:</b>\n * <br>\n * Align, by default, snaps to a full pixel. To change this, see <b>Sample 3</b> ( snap: false )\n * <br>\n * <b>Sample 1</b>\n * <codeblock>\n * // simple classic usage\n * Align.set(myDiv, Align.LEFT)   // only align left\n * Align.set(myDiv, Align.BOTTOM) // only align bottom\n * Align.set(myDiv, Align.CENTER) // align both x and y to the center\n * </codeblock>\n * <br>\n * <b>Sample 2</b>\n * <codeblock>\n * // simply align the x and y seperately\n * Align.set(myDiv, {\n * \tx: Align.RIGHT,\n * \ty: Align.BOTTOM\n * })\n * </codeblock>\n * <br>\n * <b>Sample 3</b>\n * <br>\n * <b>'against'</b> is an object to which we align our given object, like making myDiv perfectly centered against myOtherDiv\n * <br>\n * <b>'against'</b> could also be a number, as in align myDiv centered against adParams.adWidth / 2\n * <br>\n * <br>\n * <b>'outer'</b> is an optional complex parameter which determines how we align to the 'against' object; default to false\n * <br>\n * If <b>'against'</b> is a number, then <b>'outer'</b> will have no affect.\n * <br>\n * <br>\n * <img src=\"https://github.com/ff0000-ad-tech/ad-docs/blob/master/assets/ad-view/align_c.jpg\" />\n * <br><br>\n * <codeblock>\n * // complex alignment, align in relation to another div with an offset shift of 10 pixels, without snapping to a whole pixel\n * Align.set(myDiv, {\n * \tx: {\n * \t\ttype: Align.RIGHT,\n * \t\tagainst: myOtherDiv,\n * \t\toffset: 10,\n * \t\touter: true\n * \t},\n * \ty: {\n * \t\ttype: Align.BOTTOM,\n * \t\toffset: 14\n * \t},\n * \tsnap: false\n * })\n * </codeblock>\n * <br><br>\n *\n * <b>Sample 4</b>\n * <codeblock>\n * // complex alignment, align in relation to a fixed number with an offset shift of 10 pixels\n * Align.set(myDiv, {\n * \tx: {\n * \t\ttype: Align.RIGHT,\n * \t\tagainst: 200\n * \t\toffset: 10,\n * \t},\n * \ty: {\n * \t\ttype: Align.BOTTOM,\n * \t\tagainst: 30\n * \t\toffset: 14\n * \t},\n * });\n * </codeblock>\n * <br><br>\n *\n * <b>Sample 5</b>\n * <br>\n * An Array of items can be passed in to the `source` argument. All items will be individually aligned following the rules passed into the `arg` argument\n * <br><br>\n * <codeblock>\n * // aligns all items to the center\n * Align.set([myDiv0, myDiv1, myDiv2], Align.CENTER)\n *\n * // aligns all items to the horizontal center and bottom\n * Align.set([myDiv0, myDiv1, myDiv2], {\n * \tx: Align.CENTER,\n * \ty: Align.BOTTOM\n * })\n * </codeblock>\n * <br><br>\n *\n * <b>Sample 6</b>\n * <br>\n * The optional keys: <b>'against'</b>, <b>'offset'</b>, and <b>'outer'</b> can be set at the top level to apply to <i>BOTH</i> dirctions as applicable.\n * However, if a key is set within <b>'x'</b> or <b>'y'</b>, that will take priority\n * <br><br>\n * <codeblock>\n * // aligns all items to the center of myRefDiv\n * Align.set([myDiv0, myDiv1, myDiv2], {\n * \ttype: Align.CENTER,\n * \tagainst: myRefDiv\n * })\n *\n * // Note the against set on the top level then in y:\n * // This is NOT good syntax but does technically works...\n * Align.set([myDiv0, myDiv1, myDiv2], {\n * \tagainst: myRefDiv,\n * \toffset: 10\n * \tx: Align.CENTER,\n * \ty: {\n * \t\ttype: Align.BOTTOM,\n * \t\tagainst: myOtherDiv\n * \t}\n * })\n * // ...in this case use:\n * Align.set([myDiv0, myDiv1, myDiv2], {\n * \toffset: 10\n * \tx: {\n * \t\ttype: Align.CENTER,\n * \t\tagainst: myRefDiv\n * \t},\n * \ty: {\n * \t\ttype: Align.BOTTOM,\n * \t\tagainst: myOtherDiv\n * \t}\n * })\n * </codeblock>\n */\nimport * as Markup from './Markup'\nimport * as Styles from './Styles'\n\nvar _rect = [\n\t{\n\t\tx: 'offsetWidth',\n\t\ty: 'offsetHeight',\n\t\tparent: 'parentNode'\n\t},\n\t{\n\t\tx: 'width',\n\t\ty: 'height',\n\t\tparent: 'stage'\n\t}\n]\n\n/**\n * @memberof Align\n * @const {string} BOTTOM\n * \tSynonymous with \"alignBottom\"\n */\nexport const BOTTOM = 'alignBottom'\n\n/**\n * @memberof Align\n * @const {string} CENTER\n * \tSynonymous with \"alignCenter\"\n */\nexport const CENTER = 'alignCenter'\n\n/**\n * @memberof Align\n * @const {string} LEFT\n * \tSynonymous with \"alignLeft\"\n */\nexport const LEFT = 'alignLeft'\n\n/**\n * @memberof Align\n * @const {string} RIGHT\n * \tSynonymous with \"alignRight\"\n */\nexport const RIGHT = 'alignRight'\n\n/**\n * @memberof Align\n * @const {string} TOP\n * \tSynonymous with \"alignTop\"\n */\nexport const TOP = 'alignTop'\n\n/**\n * @memberof Align\n * @const {string} BOTTOM_LEFT\n * \tSynonymous with \"alignBottomLeft\", used for {@link UITextField.alignText}\n */\nexport const BOTTOM_LEFT = 'alignBottomLeft'\n\n/**\n * @memberof Align\n * @const {string} BOTTOM_RIGHT\n * \tSynonymous with \"alignBottomRight\" used for {@link UITextField.alignText}\n */\nexport const BOTTOM_RIGHT = 'alignBottomRight'\n\n/**\n * @memberof Align\n * @const {string} TOP_LEFT\n * \tSynonymous with \"alignTopLeft\" used for {@link UITextField.alignText}\n */\nexport const TOP_LEFT = 'alignTopLeft'\n\n/**\n * @memberof Align\n * @const {string} TOP_RIGHT\n * \tSynonymous with \"alignTopRight\" used for {@link UITextField.alignText}\n */\nexport const TOP_RIGHT = 'alignTopRight'\n\n/* ------------------------------------------------------------------------------------------------------------------------------- */\n// PUBLIC METHODS\n\n/**\n * @memberof Align\n * @method get\n * @desc\n * \tCalculates but does not apply the amount the source element will move horizontally and/or vertically, relative to its parent\n * \taccording to provided mode. The constants allow for picking which coordinate to apply.\n */\nexport function get(source, arg) {\n\tvar elem = source.canvas || Markup.get(source)\n\tvar obj = {}\n\tvar snap = arg.snap !== false\n\tvar sourceRect = isDomElement(source) ? 0 : 1\n\n\tif (typeof arg == 'string') {\n\t\targ = calculate(arg)\n\t}\n\t// check for top level against\n\tconst topAgainst = arg.against\n\tif (arg.type) {\n\t\tconst typeToObj = calculate(arg.type)\n\t\tfor (let key in typeToObj) {\n\t\t\tif (!arg.hasOwnProperty(key)) {\n\t\t\t\targ[key] = typeToObj[key]\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (let xy in arg) {\n\t\tif (xy == 'x' || xy == 'y') {\n\t\t\tlet params = arg[xy]\n\n\t\t\t// the x or y is null or undefined, so skip this pass of the loop\n\t\t\tif (!params) continue\n\n\t\t\tif (typeof params == 'string') {\n\t\t\t\tparams = {\n\t\t\t\t\ttype: params\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet against\n\t\t\tlet againstDimension\n\t\t\tlet againstX = 0\n\t\t\tlet againstNumber = false\n\t\t\tlet offset = params.offset || arg.offset || 0\n\n\t\t\t// check the outer vs top\n\t\t\tparams.outer = params.outer || arg.outer\n\n\t\t\tif (params.against !== undefined || topAgainst !== undefined) {\n\t\t\t\t// console.log('\\t params.against:', params.against, topAgainst)\n\t\t\t\tif (params.against == 0) {\n\t\t\t\t\tagainst = 0\n\t\t\t\t} else {\n\t\t\t\t\tagainst = params.against || topAgainst\n\t\t\t\t}\n\t\t\t\tvar againstRect = 0\n\t\t\t\t// console.log('\\t against:', against)\n\n\t\t\t\tif (isDomElement(against)) {\n\t\t\t\t\tif (against.canvas) againstRect = 1\n\t\t\t\t\telse againstX = Styles.getCss(against, xy)\n\t\t\t\t} else if (typeof against === 'number') {\n\t\t\t\t\tagainstNumber = true\n\t\t\t\t\tagainstX = against\n\t\t\t\t} else {\n\t\t\t\t\tagainstX = against[xy]\n\t\t\t\t\tagainstRect = 1\n\t\t\t\t}\n\n\t\t\t\tagainstDimension = _rect[againstRect][xy]\n\n\t\t\t\tif (params.type === CENTER) params.outer = false\n\t\t\t} else {\n\t\t\t\tagainst = elem[_rect[sourceRect].parent]\n\t\t\t\tagainstDimension = _rect[sourceRect][xy]\n\t\t\t}\n\n\t\t\tvar widthOrHeight = elem[_rect[sourceRect][xy]]\n\n\t\t\tswitch (source._type) {\n\t\t\t\tcase 'arc':\n\t\t\t\tcase 'path':\n\t\t\t\t\tif (params.type == CENTER) {\n\t\t\t\t\t\twidthOrHeight = 0\n\t\t\t\t\t} else {\n\t\t\t\t\t\toffset += widthOrHeight / 2\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\tcase 'text':\n\t\t\t\t\tif (xy === 'x') {\n\t\t\t\t\t\tswitch (source.alignText) {\n\t\t\t\t\t\t\tcase 'center':\n\t\t\t\t\t\t\t\twidthOrHeight = 0\n\t\t\t\t\t\t\tcase 'right':\n\t\t\t\t\t\t\t\twidthOrHeight *= -1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t}\n\n\t\t\tvar pos = calculate(\n\t\t\t\tparams.type,\n\t\t\t\twidthOrHeight,\n\t\t\t\tagainstNumber ? 0 : against[againstDimension],\n\t\t\t\t!againstNumber && !!params.outer\n\t\t\t)\n\n\t\t\tif (pos != null) {\n\t\t\t\tpos += againstX + offset\n\t\t\t\tobj[xy] = snap ? Math.round(pos) : pos\n\t\t\t}\n\t\t}\n\t}\n\n\treturn obj\n}\n\n/**\n * @memberof Align\n * @method set\n * @desc\n * \tMoves the source element horizontally and/or vertically, relative to its parent according to provided mode. The constants\n * \tallow for picking which coordinate to apply. Will additionally return the get() value. NOTE: If setting an array, there will NOT be a return\n */\nexport function set(source, arg) {\n\tlet _sources = Array.isArray(source) ? source : [source]\n\tlet first\n\tfor (let item of _sources) {\n\t\tvar obj = get(item, arg)\n\t\tif (isDomElement(item)) {\n\t\t\tvar elem = item.canvas || Markup.get(item)\n\t\t\tStyles.setCss(elem, obj)\n\t\t} else {\n\t\t\tfor (var prop in obj) item[prop] = obj[prop]\n\t\t}\n\t\tif (first == undefined) {\n\t\t\tfirst = obj\n\t\t}\n\t}\n\n\tif (_sources.length == 1) return first\n}\n\n/* ------------------------------------------------------------------------------------------------------------------------------- */\n// PRIVATE METHODS\n\n// used internally by Flipbook\nexport function calculate(mode, source, target, outer) {\n\t//console.log( 'calculate()', mode, source, target, outer )\n\t// when only passing a string, this will create {x/y} from string\n\tvar isConvert = arguments.length == 1\n\tswitch (mode) {\n\t\tcase 'alignBottom':\n\t\t\tif (outer) source = 0\n\t\t\tif (!isConvert) return target - source\n\n\t\tcase 'alignTop':\n\t\t\treturn isConvert ? { y: mode } : outer ? -source : 0\n\n\t\tcase 'alignRight':\n\t\t\tif (outer) target += source\n\t\t\tif (!isConvert) return target - source\n\n\t\tcase 'alignLeft':\n\t\t\treturn isConvert ? { x: mode } : outer ? -source : 0\n\n\t\tcase 'alignCenter':\n\t\t\tif (outer) target = 0\n\t\t\treturn isConvert ? { x: mode, y: mode } : (target - source) / 2\n\n\t\tdefault:\n\t\t\treturn null\n\t}\n}\n\n/* ------------------------------------------------------------------------------------------------------------------------------- */\n// PRIVATE METHODS\nfunction isDomElement(elem) {\n\t// console.warn(':: Align :: isDomElement() :: elem =', elem)\n\treturn elem && (elem instanceof HTMLElement || elem.canvas != undefined)\n}\n\n/* ------------------------------------------------------------------------------------------------------------------------------- */\n","/**\n * @npmpackage\n * @class Clamp\n * @desc\n * Import from <a href=\"https://github.com/ff0000-ad-tech/ad-view\">ad-view</a>\n * <br>\n * <codeblock>\n * \t// importing into an ES6 class\n * \timport { Clamp } from 'ad-view'\n * </codeblock>\n * <br>\n * \tUtility for resizing a DOM element to the size of all its content, sort of like shrink wrapping.\n * \t<br>\n * \tThis will clamp the bounds and potentially move the x and y so that visually the content stays where it is. There is the option to clamp\n * \tboth horizontally and vertically, or you can just do one. Additionally there is a optional object to add some buffer space on any of the sides.\n *\n * @example\n * // clamp both directions\n * Clamp.set( View.main.myDiv, Clamp.XY );\n *\n * // clamp both directions while adding some buffer padding on each side\n * Clamp.set( View.main.myDiv, Clamp.XY, {\n * \ttop : 5,\n * \tleft : 10,\n * \tbottom : 5,\n * \tright : 10\n * });\n *\n * // clamp only horizontally and add a buffer padding on the left\n * Clamp.set( View.main.myDiv, Clamp.X, {\n * \tleft : 10\n * });\n */\nimport * as Styles from './Styles'\nimport * as Markup from './Markup'\n\nvar _rect = {\n\tx: ['offsetWidth', 'width', 'left', 'right'],\n\ty: ['offsetHeight', 'height', 'top', 'bottom']\n}\n\n/**\n * @memberof Clamp\n * @const {string} X\n * \tSynonymous with \"clampX\" - clamp on the horizontal direction only\n */\nexport const X = 'clampX'\n\n/**\n * @memberof Clamp\n * @const {string} Y\n * \tSynonymous with \"clampY\" - clamp on the vertical direction only\n */\nexport const Y = 'clampY'\n\n/**\n * @memberof Clamp\n * @const {string} XY\n * \tSynonymous with \"clampXY\" - clamp on all sides\n */\nexport const XY = 'clampXY'\n\n/* ------------------------------------------------------------------------------------------------------------------------------- */\n// PUBLIC METHODS\n\n/**\n * @memberof Clamp\n * @method set\n * @param {element} source\n * \tThe DOM element to resize and move.\n * @param {string} type\n * \tA String/Constant representing what directions to clamp on.\n * @param {object} buffer\n * \t(optional) An Object that has the values to add buffer padding to each side. See properties for more info:\n *\n * @property {number} buffer.left\n * \tAmount of left padding\n * @property {number} buffer.right\n * \tAmount of right padding\n * @property {number} buffer.top\n * \tAmount of top padding\n * @property {number} buffer.bottom\n * \tAmount of bottom padding\n * @desc\n * \tResizes and moves the source element horizontally and/or vertically, relative to all its children.\n */\nexport function set(source, type, buffer, move) {\n\tvar elem = Markup.get(source)\n\tmove = move !== false\n\n\tvar children = elem.childNodes\n\tvar childCoordinates = []\n\n\tvar direction = {}\n\tif (/(x)/gi.exec(type)) direction.x = {}\n\tif (/(y)/gi.exec(type)) direction.y = {}\n\n\tfor (var i = 0; i < children.length; i++) {\n\t\tvar child = children[i]\n\n\t\tchildCoordinates[i] = {}\n\n\t\tfor (var xy in direction) {\n\t\t\tvar xyValue = Styles.getCss(child, xy)\n\t\t\tvar whValue = child[_rect[xy][0]]\n\n\t\t\tvar add = xyValue + whValue\n\n\t\t\tvar xyDirection = direction[xy]\n\n\t\t\tif (i == 0) {\n\t\t\t\txyDirection.min = xyValue\n\t\t\t\txyDirection.max = add\n\t\t\t}\n\n\t\t\tif (xyValue < xyDirection.min) xyDirection.min = xyValue\n\n\t\t\tif (xyDirection.max < add) xyDirection.max = add\n\n\t\t\tchildCoordinates[i][xy] = xyValue\n\t\t}\n\t}\n\n\t// process the optional buffer\n\tvar _buffer = {\n\t\ttop: 0,\n\t\tbottom: 0,\n\t\tleft: 0,\n\t\tright: 0\n\t}\n\n\tif (buffer) {\n\t\tfor (var prop in _buffer) {\n\t\t\t_buffer[prop] = isNaN(buffer) ? buffer[prop] || 0 : buffer\n\t\t}\n\t}\n\n\t// resize and move the container\n\tvar css = {}\n\tfor (var xy in direction) {\n\t\tvar d = direction[xy]\n\n\t\tif (move) css[xy] = d.min + Styles.getCss(elem, xy) - _buffer[_rect[xy][2]]\n\n\t\tcss[_rect[xy][1]] = d.max - d.min + _buffer[_rect[xy][2]] + _buffer[_rect[xy][3]]\n\t}\n\n\tStyles.setCss(elem, css)\n\n\t// move all the children\n\tfor (i = 0; i < children.length; i++) {\n\t\tvar child = children[i]\n\t\tvar css = {}\n\n\t\tfor (var xy in direction) {\n\t\t\tcss[xy] = childCoordinates[i][xy] - direction[xy].min + _buffer[_rect[xy][2]]\n\t\t}\n\n\t\tStyles.setCss(child, css)\n\t}\n}\n\n/* ------------------------------------------------------------------------------------------------------------------------------- */\n","/**\n * @npmpackage\n * @class Effects\n * @desc\n *\tUtilities for adding effects to elements<br>\n *\tImport from <a href=\"https://github.com/ff0000-ad-tech/ad-view\">ad-view</a>\n *\t<codeblock>\n *\timport { Effects } from 'ad-view'\n *\t</codeblock>\n *\t<br>\n */\nimport { MathUtils, ColorUtils } from 'ad-utils'\n\nimport * as Styles from './Styles'\n\n/* --------------------------------------------------------------------------------- */\n// PUBLIC METHODS\n\n/**\n * @memberof Effects\n * @method blur\n * @param {object} obj\n * \tobject containing blur arguments, see Properties for more info:\n * \t@property {element} obj.target\n * \t\tdom element\n * \t@property {number} obj.amount\n * \t\tthe level of blurriness\n * @desc\n * \tBlurs a dom element.\n * @example\n * Effects.blur({\n * \ttarget: _myDiv,\n * \tamount: 10\n * })\n */\nexport function blur(obj) {\n\tif (obj.amount >= 0)\n\t\tStyles.setCss(obj.target, {\n\t\t\tfilter: 'blur(' + obj.amount + 'px)'\n\t\t})\n}\n\n/**\n * @memberof Effects\n * @method dropShadow\n * @param {object} obj\n * \tobject containing drop shadow arguments, see Properties for more info:\n * \t@property {element} obj.target\n * \t\tdom element\n * \t@property {number} obj.angle\n * \t\toptional NUMBER IN DEGREES for the angle at which the shadow will project. Defaults to 0.\n * \t@property {number} obj.distance\n * \t\toptional NUMBER for how far away the shadow will offset. Defaults to 0.\n * \t@property {number} obj.size\n * \t\toptional NUMBER for shadow radius. Defaults to 0.\n * \t@property {number} obj.spread\n * \t\toptional NUMBER for how much extra the shadow will increase before it begins its gradient fade. Defaults to 0.\n * \t@property {string|object} obj.color\n * \t\toptional color of shadow as a HEX STRING :\"#ff0000\",\n * \t\tRGB/A STRING: \"rgb(255, 0, 0)\" / \"rgba(255, 0, 0, 1)\",\n * \t\tor an RGB/A OBJECT:{r:255,g:0,b:0} / {r:255,g:0,b:0,a:1}. Defaults to \"#000000\".\n * \t@property {number} obj.alpha\n * \t\toptional NUMBER of shadow opacity, if set will overwrite color.a. Defaults to 1.\n * \t@property {boolean} obj.inner\n * \t\toptional BOOLEAN to set the shadow as inset. Defaults to false.\n * @desc\n * \tAdds a drop shadow to a dom element. Follows the same use specs as Photoshop.\n * @example\n * Effects.dropShadow({\n * \ttarget:_myDiv,\n * \tangle: 135,\n * \tdistance: 50,\n * \tsize: 20,\n * \tspread: 10,\n * \tcolor: 'rgb(90, 0, 0)',\n * \talpha: 0.1,\n * \tinner: true\n * })\n */\nexport function dropShadow(obj) {\n\tStyles.setCss(obj.target, {\n\t\tboxShadow: createShadow(\n\t\t\tobj.angle || 0,\n\t\t\tobj.distance || 0,\n\t\t\tobj.size || 0,\n\t\t\tobj.spread || 0,\n\t\t\tobj.color || '#000000',\n\t\t\tobj.alpha,\n\t\t\tobj.inner\n\t\t)\n\t})\n}\n\n/**\n * @memberof Effects\n * @method textDropShadow\n * @param {object} obj\n * \tobject containing drop shadow arguments, see Properties for more info:\n * \t@property {element} obj.target\n * \t\tdom element\n * \t@property {number} obj.angle\n * \t\toptional NUMBER IN DEGREES for the angle at which the shadow will project. Defaults to 0.\n * \t@property {number} obj.distance\n * \t\toptional NUMBER for how far away the shadow will offset. Defaults to 0.\n * \t@property {number} obj.size\n * \t\toptional NUMBER for shadow radius. Defaults to 0.\n * \t@property {string|object} obj.color\n * \t\toptional color of shadow as a HEX STRING :\"#ff0000\",\n * \t\tRGB/A STRING: \"rgb(255, 0, 0)\" / \"rgba(255, 0, 0, 1)\",\n * \t\tor an RGB/A OBJECT:{r:255,g:0,b:0} / {r:255,g:0,b:0,a:1}. Defaults to \"#000000\".\n * \t@property {number} obj.alpha\n * \t\toptional NUMBER of shadow opacity, if set will overwrite color.a. Defaults to 1.\n * @desc\n * \tAdds a drop shadow to text within a dom element. Follows the same use specs as Photoshop.\n * @example\n * Effects.textDropShadow({\n * \ttarget:_myText,\n * \tangle: 45,\n * \tdistance: 15,\n * \tsize: 1,\n * \tcolor: '#ff0000',\n * \talpha: 0.5\n * })\n */\nexport function textDropShadow(obj) {\n\tStyles.setCss(obj.target, {\n\t\ttextShadow: createShadow(\n\t\t\tobj.angle || 0,\n\t\t\tobj.distance || 0,\n\t\t\tobj.size || 0,\n\t\t\tnull,\n\t\t\tobj.color || '#000000',\n\t\t\tobj.alpha\n\t\t)\n\t})\n}\n\n/**\n * @memberof Effects\n * @method glow\n * @param {object} obj\n * \tobject containing glow arguments, see Properties for more info:\n * \t@property {element} obj.target\n * \t\tdom element\n * \t@property {number} obj.size\n * \t\toptional NUMBER for glow radius. Defaults to 0.\n * \t@property {number} obj.spread\n * \t\toptional NUMBER for how much extra the glow will increase before it begins its gradient fade. Defaults to 0.\n * \t@property {string|object} obj.color\n * \t\toptional color of glow as a HEX STRING :\"#ff0000\",\n * \t\tRGB/A STRING: \"rgb(255, 0, 0)\" / \"rgba(255, 0, 0, 1)\",\n * \t\tor an RGB/A OBJECT:{r:255,g:0,b:0} / {r:255,g:0,b:0,a:1}. Defaults to \"#000000\".\n * \t@property {number} obj.alpha\n * \t\toptional NUMBER of glow opacity, if set will overwrite color.a. Defaults to 1.\n * \t@property {boolean} obj.inner\n * \t\toptional BOOLEAN to set the glow as inset. Defaults to false.\n * @desc\n * \tAdds a glow to a dom element. Follows the same use specs as Photoshop.\n * @example\n * Effects.glow({\n * \ttarget: _myDiv,\n * \tsize: 20,\n * \tspread: 0,\n * \tcolor: 'rgb(90, 0, 0)',\n * \talpha: 0.5,\n * \tinner: true\n * })\n */\nexport function glow(obj) {\n\tobj.angle = 0\n\tobj.distance = 0\n\tdropShadow(obj)\n}\n\n/**\n * @memberof Effects\n * @method linearGradient\n * @param {object} obj\n * \tobject containing gradient arguments, see Properties for more info:\n * \t@property {element} obj.target\n * \t\tdom element\n * \t@property {array} obj.colors\n * \t\tARRAY of colors as either a HEX STRING :\"#ff0000\" or an RGB/A STRING: \"rgb(255, 0, 0)\" / \"rgba(255, 0, 0, 1)\".\n * \t@property {number} obj.angle\n * \t\tNUMBER IN DEGREES of angle to draw linear-gradient at. Defaults to 0.\n * @desc\n * Changes the background of a given dom element to be a linear gradient.\n * <br><br>\n * <b>Example</b><br>\n * Adding a horizontal gradient from red, to blue, fading to a transparent yellow.\n * <codeblock>\n * Effects.linearGradient({\n * \ttarget: _myDiv,\n * \tcolors: ['red', 'blue', 'rgba(255, 255, 0, 0.5)'],\n * \tangle: 90\n * })\n * </codeblock>\n */\nexport function linearGradient(obj) {\n\tStyles.setCss(obj.target, {\n\t\tbackground: 'linear-gradient(' + (obj.angle || 0) + 'deg, ' + obj.colors.toString() + ')'\n\t})\n}\n\n/**\n * @memberof Effects\n * @method radialGradient\n * @param {object} obj\n * \tobject containing gradient arguments, see Properties for more info:\n * \t@property {element} obj.target\n * \t\tdom element\n * \t@property {array} obj.colors\n * \t\tARRAY of colors as either a HEX STRING :\"#ff0000\"\n * \t\tor an RGB/A STRING: \"rgb(255, 0, 0)\" / \"rgba(255, 0, 0, 1)\".\n * \t\t<br><br>\n * \t\tTo add stops, append a % value to the color string: [\"#ff0000 50%, \"#00ff00 90%\"].\n * \t@property {number} obj.angle\n * \t\tNUMBER IN DEGREES of angle to draw linear-gradient at. Defaults to 0.\n * @desc\n * Changes the background of a given dom element to be a radial gradient.\n * <br><br>\n * <b>Example</b><br>\n * Adding a gradient from red to blue, with a very large choke on the blue.\n * <codeblock>\n * Effects.radialGradient({\n * \ttarget: _myDiv,\n * \tcolors: ['#ff0000', '#0000ff 10%']\n * });\n * </codeblock>\n */\nexport function radialGradient(obj) {\n\tStyles.setCss(obj.target, {\n\t\tbackground: 'radial-gradient(' + obj.colors.toString() + ')'\n\t})\n}\n\n/* --------------------------------------------------------------------------------- */\n// PRIVATE METHODS\nfunction createShadow(angle, distance, size, spread, color, alpha, inner) {\n\tvar val = ''\n\tvar deg = angle * -1 + 180\n\tvar rad = MathUtils.toRadians(deg)\n\tval += (Math.cos(rad) * distance).toFixed(8) + 'px '\n\tval += (Math.sin(rad) * distance).toFixed(8) + 'px '\n\tval += size + 'px'\n\n\tif (spread) val += ' ' + spread + 'px'\n\n\tval += ' ' + ColorUtils.toRgbaString(color, alpha)\n\n\tinner = !!inner\n\tif (inner) val += ' inset'\n\n\treturn val\n}\n","var FullScreen = new function() {\n\tvar F = this\n\n\tF.isFullScreen = function() {\n\t\treturn document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement\n\t}\n\n\tF.enter = function(elem) {\n\t\tif (F.isFullScreen()) return\n\n\t\tif (elem.requestFullscreen) {\n\t\t\tconsole.log(' -> requestFullscreen')\n\t\t\telem.requestFullscreen()\n\t\t} else if (elem.msRequestFullscreen) {\n\t\t\tconsole.log(' -> msRequestFullscreen')\n\t\t\telem.msRequestFullscreen()\n\t\t} else if (elem.mozRequestFullScreen) {\n\t\t\tconsole.log(' -> mozRequestFullScreen')\n\t\t\telem.mozRequestFullScreen()\n\t\t} else if (elem.webkitRequestFullscreen) {\n\t\t\tconsole.log(' -> webkitRequestFullscreen')\n\t\t\telem.webkitRequestFullscreen()\n\t\t}\n\t}\n\n\tF.exit = function() {\n\t\tif (!F.isFullScreen()) return\n\n\t\tif (document.exitFullscreen) {\n\t\t\tconsole.log(' -> exitFullscreen')\n\t\t\tdocument.exitFullscreen()\n\t\t} else if (document.msExitFullscreen) {\n\t\t\tconsole.log(' -> msExitFullscreen')\n\t\t\tdocument.msExitFullscreen()\n\t\t} else if (document.mozCancelFullScreen) {\n\t\t\tconsole.log(' -> mozCancelFullScreen')\n\t\t\tdocument.mozCancelFullScreen()\n\t\t} else if (document.webkitExitFullscreen) {\n\t\t\tconsole.log(' -> webkitExitFullscreen')\n\t\t\tdocument.webkitExitFullscreen()\n\t\t}\n\t}\n}()\n\nexport default FullScreen\n","/**\n * @npmpackage\n * @class Markup\n * @desc\n * This object contains utilities relateed to dom elements.<br>\n * Import from <a href=\"https://github.com/ff0000-ad-tech/ad-view\">ad-view</a>\n * <codeblock>\n * import { Markup } from 'ad-view'\n * </codeblock>\n */\n\n/**\n * @memberof Markup\n * @method get\n * @param {string} selector\n * \tA string selector. It defaults to find the string as an id, or if the string starts with '#'.\n * \tIf starts with '.', it selects by class name. If wrapped with '<>', it selects by tag name.\n * @param {element} parent\n * \tOptional parent element to get the element(s) from. Defaults to document.\n * @returns {element|HTMLCollection}\n * \tOne single element if the selector is an id. With class name or tag name, it returns an HTML collection ( similiar to an array ).\n * @desc\n * \tUsed to select elements.\n * @example\n * // get element by its id called 'myId'\n * Markup.get('myId')\n *\n * // same as above\n * Markup.get('#myId')\n *\n * // get element by CSS classname 'myClass'\n * Markup.get('.myClass')\n *\n * // get elements by tag name 'head'\n * Markup.get('<head>')\n */\nexport function get(selector, parent) {\n\tif (typeof selector !== 'string') {\n\t\treturn selector\n\t}\n\n\tparent = parent || document\n\tselector = selector.trim()\n\n\tswitch (selector[0]) {\n\t\tcase '#':\n\t\t\t// id\n\t\t\treturn parent.getElementById(selector.slice(1))\n\t\t\tbreak\n\t\tcase '.':\n\t\t\t// class\n\t\t\treturn parent.getElementsByClassName(selector.slice(1))\n\t\t\tbreak\n\t\tcase '<':\n\t\t\t// tag\n\t\t\treturn parent.getElementsByTagName(selector.slice(1, selector.length - 1))\n\t\t\tbreak\n\t\tdefault:\n\t\t\t// default to id for backworad support\n\t\t\treturn parent.getElementById(selector)\n\t}\n}\n// the deprecated syntax 12/28/16\nexport function getElement(selector, parent) {\n\treturn get(selector, parent)\n}\n\n/**\n * @memberof Markup\n * @method removeChildren\n * @param {element} _target\n * \telement to be targeted\n * @desc\n * \tRemoves all the children elements of an element\n */\nexport function removeChildren(_target) {\n\tvar element = get(_target)\n\tconsole.log('removeChildren (' + _target + ')')\n\twhile (element.firstChild) {\n\t\telement.removeChild(element.firstChild)\n\t}\n}\n\n/* \n\tTo be deprecated after moving addiFrame and addSvg to UIComponent \n*/\n// export function applyContainerCss (_element, _containerData) {\n// \tif (!_containerData.css) _containerData.css = {};\n// \tif (!_containerData.css.position)\n// \t\t_containerData.css.position = 'absolute';\n// \tStyles.setCss(_element, _containerData.css);\n// \tStyles.setCss(_element, _containerData.styles);\n// }\n\n/* Deprecated. Add an iframe to the containerData.target, pointing at containerData.source.  */\nexport function addiFrame(_containerData) {\n\tvar element = document.createElement('iFrame')\n\telement.id = _containerData.id\n\telement.width = _containerData.css.width\n\telement.height = _containerData.css.height\n\n\tdelete _containerData.css.width\n\tdelete _containerData.css.height\n\n\t// iframe properties\n\telement.setAttribute('src', _containerData.source)\n\telement.setAttribute('frameborder', '0')\n\telement.setAttribute('scrolling', 'no')\n\telement.setAttribute('allowfullscreen', '')\n\n\tapplyContainerCss(element, _containerData)\n\n\t_containerData.target.appendChild(element)\n\treturn element\n}\n\n/*\tDeprecated.\n\t_containerData\t\t\t- object with the necessary keys for creating an element. */\nexport function addSvg(_containerData) {\n\tvar nameSpace = 'http://www.w3.org/2000/svg'\n\tvar element = document.createElementNS(nameSpace, 'svg')\n\telement.setAttribute('height', _containerData.height)\n\telement.setAttribute('width', _containerData.width)\n\n\tvar path = document.createElementNS(nameSpace, 'path')\n\tpath.setAttribute('d', _containerData.d)\n\tpath.setAttribute('fill', _containerData.fill)\n\n\tif (_containerData.stroke != undefined) {\n\t\tpath.setAttribute('stroke', _containerData.stroke)\n\t}\n\tif (_containerData.strokeWidth != undefined) {\n\t\tpath.setAttribute('stroke-width', _containerData.strokeWidth)\n\t}\n\telement.appendChild(path)\n\n\tapplyContainerCss(element, _containerData)\n\n\t_containerData.target.appendChild(element)\n\treturn element\n}\n\n/**\n * @memberof Markup\n * @method applyToElements\n * @param {object} arg\n * \tSee properties for more info:\n * \t@property {object} arg.scope\n * \t\tthe scope of this\n * \t@property {function} arg.method\n * \t\tthe function to use\n * \t@property {element|array} arg.element\n * \t\tthe element(s) to apply the method to, can be a single element or an array\n * \t@property {string|number|array|object} arg.methodArg\n * \t\tthe argument to pass to the method function\n * @desc\n * \tApply a method to multiple elements. Currently assuming the method accepts element as the first argument,\n * \tand a second argument as the setting.\n * @example\n * var myElements = Markup.get( '.centered-blocks' );\n * Markup.applyToElements({\n * \tscope: Align,\n * \tmethod: Align.set,\n * \telements: myElements,\n * \tmethodArg: { x: Align.CENTER }\n * })\n */\nexport function applyToElements(arg) {\n\tif (arg.elements.length === undefined) {\n\t\t// assume it is a single element\n\t\targ.method.call(arg.scope, arg.elements, arg.methodArg)\n\t} else {\n\t\t// assume it is an array/HTML collection\n\t\tvar i\n\t\tfor (i = 0; i < arg.elements.length; i++) {\n\t\t\tvar el = arg.elements[i]\n\t\t\targ.method.call(arg.scope, el, arg.methodArg)\n\t\t}\n\t}\n}\n","/**\n * @npmpackage\n * @class Ratio\n * @desc\n * Utilities for different ratio layouts; used by {@link UIImage} and deprecated Flipbook.<br>\n * Import from <a href=\"https://github.com/ff0000-ad-tech/ad-view\">ad-view</a>\n * <codeblock>\n * import { Ratio } from 'ad-view'\n * </codeblock>\n */\n\n/**\n * @memberof Ratio\n * @const {string} EXACT\n * \t'auto' ~ Images display at the exact height and width of the source\n */\nexport const EXACT = 'auto'\n\n/**\n * @memberof Ratio\n * @const {string} FILL\n * \t'cover' ~ Scales the image to fill the target without distortion while maintaining aspect ratio, may cause a crop.\n */\nexport const FILL = 'cover'\n\n/**\n * @memberof Ratio\n * @const {string} FIT\n * \t'contain' ~ Scales to fit the full image without distortion while maintaining aspect ratio, may cause negative borders.\n */\nexport const FIT = 'contain'\n\n/**\n * @memberof Ratio\n * @const {string} STRETCH\n * \t'100% 100%' ~ Images stretches to fill the target, may cause aspect ratio distortion.\n */\nexport const STRETCH = '100% 100%'\n\nexport function resize(mode, source, target, returnObj) {\n\tmode = mode || EXACT\n\treturnObj ||\n\t\t(returnObj = {\n\t\t\twidth: 0,\n\t\t\theight: 0\n\t\t})\n\tif (mode == EXACT) {\n\t\treturnObj.width = source.width\n\t\treturnObj.height = source.height\n\t} else if (mode == STRETCH) {\n\t\treturnObj.width = target.width\n\t\treturnObj.height = target.height\n\t} else {\n\t\tvar s = source.width / source.height\n\t\tvar t = target.width / target.height\n\t\tvar a = mode == FILL ? s : t\n\t\tvar b = mode == FILL ? t : s\n\t\tif (a < b) {\n\t\t\treturnObj.height = source.height / (source.width / target.width)\n\t\t\treturnObj.width = target.width\n\t\t} else {\n\t\t\treturnObj.width = source.width / (source.height / target.height)\n\t\t\treturnObj.height = target.height\n\t\t}\n\t}\n\treturn returnObj\n}\n","import * as Markup from './Markup'\nimport { CssManager } from 'ad-control'\nimport { Matrix2D, Matrix3D, cssToData } from 'ad-geom'\n\n/**\n * @npmpackage\n * @class Styles\n * @desc\n * Utilities for CSS style related purposes. <br>\n * Import from <a href=\"https://github.com/ff0000-ad-tech/ad-view\">ad-view</a>\n * <codeblock>\n * import { Styles } from 'ad-view'\n * </codeblock>\n */\n\n/**\n * @memberof Styles\n * @method setCss\n * @param {string|element} _target\n * \tid or element to which the style(s) should be applied\n * @param {string|object|array} args\n * \tany type of CssDeclaration, an object of key-value pairs, a semicolon separated string of styles, or a separate( key, value )arguments\n * @desc\n * \tSets specified styles on target object.\n * @example\n * // set multiple styles using a css-string\n * Styles.setCss(myDiv, 'top: 30px; left: 10px')\n *\n * // set multiple styles using a css-object, same as the 'css' property on {@link UIComponent}s\n * Styles.setCss(myDiv, { top:30, left:10 })\n *\n * // set a single style, using individual( key, value )args\n * Styles.setCss(myDiv, 'top', 30)\n */\nexport function setCss(element, args) {\n\telement = Markup.get(element)\n\tvar cssList = {}\n\tif (arguments.length > 2) {\n\t\tfor (var i = 1; i < arguments.length; i += 2) {\n\t\t\tcssList = CssManager.conformCssKeyValue(arguments[i], arguments[i + 1])\n\t\t}\n\t} else if (typeof arguments[1] == 'string') {\n\t\tcssList = CssManager.conformCssString(arguments[1], element)\n\t} else {\n\t\tcssList = CssManager.conformCssObject(arguments[1], element)\n\t}\n\tCssManager.apply(element, cssList)\n}\n\n/**\n * @memberof Styles\n * @method getCss\n * @param {string|element} _target\n * \tid or element to which css style should be applied\n * @param {string} key\n * \tcss key\n * @desc\n * \tGets a specific style for a particular key.\n */\nexport function getCss(element, key) {\n\telement = Markup.get(element)\n\n\tvar cssValue\n\tif (key === 'x' || key === 'y') {\n\t\tconst existingTransform = element.style[CssManager.getDeviceKey('transform')]\n\t\tlet matrix = new Matrix2D()\n\t\tif (existingTransform) {\n\t\t\tconst matrixArray = cssToData(existingTransform)\n\t\t\t// 2d matrix length = 6\n\t\t\t// 3d matrix length = 16\n\t\t\t// translate3d length = 3\n\t\t\tif (matrixArray.length !== 6) {\n\t\t\t\tmatrix = new Matrix3D()\n\t\t\t}\n\t\t\tmatrix.setFromArray(matrixArray)\n\t\t}\n\t\tcssValue = key === 'x' ? matrix.getX() : matrix.getY()\n\t} else {\n\t\tvar style = window.getComputedStyle(element, null)\n\t\tcssValue = style.getPropertyValue(key).replace(/px/, '')\n\t\tif (!isNaN(cssValue)) cssValue = parseInt(cssValue, 10)\n\t}\n\n\treturn cssValue\n}\n\n/**\n * @memberof Styles\n * @method injectStylesheet\n * @param {string} nodeId\n * \tthe id of the &lt;style> node written to the &lt;head>\n * @param {string|object|array} styles\n * \tany type of CssDeclaration: an object of key-value pairs, a semicolon separated string of styles, or a separate( key, value )arguments\n * @desc\n * \tCreates a new CSS stylesheet node (class, tag, etc) DEFINITION out of the submitted styles.\n * @example\n * // selector/CSS string pair\n * Styles.injectStylesheet('myFirstStyle',\n * \t'.class-a', 'position:absolute; width:inherit;'\n * )\n *\n * // selector/CSS string pair: add multiple class declarations to the same node\n * Styles.injectStylesheet('mySecondStyle',\n * \t'.class-b', 'position:absolute;',\n * \t'.class-b-top', 'width:inherit; height:inherit;'\n * )\n *\n * // selector/CSS string pair:  have mulitple classes share the same logic\n * Styles.injectStylesheet('myThirdStyle',\n * \t'.class-c, .class-d', 'position:absolute;'\n * )\n *\n * // selector/CSS string pair: add style to a tag name globally\n * Styles.injectStylesheet('myFourthStyle',\n * \t'h1', 'position:absolute;'\n * )\n *\n * // self-contained CSS string\n * var myCssString = '.myClass, h1 { color: blue; margin: 10px; }'\n * Styles.injectStylesheet('myFifthStyle', myCssString)\n */\nexport function injectStylesheet(nodeId, styles) {\n\tif (document.getElementById(nodeId)) {\n\t\treturn\n\t}\n\n\tvar style = document.createElement('style')\n\tstyle.type = 'text/css'\n\tstyle.id = nodeId\n\n\t// if only two parameters, assuming styles is CSS string\n\t// else process as selector/style pair\n\tvar str = arguments.length === 2 ? styles : ''\n\n\tif (arguments.length > 2) {\n\t\tfor (var i = 0; i < arguments.length - 1; i += 2) {\n\t\t\t// strip out the white space after comma\n\t\t\tvar names = arguments[i + 1].replace(/\\,\\s+/g, ',')\n\n\t\t\tstr += names\n\t\t\tstr += ' { ' + (arguments[i + 2] || '') + ' }\\n'\n\t\t}\n\t}\n\tstyle.innerHTML = str\n\tdocument.getElementsByTagName('head')[0].appendChild(style)\n}\n\n/**\n * @memberof Styles\n * @method addClass\n * @param {string|element} target\n * \tid or element to which css style should be added\n * @param {string} className\n * \tcss class association to be added to this target\n * @desc\n * \tAdd a CSS class ASSOCIATION to the targeted element.\n */\nexport function addClass(target, className) {\n\tvar element = Markup.get(target)\n\n\t// IE does not support multiple classes being added as arguments, so must loop\n\tfor (var i = 0; i < arguments.length - 1; i++) {\n\t\telement.classList.add(arguments[i + 1])\n\t}\n}\n\n/**\n * @memberof Styles\n * @method removeClass\n * @param {string|element} target\n * \tid or element from which css style should be removed\n * @param {string} className\n * \tcss class association to be removed from this target\n * @desc\n * \tRemoves a CSS class ASSOCIATION from the targeted element.\n */\nexport function removeClass(target, className) {\n\tvar element = Markup.get(target)\n\telement.classList.remove(className)\n}\n","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n","import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError,\n\t_vnodeId: 0\n};\n\nexport default options;\n","import options from './options';\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * constructor for this virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 3) {\n\t\tchildren = [children];\n\t\t// https://github.com/preactjs/preact/issues/1916\n\t\tfor (i = 3; i < arguments.length; i++) {\n\t\t\tchildren.push(arguments[i]);\n\t\t}\n\t}\n\tif (children != null) {\n\t\tnormalizedProps.children = children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, null);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t// _nextDom must be initialized to undefined b/c it will eventually\n\t\t// be set to dom.nextSibling which can return `null` and it is important\n\t\t// to be able to distinguish between an uninitialized _nextDom and\n\t\t// a _nextDom that has been set to `null`\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\t_hydrating: null,\n\t\tconstructor: undefined,\n\t\t_original: original == null ? ++options._vnodeId : original\n\t};\n\n\tif (options.vnode != null) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: null };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is import('./internal').VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor === undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function Component(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nComponent.prototype.setState = function(update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != null && this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {import('./index').ComponentChildren | void}\n */\nComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._parent._children.indexOf(vnode) + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet vnode = component._vnode,\n\t\toldDom = vnode._dom,\n\t\tparentDom = component._parentDom;\n\n\tif (parentDom) {\n\t\tlet commitQueue = [];\n\t\tconst oldVNode = assign({}, vnode);\n\t\toldVNode._original = vnode._original + 1;\n\n\t\tlet newDom = diff(\n\t\t\tparentDom,\n\t\t\tvnode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\tvnode._hydrating != null ? [oldDom] : null,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(vnode) : oldDom,\n\t\t\tvnode._hydrating\n\t\t);\n\t\tcommitRoot(commitQueue, vnode);\n\n\t\tif (newDom != oldDom) {\n\t\t\tupdateParentDomPointers(vnode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/**\n * Asynchronously schedule a callback\n * @type {(cb: () => void) => void}\n */\n/* istanbul ignore next */\n// Note the following line isn't tree-shaken by rollup cuz of rollup/rollup#2566\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet queue;\n\twhile ((process._rerenderCount = rerenderQueue.length)) {\n\t\tqueue = rerenderQueue.sort((a, b) => a._vnode._depth - b._vnode._depth);\n\t\trerenderQueue = [];\n\t\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t\t// process() calls from getting scheduled while `queue` is still being consumed.\n\t\tqueue.some(c => {\n\t\t\tif (c._dirty) renderComponent(c);\n\t\t});\n\t}\n}\nprocess._rerenderCount = 0;\n","import { EMPTY_OBJ, EMPTY_ARR } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\n\nconst IS_HYDRATE = EMPTY_OBJ;\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./index').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * render into\n * @param {Element | Text} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we\n\t// are in hydration mode or not by passing `IS_HYDRATE` instead of a\n\t// DOM element.\n\tlet isHydrating = replaceNode === IS_HYDRATE;\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\tvnode = createElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\t((isHydrating ? parentDom : replaceNode || parentDom)._children = vnode),\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\treplaceNode && !isHydrating\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: parentDom.childNodes.length\n\t\t\t? EMPTY_ARR.slice.call(parentDom.childNodes)\n\t\t\t: null,\n\t\tcommitQueue,\n\t\treplaceNode || EMPTY_OBJ,\n\t\tisHydrating\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./index').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, IS_HYDRATE);\n}\n","import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue, contextId) {\n\tcontextId = '__cC' + i++;\n\n\tconst context = {\n\t\t_id: contextId,\n\t\t_defaultValue: defaultValue,\n\t\tConsumer(props, contextValue) {\n\t\t\t// return props.children(\n\t\t\t// \tcontext[contextId] ? context[contextId].props.value : defaultValue\n\t\t\t// );\n\t\t\treturn props.children(contextValue);\n\t\t},\n\t\tProvider(props, subs, ctx) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\tsubs = [];\n\t\t\t\tctx = {};\n\t\t\t\tctx[contextId] = this;\n\n\t\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\t\tthis.shouldComponentUpdate = function(_props) {\n\t\t\t\t\tif (this.props.value !== _props.value) {\n\t\t\t\t\t\t// I think the forced value propagation here was only needed when `options.debounceRendering` was being bypassed:\n\t\t\t\t\t\t// https://github.com/preactjs/preact/commit/4d339fb803bea09e9f198abf38ca1bf8ea4b7771#diff-54682ce380935a717e41b8bfc54737f6R358\n\t\t\t\t\t\t// In those cases though, even with the value corrected, we're double-rendering all nodes.\n\t\t\t\t\t\t// It might be better to just tell folks not to use force-sync mode.\n\t\t\t\t\t\t// Currently, using `useContext()` in a class component will overwrite its `this.context` value.\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context[contextId] = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\t\t\t\t\t\tsubs.some(enqueueRender);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\t// Devtools needs access to the context object when it\n\t// encounters a Provider. This is necessary to support\n\t// setting `displayName` on the context object instead\n\t// of on the component itself. See:\n\t// https://reactjs.org/docs/context.html#contextdisplayname\n\n\treturn (context.Provider._contextRef = context.Consumer.contextType = context);\n}\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { removeNode } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {import('../internal').PreactElement} parentDom The DOM element whose\n * children are being diffed\n * @param {import('../index').ComponentChildren[]} renderResult\n * @param {import('../internal').VNode} newParentVNode The new virtual\n * node whose children should be diff'ed against oldParentVNode\n * @param {import('../internal').VNode} oldParentVNode The old virtual\n * node whose children should be diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by getChildContext\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {Node | Text} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet i, j, oldVNode, childVNode, newDom, firstChildDom, refs;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet oldChildrenLength = oldChildren.length;\n\n\t// Only in very specific places should this logic be invoked (top level `render` and `diffElementNodes`).\n\t// I'm using `EMPTY_OBJ` to signal when `diffChildren` is invoked in these situations. I can't use `null`\n\t// for this purpose, because `null` is a valid value for `oldDom` which can mean to skip to this logic\n\t// (e.g. if mounting a new tree in which the old DOM should be ignored (usually for Fragments).\n\tif (oldDom == EMPTY_OBJ) {\n\t\tif (excessDomChildren != null) {\n\t\t\toldDom = excessDomChildren[0];\n\t\t} else if (oldChildrenLength) {\n\t\t\toldDom = getDomSibling(oldParentVNode, 0);\n\t\t} else {\n\t\t\toldDom = null;\n\t\t}\n\t}\n\n\tnewParentVNode._children = [];\n\tfor (i = 0; i < renderResult.length; i++) {\n\t\tchildVNode = renderResult[i];\n\n\t\tif (childVNode == null || typeof childVNode == 'boolean') {\n\t\t\tchildVNode = newParentVNode._children[i] = null;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (typeof childVNode == 'string' || typeof childVNode == 'number') {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tnull,\n\t\t\t\tchildVNode,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t} else if (Array.isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (childVNode._dom != null || childVNode._component != null) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tnull,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\t// Terser removes the `continue` here and wraps the loop body\n\t\t// in a `if (childVNode) { ... } condition\n\t\tif (childVNode == null) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Check if we find a corresponding element in oldChildren.\n\t\t// If found, delete the array item by setting to `undefined`.\n\t\t// We use `undefined`, as `null` is reserved for empty placeholders\n\t\t// (holes).\n\t\toldVNode = oldChildren[i];\n\n\t\tif (\n\t\t\toldVNode === null ||\n\t\t\t(oldVNode &&\n\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\tchildVNode.type === oldVNode.type)\n\t\t) {\n\t\t\toldChildren[i] = undefined;\n\t\t} else {\n\t\t\t// Either oldVNode === undefined or oldChildrenLength > 0,\n\t\t\t// so after this loop oldVNode == null or oldVNode is a valid value.\n\t\t\tfor (j = 0; j < oldChildrenLength; j++) {\n\t\t\t\toldVNode = oldChildren[j];\n\t\t\t\t// If childVNode is unkeyed, we only match similarly unkeyed nodes, otherwise we match by key.\n\t\t\t\t// We always match by type (in either case).\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\tchildVNode.type === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\toldChildren[j] = undefined;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\toldVNode = null;\n\t\t\t}\n\t\t}\n\n\t\toldVNode = oldVNode || EMPTY_OBJ;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tnewDom = diff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tisSvg,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating\n\t\t);\n\n\t\tif ((j = childVNode.ref) && oldVNode.ref != j) {\n\t\t\tif (!refs) refs = [];\n\t\t\tif (oldVNode.ref) refs.push(oldVNode.ref, null, childVNode);\n\t\t\trefs.push(j, childVNode._component || newDom, childVNode);\n\t\t}\n\n\t\tif (newDom != null) {\n\t\t\tif (firstChildDom == null) {\n\t\t\t\tfirstChildDom = newDom;\n\t\t\t}\n\n\t\t\toldDom = placeChild(\n\t\t\t\tparentDom,\n\t\t\t\tchildVNode,\n\t\t\t\toldVNode,\n\t\t\t\toldChildren,\n\t\t\t\texcessDomChildren,\n\t\t\t\tnewDom,\n\t\t\t\toldDom\n\t\t\t);\n\n\t\t\t// Browsers will infer an option's `value` from `textContent` when\n\t\t\t// no value is present. This essentially bypasses our code to set it\n\t\t\t// later in `diff()`. It works fine in all browsers except for IE11\n\t\t\t// where it breaks setting `select.value`. There it will be always set\n\t\t\t// to an empty string. Re-applying an options value will fix that, so\n\t\t\t// there are probably some internal data structures that aren't\n\t\t\t// updated properly.\n\t\t\t//\n\t\t\t// To fix it we make sure to reset the inferred value, so that our own\n\t\t\t// value check in `diff()` won't be skipped.\n\t\t\tif (!isHydrating && newParentVNode.type == 'option') {\n\t\t\t\tparentDom.value = '';\n\t\t\t} else if (typeof newParentVNode.type == 'function') {\n\t\t\t\t// Because the newParentVNode is Fragment-like, we need to set it's\n\t\t\t\t// _nextDom property to the nextSibling of its last child DOM node.\n\t\t\t\t//\n\t\t\t\t// `oldDom` contains the correct value here because if the last child\n\t\t\t\t// is a Fragment-like, then oldDom has already been set to that child's _nextDom.\n\t\t\t\t// If the last child is a DOM VNode, then oldDom will be set to that DOM\n\t\t\t\t// node's nextSibling.\n\t\t\t\tnewParentVNode._nextDom = oldDom;\n\t\t\t}\n\t\t} else if (\n\t\t\toldDom &&\n\t\t\toldVNode._dom == oldDom &&\n\t\t\toldDom.parentNode != parentDom\n\t\t) {\n\t\t\t// The above condition is to handle null placeholders. See test in placeholder.test.js:\n\t\t\t// `efficiently replace null placeholders in parent rerenders`\n\t\t\toldDom = getDomSibling(oldVNode);\n\t\t}\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\t// Remove children that are not part of any vnode.\n\tif (excessDomChildren != null && typeof newParentVNode.type != 'function') {\n\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any.\n\tfor (i = oldChildrenLength; i--; ) {\n\t\tif (oldChildren[i] != null) unmount(oldChildren[i], oldChildren[i]);\n\t}\n\n\t// Set refs only after unmount\n\tif (refs) {\n\t\tfor (i = 0; i < refs.length; i++) {\n\t\t\tapplyRef(refs[i], refs[++i], refs[++i]);\n\t\t}\n\t}\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {import('../index').ComponentChildren} children The unflattened\n * children of a virtual node\n * @returns {import('../internal').VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == null || typeof children == 'boolean') {\n\t} else if (Array.isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\nexport function placeChild(\n\tparentDom,\n\tchildVNode,\n\toldVNode,\n\toldChildren,\n\texcessDomChildren,\n\tnewDom,\n\toldDom\n) {\n\tlet nextDom;\n\tif (childVNode._nextDom !== undefined) {\n\t\t// Only Fragments or components that return Fragment like VNodes will\n\t\t// have a non-undefined _nextDom. Continue the diff from the sibling\n\t\t// of last DOM child of this child VNode\n\t\tnextDom = childVNode._nextDom;\n\n\t\t// Eagerly cleanup _nextDom. We don't need to persist the value because\n\t\t// it is only used by `diffChildren` to determine where to resume the diff after\n\t\t// diffing Components and Fragments. Once we store it the nextDOM local var, we\n\t\t// can clean up the property\n\t\tchildVNode._nextDom = undefined;\n\t} else if (\n\t\texcessDomChildren == oldVNode ||\n\t\tnewDom != oldDom ||\n\t\tnewDom.parentNode == null\n\t) {\n\t\t// NOTE: excessDomChildren==oldVNode above:\n\t\t// This is a compression of excessDomChildren==null && oldVNode==null!\n\t\t// The values only have the same type when `null`.\n\n\t\touter: if (oldDom == null || oldDom.parentNode !== parentDom) {\n\t\t\tparentDom.appendChild(newDom);\n\t\t\tnextDom = null;\n\t\t} else {\n\t\t\t// `j<oldChildrenLength; j+=2` is an alternative to `j++<oldChildrenLength/2`\n\t\t\tfor (\n\t\t\t\tlet sibDom = oldDom, j = 0;\n\t\t\t\t(sibDom = sibDom.nextSibling) && j < oldChildren.length;\n\t\t\t\tj += 2\n\t\t\t) {\n\t\t\t\tif (sibDom == newDom) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t}\n\t\t\tparentDom.insertBefore(newDom, oldDom);\n\t\t\tnextDom = oldDom;\n\t\t}\n\t}\n\n\t// If we have pre-calculated the nextDOM node, use it. Else calculate it now\n\t// Strictly check for `undefined` here cuz `null` is a valid value of `nextDom`.\n\t// See more detail in create-element.js:createVNode\n\tif (nextDom !== undefined) {\n\t\toldDom = nextDom;\n\t} else {\n\t\toldDom = newDom.nextSibling;\n\t}\n\n\treturn oldDom;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * Diff the old and new properties of a VNode and apply changes to the DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to apply\n * changes to\n * @param {object} newProps The new props\n * @param {object} oldProps The old props\n * @param {boolean} isSvg Whether or not this node is an SVG node\n * @param {boolean} hydrate Whether or not we are in hydration mode\n */\nexport function diffProps(dom, newProps, oldProps, isSvg, hydrate) {\n\tlet i;\n\n\tfor (i in oldProps) {\n\t\tif (i !== 'children' && i !== 'key' && !(i in newProps)) {\n\t\t\tsetProperty(dom, i, null, oldProps[i], isSvg);\n\t\t}\n\t}\n\n\tfor (i in newProps) {\n\t\tif (\n\t\t\t(!hydrate || typeof newProps[i] == 'function') &&\n\t\t\ti !== 'children' &&\n\t\t\ti !== 'key' &&\n\t\t\ti !== 'value' &&\n\t\t\ti !== 'checked' &&\n\t\t\toldProps[i] !== newProps[i]\n\t\t) {\n\t\t\tsetProperty(dom, i, newProps[i], oldProps[i], isSvg);\n\t\t}\n\t}\n}\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value);\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, isSvg) {\n\tlet useCapture, nameLower, proxy;\n\n\tif (isSvg && name == 'className') name = 'class';\n\n\t// if (isSvg) {\n\t// \tif (name === 'className') name = 'class';\n\t// } else if (name === 'class') name += 'Name';\n\n\tif (name === 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] !== oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tuseCapture = name !== (name = name.replace(/Capture$/, ''));\n\t\tnameLower = name.toLowerCase();\n\t\tif (nameLower in dom) name = nameLower;\n\t\tname = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tproxy = useCapture ? eventProxyCapture : eventProxy;\n\t\tif (value) {\n\t\t\tif (!oldValue) dom.addEventListener(name, proxy, useCapture);\n\t\t} else {\n\t\t\tdom.removeEventListener(name, proxy, useCapture);\n\t\t}\n\t} else if (\n\t\tname !== 'list' &&\n\t\tname !== 'tagName' &&\n\t\t// HTMLButtonElement.form and HTMLInputElement.form are read-only but can be set using\n\t\t// setAttribute\n\t\tname !== 'form' &&\n\t\tname !== 'type' &&\n\t\tname !== 'size' &&\n\t\tname !== 'download' &&\n\t\tname !== 'href' &&\n\t\t!isSvg &&\n\t\tname in dom\n\t) {\n\t\tdom[name] = value == null ? '' : value;\n\t} else if (typeof value != 'function' && name !== 'dangerouslySetInnerHTML') {\n\t\tif (name !== (name = name.replace(/xlink:?/, ''))) {\n\t\t\tif (value == null || value === false) {\n\t\t\t\tdom.removeAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase()\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tdom.setAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase(),\n\t\t\t\t\tvalue\n\t\t\t\t);\n\t\t\t}\n\t\t} else if (\n\t\t\tvalue == null ||\n\t\t\t(value === false &&\n\t\t\t\t// ARIA-attributes have a different notion of boolean values.\n\t\t\t\t// The value `false` is different from the attribute not\n\t\t\t\t// existing on the DOM, so we can't remove it. For non-boolean\n\t\t\t\t// ARIA-attributes we could treat false as a removal, but the\n\t\t\t\t// amount of exceptions would cost us too many bytes. On top of\n\t\t\t\t// that other VDOM frameworks also always stringify `false`.\n\t\t\t\t!/^ar/.test(name))\n\t\t) {\n\t\t\tdom.removeAttribute(name);\n\t\t} else {\n\t\t\tdom.setAttribute(name, value);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\tthis._listeners[e.type + false](options.event ? options.event(e) : e);\n}\n\nfunction eventProxyCapture(e) {\n\tthis._listeners[e.type + true](options.event ? options.event(e) : e);\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { Component } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren, placeChild } from './children';\nimport { diffProps, setProperty } from './props';\nimport { assign, removeNode } from '../util';\nimport options from '../options';\n\nfunction reorderChildren(newVNode, oldDom, parentDom) {\n\tfor (let tmp = 0; tmp < newVNode._children.length; tmp++) {\n\t\tconst vnode = newVNode._children[tmp];\n\t\tif (vnode) {\n\t\t\tvnode._parent = newVNode;\n\n\t\t\tif (vnode._dom) {\n\t\t\t\tif (typeof vnode.type == 'function' && vnode._children.length > 1) {\n\t\t\t\t\treorderChildren(vnode, oldDom, parentDom);\n\t\t\t\t}\n\n\t\t\t\toldDom = placeChild(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tvnode,\n\t\t\t\t\tvnode,\n\t\t\t\t\tnewVNode._children,\n\t\t\t\t\tnull,\n\t\t\t\t\tvnode._dom,\n\t\t\t\t\toldDom\n\t\t\t\t);\n\n\t\t\t\tif (typeof newVNode.type == 'function') {\n\t\t\t\t\tnewVNode._nextDom = oldDom;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {import('../internal').PreactElement} parentDom The parent of the DOM element\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by getChildContext\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {Element | Text} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} [isHydrating] Whether or not we are in hydration\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._hydrating != null) {\n\t\tisHydrating = oldVNode._hydrating;\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\t// if we resume, we want the tree to be \"unlocked\"\n\t\tnewVNode._hydrating = null;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\ttry {\n\t\touter: if (typeof newType == 'function') {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\tnewVNode._component = c = new Component(newProps, componentContext);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != null &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\tnewVNode._original === oldVNode._original\n\t\t\t\t) {\n\t\t\t\t\tc.props = newProps;\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original !== oldVNode._original) c._dirty = false;\n\t\t\t\t\tc._vnode = newVNode;\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\treorderChildren(newVNode, oldDom, parentDom);\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc.state = c._nextState;\n\n\t\t\tif ((tmp = options._render)) tmp(newVNode);\n\n\t\t\tc._dirty = false;\n\t\t\tc._vnode = newVNode;\n\t\t\tc._parentDom = parentDom;\n\n\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type == Fragment && tmp.key == null;\n\t\t\tlet renderResult = isTopLevelFragment ? tmp.props.children : tmp;\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tArray.isArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._hydrating = null;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\n\t\t\tc._force = false;\n\t\t} else if (\n\t\t\texcessDomChildren == null &&\n\t\t\tnewVNode._original === oldVNode._original\n\t\t) {\n\t\t\tnewVNode._children = oldVNode._children;\n\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t} else {\n\t\t\tnewVNode._dom = diffElementNodes(\n\t\t\t\toldVNode._dom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\tif ((tmp = options.diffed)) tmp(newVNode);\n\t} catch (e) {\n\t\tnewVNode._original = null;\n\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\tif (isHydrating || excessDomChildren != null) {\n\t\t\tnewVNode._dom = oldDom;\n\t\t\tnewVNode._hydrating = !!isHydrating;\n\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = null;\n\t\t\t// ^ could possibly be simplified to:\n\t\t\t// excessDomChildren.length = 0;\n\t\t}\n\t\toptions._catchError(e, newVNode, oldVNode);\n\t}\n\n\treturn newVNode._dom;\n}\n\n/**\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').VNode} root\n */\nexport function commitRoot(commitQueue, root) {\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {import('../internal').PreactElement} dom The DOM element representing\n * the virtual nodes being diffed\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {*} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @returns {import('../internal').PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating\n) {\n\tlet i;\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tisSvg = newVNode.type === 'svg' || isSvg;\n\n\tif (excessDomChildren != null) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tconst child = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tchild != null &&\n\t\t\t\t((newVNode.type === null\n\t\t\t\t\t? child.nodeType === 3\n\t\t\t\t\t: child.localName === newVNode.type) ||\n\t\t\t\t\tdom == child)\n\t\t\t) {\n\t\t\t\tdom = child;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (newVNode.type === null) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = isSvg\n\t\t\t? document.createElementNS('http://www.w3.org/2000/svg', newVNode.type)\n\t\t\t: document.createElement(\n\t\t\t\t\tnewVNode.type,\n\t\t\t\t\tnewProps.is && { is: newProps.is }\n\t\t\t  );\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t\t// we are creating a new node, so we can assume this is a new subtree (in case we are hydrating), this deopts the hydrate\n\t\tisHydrating = false;\n\t}\n\n\tif (newVNode.type === null) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data !== newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\tif (excessDomChildren != null) {\n\t\t\texcessDomChildren = EMPTY_ARR.slice.call(dom.childNodes);\n\t\t}\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\tlet oldHtml = oldProps.dangerouslySetInnerHTML;\n\t\tlet newHtml = newProps.dangerouslySetInnerHTML;\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tif (!isHydrating) {\n\t\t\t// But, if we are in a situation where we are using existing DOM (e.g. replaceNode)\n\t\t\t// we should read the existing DOM attributes to diff them\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\toldProps = {};\n\t\t\t\tfor (let i = 0; i < dom.attributes.length; i++) {\n\t\t\t\t\toldProps[dom.attributes[i].name] = dom.attributes[i].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newHtml || oldHtml) {\n\t\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\t\tif (\n\t\t\t\t\t!newHtml ||\n\t\t\t\t\t((!oldHtml || newHtml.__html != oldHtml.__html) &&\n\t\t\t\t\t\tnewHtml.__html !== dom.innerHTML)\n\t\t\t\t) {\n\t\t\t\t\tdom.innerHTML = (newHtml && newHtml.__html) || '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdiffProps(dom, newProps, oldProps, isSvg, isHydrating);\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\ti = newVNode.props.children;\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tArray.isArray(i) ? i : [i],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnewVNode.type === 'foreignObject' ? false : isSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tEMPTY_OBJ,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\t// (as above, don't diff props during hydration)\n\t\tif (!isHydrating) {\n\t\t\tif (\n\t\t\t\t'value' in newProps &&\n\t\t\t\t(i = newProps.value) !== undefined &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(i !== dom.value || (newVNode.type === 'progress' && !i))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'value', i, oldProps.value, false);\n\t\t\t}\n\t\t\tif (\n\t\t\t\t'checked' in newProps &&\n\t\t\t\t(i = newProps.checked) !== undefined &&\n\t\t\t\ti !== dom.checked\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'checked', i, oldProps.checked, false);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {object|function} ref\n * @param {any} value\n * @param {import('../internal').VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {import('../internal').VNode} vnode The virtual node to unmount\n * @param {import('../internal').VNode} parentVNode The parent of the VNode that\n * initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) applyRef(r, null, parentVNode);\n\t}\n\n\tlet dom;\n\tif (!skipRemove && typeof vnode.type != 'function') {\n\t\tskipRemove = (dom = vnode._dom) != null;\n\t}\n\n\t// Must be set to `undefined` to properly clean up `_nextDom`\n\t// for which `null` is a valid value. See comment in `create-element.js`\n\tvnode._dom = vnode._nextDom = undefined;\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) unmount(r[i], parentVNode, skipRemove);\n\t\t}\n\t}\n\n\tif (dom != null) removeNode(dom);\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { assign } from './util';\nimport { createVNode } from './create-element';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./index').ComponentChildren>} rest Any additional arguments will be used as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 3) {\n\t\tchildren = [children];\n\t\tfor (i = 3; i < arguments.length; i++) {\n\t\t\tchildren.push(arguments[i]);\n\t\t}\n\t}\n\tif (children != null) {\n\t\tnormalizedProps.children = children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tnull\n\t);\n}\n","// import { enqueueRender } from '../component';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw\n * the error that was caught (except for unmounting when this parameter\n * is the highest parent that was being unmounted)\n */\nexport function _catchError(error, vnode) {\n\t/** @type {import('../internal').Component} */\n\tlet component, ctor, handled;\n\n\tconst wasHydrating = vnode._hydrating;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != null) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error);\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\tvnode._hydrating = wasHydrating;\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = window;"],"sourceRoot":""}