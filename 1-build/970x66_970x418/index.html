<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="initial-scale = 1.0,maximum-scale = 1.0" />
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta content="utf-8" http-equiv="encoding" />
		<meta name="ad.size" content="width=970,height=418" />

		<title>160over90 Performance Marketing</title>

		<!-- Greensock CDN is nearly universally cached, so don't bundle -->
		<script src="https://s0.2mdn.net/ads/studio/cached_libs/gsap_3.5.1_min.js"></script>

		<script type="text/javascript">
			/*-- Red.Network.clicktags.start --*/
			var clickTag = function () {
				Enabler.exit('clickTag')
			}
			var collapsedExit = function () {
				Enabler.exit('USER_EXITED_WHILE_COLLAPSED')
			}
			var expandedExit = function () {
				Enabler.exit('USER_EXITED_WHILE_EXPANDED')
			}
			/*-- Red.Network.clicktags.end --*/

			/*-- Red.Settings.ad_params.start --*/
			var adParams = {
				networkId: 'STANDARD',
				adWidth: 970,
				adHeight: 418,
				environmentId: 'debug',
				politeLoadAfter: 1,
				failoverOnError: true,
				version: '3.1.0-beta.1',
				expandable: {
					collapsedWidth: 970,
					collapsedHeight: 66,
					startExpanded: true, // <-- changed!!
					collapseOnExit: true,
					hasIntroVideo: true,
					hasMainVideo: true,
					introVideoID: 'QohH89Eu5iM',
					mainVideoID: '2g811Eo7K8U',
				},
			}
			/*-- Red.Settings.ad_params.end --*/

			/*-- Red.Settings.assets.start --*/
			var assets = {
				preloader: ['./images/preloader-img.gif'], // Default generic preloader animation
				// preloader: ['../common/images/dp-preloader.gif'], // Custom preloader image or animation
				failover: ['./backup.jpg'],
				payload: {
					text: ['./build.bundle.js'],
					binary: [],
				},
				external: [],
			}
			/*-- Red.Settings.assets.end --*/

			function onImpression(binaryAssets) {
				console.log('Index.onImpression()')
				Build.launch(binaryAssets)
			}

			function isDevEnvironment() {
				return adParams.environmentId == 'debug' || window.location.href.match(/[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+:[0-9]+/)
			}
		</script>

		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}
			#view {
				position: relative;
				overflow: hidden;
				width: 970px;
				height: 418px;
			}
			#main {
				position: absolute;
				display: block;
				top: 0px;
				right: 0px;
				bottom: 0px;
				left: 0px;
			}
			#aux {
				position: absolute;
				top: 0px;
				right: 0px;
				bottom: 0px;
				left: 0px;
			}

			#preloader {
				position: absolute;
				width: 970px;
				height: 66px;
				border: 1px solid #775236;
				display: flex;
				justify-content: center;
				align-items: center;
				background: #937353;
			}

			#preloader-img {
				display: block;
			}

			#backup {
				position: absolute;
			}
		</style>

		<!-- Red.Network.script.start -->
		<!-- Red.Network.script.end -->
	</head>

	<body>
		<div id="view">
			<div id="main"></div>
			<div id="aux">
				<div id="preloader"></div>
				<div id="backup"></div>
			</div>
		</div>

		<script type="text/javascript">
			/*-- Red.Require.promise_polyfill.start --*/
			require('./1-build/node_modules/promise-polyfill/dist/polyfill.min.js')
			/*-- Red.Require.promise_polyfill.end --*/
		</script>

		<script type="text/javascript">
			function loadBackup() {
				console.log('Index.loadBackup()')
				document.getElementById('backup').style.cssText =
					'background-image: url(' + adParams.adPath + assets.failover.images[0].source + ');'
				document.getElementById('main').style.display = 'none'
				document.getElementById('aux').style.display = 'block'
			}
			function useBackup() {
				console.log('Index.useBackup()')
				useStatic()
			}
		</script>

		<script type="text/javascript">
			var Network, queryParams, adData

			/* -- LAUNCH --------------------------------------------
			 *
			 *
			 */
			// immediatelly invoked in inline_entry (node_modules/ad-entry/index.js)
			function prepareIndex() {
				console.log('Index.prepareIndex()')
				makeAuxClickable()
				return new Promise((resolve) => {
					/*-- Red.Network.onload.start --*/
					initDCS()
					//
					function initDCS() {
						if (!Enabler.isInitialized()) Enabler.addEventListener(studio.events.StudioEvent.INIT, onDoubleClickInitialized)
						else onDoubleClickInitialized()
					}
					function onDoubleClickInitialized() {
						console.log('Index.onDoubleClickInitialized()')

						if (!Enabler.isVisible()) Enabler.addEventListener(studio.events.StudioEvent.VISIBLE, initDCSComplete)
						else initDCSComplete()
					}
					function initDCSComplete() {
						resolve()
					}
					/*-- Red.Network.onload.end --*/
				})
			}
			// ad-params
			function prepareAdParamsMisc() {
				console.log('Index.prepareAdParamsMisc()')
				return new Promise((resolve) => {
					resolve()
				})
			}
			// preloader
			function preparePreloader(images) {
				console.log('Index.preparePreloader()')
				images.map((image) => {
					document.getElementById('preloader').appendChild(image)
				})
				// resolve this function when
				// preloader animation is complete
				return new Promise((resolve) => {
					setTimeout(() => {
						resolve()
					}, 1000)
					// resolve()
				})
			}
			function hidePreloader() {
				console.log('Index.hidePreloader()')
				document.getElementById('aux').style.display = 'none'
				document.getElementById('preloader').style.display = 'none'
			}

			// exits
			function prepareNetworkExit() {
				console.log('Index.prepareNetworkExit()')
				Network = new (function () {
					/*-- Red.Network.exit.start --*/
					this.exit = function (clickTag, url) {
						console.log('Network -> DC_STUDIO EXIT')
						if (typeof clickTag == 'function') clickTag.call(this, url)
						else throw new Error('ERROR: clickTag for this platform needs to be a callable function. See <Network> docs.')
					}
					/*-- Red.Network.exit.end --*/
					// /*-- Red.Network.exit.start --*/
					// this.exit = function (clickTag) {
					// 	console.log('Network -> STANDARD EXIT')
					// 	window.open(clickTag, '_blank')
					// }
					// /*-- Red.Network.exit.end --*/

					this.appendMacro = function (_macro, _clickTag) {
						if (_macro.search(/^%%/) > -1) return _clickTag
						else return _macro + _clickTag
					}
				})()
			}
			function makeAuxClickable() {
				var aux = document.getElementById('aux')
				aux.setAttribute('onclick', 'handleAuxClick()')
			}
			function handleAuxClick() {
				console.log('Index.handleAuxClick()')
				/*-- Red.Network.exit_aux.start --*/
				Network.exit(clickTag)
				/*-- Red.Network.exit_aux.end --*/
			}
			var trackVideoPlay = function () {
				Enabler.counter('YTP Video Play', true)
			}
			var trackVideoReplay = function () {
				Enabler.counter('YTP Video Replay', true)
			}
			var trackVideoPause = function () {
				Enabler.counter('YTP Video Pause', true)
			}
			var trackVideoComplete = function () {
				Enabler.counter('YTP Video Complete', true)
			}
			// ad-global bundle
			/*-- Red.Require.ad-global.start --*/
			require('./1-build/node_modules/@ff0000-ad-tech/ad-global/dist/ad-global.inline.js')
			/*-- Red.Require.ad-global.end --*/
		</script>

		<!-- inline bundle -->
		<script type="text/javascript">
			/*-- Red.Bundle.inline.start --*/
			/*-- Red.Bundle.inline.end --*/
		</script>

		<!-- initial bundle -->
		<script type="text/javascript">
			/*-- Red.Bundle.initial.start --*/
			/*-- Red.Bundle.initial.end --*/
		</script>
	</body>
</html>
